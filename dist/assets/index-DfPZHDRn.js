(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();function Sy(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Yd={exports:{}},Fa={},Xd={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lm;function dw(){if(Lm)return Pe;Lm=1;var s=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),_=Symbol.iterator;function R(V){return V===null||typeof V!="object"?null:(V=_&&V[_]||V["@@iterator"],typeof V=="function"?V:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K=Object.assign,J={};function B(V,H,se){this.props=V,this.context=H,this.refs=J,this.updater=se||z}B.prototype.isReactComponent={},B.prototype.setState=function(V,H){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,H,"setState")},B.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function ne(){}ne.prototype=B.prototype;function ge(V,H,se){this.props=V,this.context=H,this.refs=J,this.updater=se||z}var G=ge.prototype=new ne;G.constructor=ge,K(G,B.prototype),G.isPureReactComponent=!0;var Ne=Array.isArray,je=Object.prototype.hasOwnProperty,Se={current:null},b={key:!0,ref:!0,__self:!0,__source:!0};function I(V,H,se){var le,fe={},Ee=null,De=null;if(H!=null)for(le in H.ref!==void 0&&(De=H.ref),H.key!==void 0&&(Ee=""+H.key),H)je.call(H,le)&&!b.hasOwnProperty(le)&&(fe[le]=H[le]);var pe=arguments.length-2;if(pe===1)fe.children=se;else if(1<pe){for(var Ue=Array(pe),gt=0;gt<pe;gt++)Ue[gt]=arguments[gt+2];fe.children=Ue}if(V&&V.defaultProps)for(le in pe=V.defaultProps,pe)fe[le]===void 0&&(fe[le]=pe[le]);return{$$typeof:s,type:V,key:Ee,ref:De,props:fe,_owner:Se.current}}function C(V,H){return{$$typeof:s,type:V.type,key:H,ref:V.ref,props:V.props,_owner:V._owner}}function P(V){return typeof V=="object"&&V!==null&&V.$$typeof===s}function N(V){var H={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(se){return H[se]})}var O=/\/+/g;function k(V,H){return typeof V=="object"&&V!==null&&V.key!=null?N(""+V.key):H.toString(36)}function He(V,H,se,le,fe){var Ee=typeof V;(Ee==="undefined"||Ee==="boolean")&&(V=null);var De=!1;if(V===null)De=!0;else switch(Ee){case"string":case"number":De=!0;break;case"object":switch(V.$$typeof){case s:case e:De=!0}}if(De)return De=V,fe=fe(De),V=le===""?"."+k(De,0):le,Ne(fe)?(se="",V!=null&&(se=V.replace(O,"$&/")+"/"),He(fe,H,se,"",function(gt){return gt})):fe!=null&&(P(fe)&&(fe=C(fe,se+(!fe.key||De&&De.key===fe.key?"":(""+fe.key).replace(O,"$&/")+"/")+V)),H.push(fe)),1;if(De=0,le=le===""?".":le+":",Ne(V))for(var pe=0;pe<V.length;pe++){Ee=V[pe];var Ue=le+k(Ee,pe);De+=He(Ee,H,se,Ue,fe)}else if(Ue=R(V),typeof Ue=="function")for(V=Ue.call(V),pe=0;!(Ee=V.next()).done;)Ee=Ee.value,Ue=le+k(Ee,pe++),De+=He(Ee,H,se,Ue,fe);else if(Ee==="object")throw H=String(V),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return De}function st(V,H,se){if(V==null)return V;var le=[],fe=0;return He(V,le,"","",function(Ee){return H.call(se,Ee,fe++)}),le}function Re(V){if(V._status===-1){var H=V._result;H=H(),H.then(function(se){(V._status===0||V._status===-1)&&(V._status=1,V._result=se)},function(se){(V._status===0||V._status===-1)&&(V._status=2,V._result=se)}),V._status===-1&&(V._status=0,V._result=H)}if(V._status===1)return V._result.default;throw V._result}var be={current:null},Z={transition:null},ce={ReactCurrentDispatcher:be,ReactCurrentBatchConfig:Z,ReactCurrentOwner:Se};function re(){throw Error("act(...) is not supported in production builds of React.")}return Pe.Children={map:st,forEach:function(V,H,se){st(V,function(){H.apply(this,arguments)},se)},count:function(V){var H=0;return st(V,function(){H++}),H},toArray:function(V){return st(V,function(H){return H})||[]},only:function(V){if(!P(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Pe.Component=B,Pe.Fragment=t,Pe.Profiler=o,Pe.PureComponent=ge,Pe.StrictMode=i,Pe.Suspense=g,Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ce,Pe.act=re,Pe.cloneElement=function(V,H,se){if(V==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+V+".");var le=K({},V.props),fe=V.key,Ee=V.ref,De=V._owner;if(H!=null){if(H.ref!==void 0&&(Ee=H.ref,De=Se.current),H.key!==void 0&&(fe=""+H.key),V.type&&V.type.defaultProps)var pe=V.type.defaultProps;for(Ue in H)je.call(H,Ue)&&!b.hasOwnProperty(Ue)&&(le[Ue]=H[Ue]===void 0&&pe!==void 0?pe[Ue]:H[Ue])}var Ue=arguments.length-2;if(Ue===1)le.children=se;else if(1<Ue){pe=Array(Ue);for(var gt=0;gt<Ue;gt++)pe[gt]=arguments[gt+2];le.children=pe}return{$$typeof:s,type:V.type,key:fe,ref:Ee,props:le,_owner:De}},Pe.createContext=function(V){return V={$$typeof:d,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},V.Provider={$$typeof:u,_context:V},V.Consumer=V},Pe.createElement=I,Pe.createFactory=function(V){var H=I.bind(null,V);return H.type=V,H},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(V){return{$$typeof:m,render:V}},Pe.isValidElement=P,Pe.lazy=function(V){return{$$typeof:x,_payload:{_status:-1,_result:V},_init:Re}},Pe.memo=function(V,H){return{$$typeof:y,type:V,compare:H===void 0?null:H}},Pe.startTransition=function(V){var H=Z.transition;Z.transition={};try{V()}finally{Z.transition=H}},Pe.unstable_act=re,Pe.useCallback=function(V,H){return be.current.useCallback(V,H)},Pe.useContext=function(V){return be.current.useContext(V)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(V){return be.current.useDeferredValue(V)},Pe.useEffect=function(V,H){return be.current.useEffect(V,H)},Pe.useId=function(){return be.current.useId()},Pe.useImperativeHandle=function(V,H,se){return be.current.useImperativeHandle(V,H,se)},Pe.useInsertionEffect=function(V,H){return be.current.useInsertionEffect(V,H)},Pe.useLayoutEffect=function(V,H){return be.current.useLayoutEffect(V,H)},Pe.useMemo=function(V,H){return be.current.useMemo(V,H)},Pe.useReducer=function(V,H,se){return be.current.useReducer(V,H,se)},Pe.useRef=function(V){return be.current.useRef(V)},Pe.useState=function(V){return be.current.useState(V)},Pe.useSyncExternalStore=function(V,H,se){return be.current.useSyncExternalStore(V,H,se)},Pe.useTransition=function(){return be.current.useTransition()},Pe.version="18.3.1",Pe}var jm;function jh(){return jm||(jm=1,Xd.exports=dw()),Xd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Um;function hw(){if(Um)return Fa;Um=1;var s=jh(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function d(m,g,y){var x,_={},R=null,z=null;y!==void 0&&(R=""+y),g.key!==void 0&&(R=""+g.key),g.ref!==void 0&&(z=g.ref);for(x in g)i.call(g,x)&&!u.hasOwnProperty(x)&&(_[x]=g[x]);if(m&&m.defaultProps)for(x in g=m.defaultProps,g)_[x]===void 0&&(_[x]=g[x]);return{$$typeof:e,type:m,key:R,ref:z,props:_,_owner:o.current}}return Fa.Fragment=t,Fa.jsx=d,Fa.jsxs=d,Fa}var zm;function fw(){return zm||(zm=1,Yd.exports=hw()),Yd.exports}var w=fw(),Iu={},Jd={exports:{}},dn={},Zd={exports:{}},eh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bm;function pw(){return Bm||(Bm=1,(function(s){function e(Z,ce){var re=Z.length;Z.push(ce);e:for(;0<re;){var V=re-1>>>1,H=Z[V];if(0<o(H,ce))Z[V]=ce,Z[re]=H,re=V;else break e}}function t(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var ce=Z[0],re=Z.pop();if(re!==ce){Z[0]=re;e:for(var V=0,H=Z.length,se=H>>>1;V<se;){var le=2*(V+1)-1,fe=Z[le],Ee=le+1,De=Z[Ee];if(0>o(fe,re))Ee<H&&0>o(De,fe)?(Z[V]=De,Z[Ee]=re,V=Ee):(Z[V]=fe,Z[le]=re,V=le);else if(Ee<H&&0>o(De,re))Z[V]=De,Z[Ee]=re,V=Ee;else break e}}return ce}function o(Z,ce){var re=Z.sortIndex-ce.sortIndex;return re!==0?re:Z.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var d=Date,m=d.now();s.unstable_now=function(){return d.now()-m}}var g=[],y=[],x=1,_=null,R=3,z=!1,K=!1,J=!1,B=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,ge=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(Z){for(var ce=t(y);ce!==null;){if(ce.callback===null)i(y);else if(ce.startTime<=Z)i(y),ce.sortIndex=ce.expirationTime,e(g,ce);else break;ce=t(y)}}function Ne(Z){if(J=!1,G(Z),!K)if(t(g)!==null)K=!0,Re(je);else{var ce=t(y);ce!==null&&be(Ne,ce.startTime-Z)}}function je(Z,ce){K=!1,J&&(J=!1,ne(I),I=-1),z=!0;var re=R;try{for(G(ce),_=t(g);_!==null&&(!(_.expirationTime>ce)||Z&&!N());){var V=_.callback;if(typeof V=="function"){_.callback=null,R=_.priorityLevel;var H=V(_.expirationTime<=ce);ce=s.unstable_now(),typeof H=="function"?_.callback=H:_===t(g)&&i(g),G(ce)}else i(g);_=t(g)}if(_!==null)var se=!0;else{var le=t(y);le!==null&&be(Ne,le.startTime-ce),se=!1}return se}finally{_=null,R=re,z=!1}}var Se=!1,b=null,I=-1,C=5,P=-1;function N(){return!(s.unstable_now()-P<C)}function O(){if(b!==null){var Z=s.unstable_now();P=Z;var ce=!0;try{ce=b(!0,Z)}finally{ce?k():(Se=!1,b=null)}}else Se=!1}var k;if(typeof ge=="function")k=function(){ge(O)};else if(typeof MessageChannel<"u"){var He=new MessageChannel,st=He.port2;He.port1.onmessage=O,k=function(){st.postMessage(null)}}else k=function(){B(O,0)};function Re(Z){b=Z,Se||(Se=!0,k())}function be(Z,ce){I=B(function(){Z(s.unstable_now())},ce)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Z){Z.callback=null},s.unstable_continueExecution=function(){K||z||(K=!0,Re(je))},s.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<Z?Math.floor(1e3/Z):5},s.unstable_getCurrentPriorityLevel=function(){return R},s.unstable_getFirstCallbackNode=function(){return t(g)},s.unstable_next=function(Z){switch(R){case 1:case 2:case 3:var ce=3;break;default:ce=R}var re=R;R=ce;try{return Z()}finally{R=re}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(Z,ce){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var re=R;R=Z;try{return ce()}finally{R=re}},s.unstable_scheduleCallback=function(Z,ce,re){var V=s.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?V+re:V):re=V,Z){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=re+H,Z={id:x++,callback:ce,priorityLevel:Z,startTime:re,expirationTime:H,sortIndex:-1},re>V?(Z.sortIndex=re,e(y,Z),t(g)===null&&Z===t(y)&&(J?(ne(I),I=-1):J=!0,be(Ne,re-V))):(Z.sortIndex=H,e(g,Z),K||z||(K=!0,Re(je))),Z},s.unstable_shouldYield=N,s.unstable_wrapCallback=function(Z){var ce=R;return function(){var re=R;R=ce;try{return Z.apply(this,arguments)}finally{R=re}}}})(eh)),eh}var $m;function mw(){return $m||($m=1,Zd.exports=pw()),Zd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hm;function gw(){if(Hm)return dn;Hm=1;var s=jh(),e=mw();function t(n){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function u(n,r){d(n,r),d(n+"Capture",r)}function d(n,r){for(o[n]=r,n=0;n<r.length;n++)i.add(r[n])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},_={};function R(n){return g.call(_,n)?!0:g.call(x,n)?!1:y.test(n)?_[n]=!0:(x[n]=!0,!1)}function z(n,r,a,c){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function K(n,r,a,c){if(r===null||typeof r>"u"||z(n,r,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function J(n,r,a,c,h,f,E){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=c,this.attributeNamespace=h,this.mustUseProperty=a,this.propertyName=n,this.type=r,this.sanitizeURL=f,this.removeEmptyString=E}var B={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){B[n]=new J(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var r=n[0];B[r]=new J(r,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){B[n]=new J(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){B[n]=new J(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){B[n]=new J(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){B[n]=new J(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){B[n]=new J(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){B[n]=new J(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){B[n]=new J(n,5,!1,n.toLowerCase(),null,!1,!1)});var ne=/[\-:]([a-z])/g;function ge(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var r=n.replace(ne,ge);B[r]=new J(r,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var r=n.replace(ne,ge);B[r]=new J(r,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var r=n.replace(ne,ge);B[r]=new J(r,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){B[n]=new J(n,1,!1,n.toLowerCase(),null,!1,!1)}),B.xlinkHref=new J("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){B[n]=new J(n,1,!1,n.toLowerCase(),null,!0,!0)});function G(n,r,a,c){var h=B.hasOwnProperty(r)?B[r]:null;(h!==null?h.type!==0:c||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(K(r,a,h,c)&&(a=null),c||h===null?R(r)&&(a===null?n.removeAttribute(r):n.setAttribute(r,""+a)):h.mustUseProperty?n[h.propertyName]=a===null?h.type===3?!1:"":a:(r=h.attributeName,c=h.attributeNamespace,a===null?n.removeAttribute(r):(h=h.type,a=h===3||h===4&&a===!0?"":""+a,c?n.setAttributeNS(c,r,a):n.setAttribute(r,a))))}var Ne=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,je=Symbol.for("react.element"),Se=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),N=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),He=Symbol.for("react.suspense_list"),st=Symbol.for("react.memo"),Re=Symbol.for("react.lazy"),be=Symbol.for("react.offscreen"),Z=Symbol.iterator;function ce(n){return n===null||typeof n!="object"?null:(n=Z&&n[Z]||n["@@iterator"],typeof n=="function"?n:null)}var re=Object.assign,V;function H(n){if(V===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);V=r&&r[1]||""}return`
`+V+n}var se=!1;function le(n,r){if(!n||se)return"";se=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(j){var c=j}Reflect.construct(n,[],r)}else{try{r.call()}catch(j){c=j}n.call(r.prototype)}else{try{throw Error()}catch(j){c=j}n()}}catch(j){if(j&&c&&typeof j.stack=="string"){for(var h=j.stack.split(`
`),f=c.stack.split(`
`),E=h.length-1,S=f.length-1;1<=E&&0<=S&&h[E]!==f[S];)S--;for(;1<=E&&0<=S;E--,S--)if(h[E]!==f[S]){if(E!==1||S!==1)do if(E--,S--,0>S||h[E]!==f[S]){var A=`
`+h[E].replace(" at new "," at ");return n.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",n.displayName)),A}while(1<=E&&0<=S);break}}}finally{se=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?H(n):""}function fe(n){switch(n.tag){case 5:return H(n.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return n=le(n.type,!1),n;case 11:return n=le(n.type.render,!1),n;case 1:return n=le(n.type,!0),n;default:return""}}function Ee(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case b:return"Fragment";case Se:return"Portal";case C:return"Profiler";case I:return"StrictMode";case k:return"Suspense";case He:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case N:return(n.displayName||"Context")+".Consumer";case P:return(n._context.displayName||"Context")+".Provider";case O:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case st:return r=n.displayName||null,r!==null?r:Ee(n.type)||"Memo";case Re:r=n._payload,n=n._init;try{return Ee(n(r))}catch{}}return null}function De(n){var r=n.type;switch(n.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=r.render,n=n.displayName||n.name||"",r.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ee(r);case 8:return r===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function pe(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ue(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function gt(n){var r=Ue(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),c=""+n[r];if(!n.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return h.call(this)},set:function(E){c=""+E,f.call(this,E)}}),Object.defineProperty(n,r,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(E){c=""+E},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Bn(n){n._valueTracker||(n._valueTracker=gt(n))}function kn(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return n&&(c=Ue(n)?n.checked?"true":"false":n.value),n=c,n!==a?(r.setValue(n),!0):!1}function ir(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function or(n,r){var a=r.checked;return re({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function zi(n,r){var a=r.defaultValue==null?"":r.defaultValue,c=r.checked!=null?r.checked:r.defaultChecked;a=pe(r.value!=null?r.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function Mr(n,r){r=r.checked,r!=null&&G(n,"checked",r,!1)}function pn(n,r){Mr(n,r);var a=pe(r.value),c=r.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}r.hasOwnProperty("value")?We(n,r.type,a):r.hasOwnProperty("defaultValue")&&We(n,r.type,pe(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(n.defaultChecked=!!r.defaultChecked)}function as(n,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var c=r.type;if(!(c!=="submit"&&c!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+n._wrapperState.initialValue,a||r===n.value||(n.value=r),n.defaultValue=r}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function We(n,r,a){(r!=="number"||ir(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var ot=Array.isArray;function mn(n,r,a,c){if(n=n.options,r){r={};for(var h=0;h<a.length;h++)r["$"+a[h]]=!0;for(a=0;a<n.length;a++)h=r.hasOwnProperty("$"+n[a].value),n[a].selected!==h&&(n[a].selected=h),h&&c&&(n[a].defaultSelected=!0)}else{for(a=""+pe(a),r=null,h=0;h<n.length;h++){if(n[h].value===a){n[h].selected=!0,c&&(n[h].defaultSelected=!0);return}r!==null||n[h].disabled||(r=n[h])}r!==null&&(r.selected=!0)}}function Tt(n,r){if(r.dangerouslySetInnerHTML!=null)throw Error(t(91));return re({},r,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Cn(n,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(t(92));if(ot(a)){if(1<a.length)throw Error(t(93));a=a[0]}r=a}r==null&&(r=""),a=r}n._wrapperState={initialValue:pe(a)}}function Bi(n,r){var a=pe(r.value),c=pe(r.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),r.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function ar(n){var r=n.textContent;r===n._wrapperState.initialValue&&r!==""&&r!==null&&(n.value=r)}function lr(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ls(n,r){return n==null||n==="http://www.w3.org/1999/xhtml"?lr(r):n==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var $n,us=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,c,h){MSApp.execUnsafeLocalFunction(function(){return n(r,a,c,h)})}:n})(function(n,r){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=r;else{for($n=$n||document.createElement("div"),$n.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=$n.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;r.firstChild;)n.appendChild(r.firstChild)}});function rn(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var Hn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qn=["Webkit","ms","Moz","O"];Object.keys(Hn).forEach(function(n){qn.forEach(function(r){r=r+n.charAt(0).toUpperCase()+n.substring(1),Hn[r]=Hn[n]})});function ur(n,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||Hn.hasOwnProperty(n)&&Hn[n]?(""+r).trim():r+"px"}function cs(n,r){n=n.style;for(var a in r)if(r.hasOwnProperty(a)){var c=a.indexOf("--")===0,h=ur(a,r[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,h):n[a]=h}}var ds=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sn(n,r){if(r){if(ds[n]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(t(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(t(61))}if(r.style!=null&&typeof r.style!="object")throw Error(t(62))}}function hs(n,r){if(n.indexOf("-")===-1)return typeof r.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var An=null;function Jt(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Wn=null,Kn=null,Je=null;function fs(n){if(n=Ea(n)){if(typeof Wn!="function")throw Error(t(280));var r=n.stateNode;r&&(r=jl(r),Wn(n.stateNode,n.type,r))}}function we(n){Kn?Je?Je.push(n):Je=[n]:Kn=n}function Qe(){if(Kn){var n=Kn,r=Je;if(Je=Kn=null,fs(n),r)for(n=0;n<r.length;n++)fs(r[n])}}function ht(n,r){return n(r)}function Rt(){}var Zt=!1;function ct(n,r,a){if(Zt)return n(r,a);Zt=!0;try{return ht(n,r,a)}finally{Zt=!1,(Kn!==null||Je!==null)&&(Rt(),Qe())}}function yt(n,r){var a=n.stateNode;if(a===null)return null;var c=jl(a);if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,r,typeof a));return a}var gn=!1;if(m)try{var vt={};Object.defineProperty(vt,"passive",{get:function(){gn=!0}}),window.addEventListener("test",vt,vt),window.removeEventListener("test",vt,vt)}catch{gn=!1}function Bt(n,r,a,c,h,f,E,S,A){var j=Array.prototype.slice.call(arguments,3);try{r.apply(a,j)}catch(Q){this.onError(Q)}}var Rn=!1,bt=null,Zs=!1,bn=null,yl={onError:function(n){Rn=!0,bt=n}};function vl(n,r,a,c,h,f,E,S,A){Rn=!1,bt=null,Bt.apply(yl,arguments)}function Qo(n,r,a,c,h,f,E,S,A){if(vl.apply(this,arguments),Rn){if(Rn){var j=bt;Rn=!1,bt=null}else throw Error(t(198));Zs||(Zs=!0,bn=j)}}function Gn(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function Yo(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function _l(n){if(Gn(n)!==n)throw Error(t(188))}function wl(n){var r=n.alternate;if(!r){if(r=Gn(n),r===null)throw Error(t(188));return r!==n?null:n}for(var a=n,c=r;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(c=h.return,c!==null){a=c;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return _l(h),n;if(f===c)return _l(h),r;f=f.sibling}throw Error(t(188))}if(a.return!==c.return)a=h,c=f;else{for(var E=!1,S=h.child;S;){if(S===a){E=!0,a=h,c=f;break}if(S===c){E=!0,c=h,a=f;break}S=S.sibling}if(!E){for(S=f.child;S;){if(S===a){E=!0,a=f,c=h;break}if(S===c){E=!0,c=f,a=h;break}S=S.sibling}if(!E)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:r}function El(n){return n=wl(n),n!==null?ei(n):null}function ei(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var r=ei(n);if(r!==null)return r;n=n.sibling}return null}var Xo=e.unstable_scheduleCallback,$i=e.unstable_cancelCallback,ti=e.unstable_shouldYield,Lr=e.unstable_requestPaint,Ze=e.unstable_now,Cc=e.unstable_getCurrentPriorityLevel,Hi=e.unstable_ImmediatePriority,Jo=e.unstable_UserBlockingPriority,ni=e.unstable_NormalPriority,Zo=e.unstable_LowPriority,qi=e.unstable_IdlePriority,ri=null,yn=null;function xl(n){if(yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(ri,n,void 0,(n.current.flags&128)===128)}catch{}}var vn=Math.clz32?Math.clz32:si,cr=Math.log,Nn=Math.LN2;function si(n){return n>>>=0,n===0?32:31-(cr(n)/Nn|0)|0}var dr=64,ps=4194304;function qe(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function jr(n,r){var a=n.pendingLanes;if(a===0)return 0;var c=0,h=n.suspendedLanes,f=n.pingedLanes,E=a&268435455;if(E!==0){var S=E&~h;S!==0?c=qe(S):(f&=E,f!==0&&(c=qe(f)))}else E=a&~h,E!==0?c=qe(E):f!==0&&(c=qe(f));if(c===0)return 0;if(r!==0&&r!==c&&(r&h)===0&&(h=c&-c,f=r&-r,h>=f||h===16&&(f&4194240)!==0))return r;if((c&4)!==0&&(c|=a&16),r=n.entangledLanes,r!==0)for(n=n.entanglements,r&=c;0<r;)a=31-vn(r),h=1<<a,c|=n[a],r&=~h;return c}function ii(n,r){switch(n){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oi(n,r){for(var a=n.suspendedLanes,c=n.pingedLanes,h=n.expirationTimes,f=n.pendingLanes;0<f;){var E=31-vn(f),S=1<<E,A=h[E];A===-1?((S&a)===0||(S&c)!==0)&&(h[E]=ii(S,r)):A<=r&&(n.expiredLanes|=S),f&=~S}}function ea(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function ta(){var n=dr;return dr<<=1,(dr&4194240)===0&&(dr=64),n}function na(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function ai(n,r,a){n.pendingLanes|=r,r!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,r=31-vn(r),n[r]=a}function Ac(n,r){var a=n.pendingLanes&~r;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=r,n.mutableReadLanes&=r,n.entangledLanes&=r,r=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var h=31-vn(a),f=1<<h;r[h]=0,c[h]=-1,n[h]=-1,a&=~f}}function ra(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var c=31-vn(a),h=1<<c;h&r|n[c]&r&&(n[c]|=r),a&=~h}}var Le=0;function hr(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var sa,Wi,ia,oa,aa,fr=!1,Ki=[],pr=null,mr=null,Ot=null,li=new Map,Ur=new Map,_n=[],Tl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ms(n,r){switch(n){case"focusin":case"focusout":pr=null;break;case"dragenter":case"dragleave":mr=null;break;case"mouseover":case"mouseout":Ot=null;break;case"pointerover":case"pointerout":li.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ur.delete(r.pointerId)}}function Qn(n,r,a,c,h,f){return n===null||n.nativeEvent!==f?(n={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:f,targetContainers:[h]},r!==null&&(r=Ea(r),r!==null&&Wi(r)),n):(n.eventSystemFlags|=c,r=n.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),n)}function Il(n,r,a,c,h){switch(r){case"focusin":return pr=Qn(pr,n,r,a,c,h),!0;case"dragenter":return mr=Qn(mr,n,r,a,c,h),!0;case"mouseover":return Ot=Qn(Ot,n,r,a,c,h),!0;case"pointerover":var f=h.pointerId;return li.set(f,Qn(li.get(f)||null,n,r,a,c,h)),!0;case"gotpointercapture":return f=h.pointerId,Ur.set(f,Qn(Ur.get(f)||null,n,r,a,c,h)),!0}return!1}function Gi(n){var r=hi(n.target);if(r!==null){var a=Gn(r);if(a!==null){if(r=a.tag,r===13){if(r=Yo(a),r!==null){n.blockedOn=r,aa(n.priority,function(){ia(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ye(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=Qi(n.domEventName,n.eventSystemFlags,r[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);An=c,a.target.dispatchEvent(c),An=null}else return r=Ea(a),r!==null&&Wi(r),n.blockedOn=a,!1;r.shift()}return!0}function Sl(n,r,a){Ye(n)&&a.delete(r)}function Rc(){fr=!1,pr!==null&&Ye(pr)&&(pr=null),mr!==null&&Ye(mr)&&(mr=null),Ot!==null&&Ye(Ot)&&(Ot=null),li.forEach(Sl),Ur.forEach(Sl)}function gs(n,r){n.blockedOn===r&&(n.blockedOn=null,fr||(fr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Rc)))}function ys(n){function r(h){return gs(h,n)}if(0<Ki.length){gs(Ki[0],n);for(var a=1;a<Ki.length;a++){var c=Ki[a];c.blockedOn===n&&(c.blockedOn=null)}}for(pr!==null&&gs(pr,n),mr!==null&&gs(mr,n),Ot!==null&&gs(Ot,n),li.forEach(r),Ur.forEach(r),a=0;a<_n.length;a++)c=_n[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<_n.length&&(a=_n[0],a.blockedOn===null);)Gi(a),a.blockedOn===null&&_n.shift()}var zr=Ne.ReactCurrentBatchConfig,Br=!0;function gr(n,r,a,c){var h=Le,f=zr.transition;zr.transition=null;try{Le=1,la(n,r,a,c)}finally{Le=h,zr.transition=f}}function kl(n,r,a,c){var h=Le,f=zr.transition;zr.transition=null;try{Le=4,la(n,r,a,c)}finally{Le=h,zr.transition=f}}function la(n,r,a,c){if(Br){var h=Qi(n,r,a,c);if(h===null)Uc(n,r,c,yr,a),ms(n,c);else if(Il(h,n,r,a,c))c.stopPropagation();else if(ms(n,c),r&4&&-1<Tl.indexOf(n)){for(;h!==null;){var f=Ea(h);if(f!==null&&sa(f),f=Qi(n,r,a,c),f===null&&Uc(n,r,c,yr,a),f===h)break;h=f}h!==null&&c.stopPropagation()}else Uc(n,r,c,null,a)}}var yr=null;function Qi(n,r,a,c){if(yr=null,n=Jt(c),n=hi(n),n!==null)if(r=Gn(n),r===null)n=null;else if(a=r.tag,a===13){if(n=Yo(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null);return yr=n,null}function Yi(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Cc()){case Hi:return 1;case Jo:return 4;case ni:case Zo:return 16;case qi:return 536870912;default:return 16}default:return 16}}var wn=null,Xi=null,$r=null;function Cl(){if($r)return $r;var n,r=Xi,a=r.length,c,h="value"in wn?wn.value:wn.textContent,f=h.length;for(n=0;n<a&&r[n]===h[n];n++);var E=a-n;for(c=1;c<=E&&r[a-c]===h[f-c];c++);return $r=h.slice(n,1<c?1-c:void 0)}function ui(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function vr(){return!0}function ua(){return!1}function $t(n){function r(a,c,h,f,E){this._reactName=a,this._targetInst=h,this.type=c,this.nativeEvent=f,this.target=E,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(a=n[S],this[S]=a?a(f):f[S]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?vr:ua,this.isPropagationStopped=ua,this}return re(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=vr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=vr)},persist:function(){},isPersistent:vr}),r}var _r={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ci=$t(_r),vs=re({},_r,{view:0,detail:0}),Ji=$t(vs),Zi,eo,En,di=re({},vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ce,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==En&&(En&&n.type==="mousemove"?(Zi=n.screenX-En.screenX,eo=n.screenY-En.screenY):eo=Zi=0,En=n),Zi)},movementY:function(n){return"movementY"in n?n.movementY:eo}}),ca=$t(di),Al=re({},di,{dataTransfer:0}),Rl=$t(Al),to=re({},vs,{relatedTarget:0}),Ft=$t(to),bl=re({},_r,{animationName:0,elapsedTime:0,pseudoElement:0}),Nl=$t(bl),_s=re({},_r,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),l=$t(_s),p=re({},_r,{data:0}),v=$t(p),T={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},M={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},U={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ee(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=U[n])?!!r[n]:!1}function Ce(){return ee}var ft=re({},vs,{key:function(n){if(n.key){var r=T[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=ui(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?M[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ce,charCode:function(n){return n.type==="keypress"?ui(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ui(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ge=$t(ft),_t=re({},di,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xn=$t(_t),Hr=re({},vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ce}),wr=$t(Hr),Er=re({},_r,{propertyName:0,elapsedTime:0,pseudoElement:0}),no=$t(Er),da=re({},di,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),i0=$t(da),o0=[9,13,27,32],bc=m&&"CompositionEvent"in window,ha=null;m&&"documentMode"in document&&(ha=document.documentMode);var a0=m&&"TextEvent"in window&&!ha,bf=m&&(!bc||ha&&8<ha&&11>=ha),Nf=" ",Pf=!1;function Df(n,r){switch(n){case"keyup":return o0.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ro=!1;function l0(n,r){switch(n){case"compositionend":return Vf(r);case"keypress":return r.which!==32?null:(Pf=!0,Nf);case"textInput":return n=r.data,n===Nf&&Pf?null:n;default:return null}}function u0(n,r){if(ro)return n==="compositionend"||!bc&&Df(n,r)?(n=Cl(),$r=Xi=wn=null,ro=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return bf&&r.locale!=="ko"?null:r.data;default:return null}}var c0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Of(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!c0[n.type]:r==="textarea"}function Ff(n,r,a,c){we(c),r=Fl(r,"onChange"),0<r.length&&(a=new ci("onChange","change",null,a,c),n.push({event:a,listeners:r}))}var fa=null,pa=null;function d0(n){ep(n,0)}function Pl(n){var r=lo(n);if(kn(r))return n}function h0(n,r){if(n==="change")return r}var Mf=!1;if(m){var Nc;if(m){var Pc="oninput"in document;if(!Pc){var Lf=document.createElement("div");Lf.setAttribute("oninput","return;"),Pc=typeof Lf.oninput=="function"}Nc=Pc}else Nc=!1;Mf=Nc&&(!document.documentMode||9<document.documentMode)}function jf(){fa&&(fa.detachEvent("onpropertychange",Uf),pa=fa=null)}function Uf(n){if(n.propertyName==="value"&&Pl(pa)){var r=[];Ff(r,pa,n,Jt(n)),ct(d0,r)}}function f0(n,r,a){n==="focusin"?(jf(),fa=r,pa=a,fa.attachEvent("onpropertychange",Uf)):n==="focusout"&&jf()}function p0(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Pl(pa)}function m0(n,r){if(n==="click")return Pl(r)}function g0(n,r){if(n==="input"||n==="change")return Pl(r)}function y0(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Yn=typeof Object.is=="function"?Object.is:y0;function ma(n,r){if(Yn(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var h=a[c];if(!g.call(r,h)||!Yn(n[h],r[h]))return!1}return!0}function zf(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Bf(n,r){var a=zf(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=r&&c>=r)return{node:a,offset:r-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=zf(a)}}function $f(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?$f(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Hf(){for(var n=window,r=ir();r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=ir(n.document)}return r}function Dc(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}function v0(n){var r=Hf(),a=n.focusedElem,c=n.selectionRange;if(r!==a&&a&&a.ownerDocument&&$f(a.ownerDocument.documentElement,a)){if(c!==null&&Dc(a)){if(r=c.start,n=c.end,n===void 0&&(n=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(n,a.value.length);else if(n=(r=a.ownerDocument||document)&&r.defaultView||window,n.getSelection){n=n.getSelection();var h=a.textContent.length,f=Math.min(c.start,h);c=c.end===void 0?f:Math.min(c.end,h),!n.extend&&f>c&&(h=c,c=f,f=h),h=Bf(a,f);var E=Bf(a,c);h&&E&&(n.rangeCount!==1||n.anchorNode!==h.node||n.anchorOffset!==h.offset||n.focusNode!==E.node||n.focusOffset!==E.offset)&&(r=r.createRange(),r.setStart(h.node,h.offset),n.removeAllRanges(),f>c?(n.addRange(r),n.extend(E.node,E.offset)):(r.setEnd(E.node,E.offset),n.addRange(r)))}}for(r=[],n=a;n=n.parentNode;)n.nodeType===1&&r.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)n=r[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var _0=m&&"documentMode"in document&&11>=document.documentMode,so=null,Vc=null,ga=null,Oc=!1;function qf(n,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Oc||so==null||so!==ir(c)||(c=so,"selectionStart"in c&&Dc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ga&&ma(ga,c)||(ga=c,c=Fl(Vc,"onSelect"),0<c.length&&(r=new ci("onSelect","select",null,r,a),n.push({event:r,listeners:c}),r.target=so)))}function Dl(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var io={animationend:Dl("Animation","AnimationEnd"),animationiteration:Dl("Animation","AnimationIteration"),animationstart:Dl("Animation","AnimationStart"),transitionend:Dl("Transition","TransitionEnd")},Fc={},Wf={};m&&(Wf=document.createElement("div").style,"AnimationEvent"in window||(delete io.animationend.animation,delete io.animationiteration.animation,delete io.animationstart.animation),"TransitionEvent"in window||delete io.transitionend.transition);function Vl(n){if(Fc[n])return Fc[n];if(!io[n])return n;var r=io[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in Wf)return Fc[n]=r[a];return n}var Kf=Vl("animationend"),Gf=Vl("animationiteration"),Qf=Vl("animationstart"),Yf=Vl("transitionend"),Xf=new Map,Jf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ws(n,r){Xf.set(n,r),u(r,[n])}for(var Mc=0;Mc<Jf.length;Mc++){var Lc=Jf[Mc],w0=Lc.toLowerCase(),E0=Lc[0].toUpperCase()+Lc.slice(1);ws(w0,"on"+E0)}ws(Kf,"onAnimationEnd"),ws(Gf,"onAnimationIteration"),ws(Qf,"onAnimationStart"),ws("dblclick","onDoubleClick"),ws("focusin","onFocus"),ws("focusout","onBlur"),ws(Yf,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ya="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),x0=new Set("cancel close invalid load scroll toggle".split(" ").concat(ya));function Zf(n,r,a){var c=n.type||"unknown-event";n.currentTarget=a,Qo(c,r,void 0,n),n.currentTarget=null}function ep(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],h=c.event;c=c.listeners;e:{var f=void 0;if(r)for(var E=c.length-1;0<=E;E--){var S=c[E],A=S.instance,j=S.currentTarget;if(S=S.listener,A!==f&&h.isPropagationStopped())break e;Zf(h,S,j),f=A}else for(E=0;E<c.length;E++){if(S=c[E],A=S.instance,j=S.currentTarget,S=S.listener,A!==f&&h.isPropagationStopped())break e;Zf(h,S,j),f=A}}}if(Zs)throw n=bn,Zs=!1,bn=null,n}function et(n,r){var a=r[Wc];a===void 0&&(a=r[Wc]=new Set);var c=n+"__bubble";a.has(c)||(tp(r,n,2,!1),a.add(c))}function jc(n,r,a){var c=0;r&&(c|=4),tp(a,n,c,r)}var Ol="_reactListening"+Math.random().toString(36).slice(2);function va(n){if(!n[Ol]){n[Ol]=!0,i.forEach(function(a){a!=="selectionchange"&&(x0.has(a)||jc(a,!1,n),jc(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Ol]||(r[Ol]=!0,jc("selectionchange",!1,r))}}function tp(n,r,a,c){switch(Yi(r)){case 1:var h=gr;break;case 4:h=kl;break;default:h=la}a=h.bind(null,r,a,n),h=void 0,!gn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),c?h!==void 0?n.addEventListener(r,a,{capture:!0,passive:h}):n.addEventListener(r,a,!0):h!==void 0?n.addEventListener(r,a,{passive:h}):n.addEventListener(r,a,!1)}function Uc(n,r,a,c,h){var f=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var E=c.tag;if(E===3||E===4){var S=c.stateNode.containerInfo;if(S===h||S.nodeType===8&&S.parentNode===h)break;if(E===4)for(E=c.return;E!==null;){var A=E.tag;if((A===3||A===4)&&(A=E.stateNode.containerInfo,A===h||A.nodeType===8&&A.parentNode===h))return;E=E.return}for(;S!==null;){if(E=hi(S),E===null)return;if(A=E.tag,A===5||A===6){c=f=E;continue e}S=S.parentNode}}c=c.return}ct(function(){var j=f,Q=Jt(a),Y=[];e:{var q=Xf.get(n);if(q!==void 0){var ie=ci,ue=n;switch(n){case"keypress":if(ui(a)===0)break e;case"keydown":case"keyup":ie=Ge;break;case"focusin":ue="focus",ie=Ft;break;case"focusout":ue="blur",ie=Ft;break;case"beforeblur":case"afterblur":ie=Ft;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=ca;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=Rl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=wr;break;case Kf:case Gf:case Qf:ie=Nl;break;case Yf:ie=no;break;case"scroll":ie=Ji;break;case"wheel":ie=i0;break;case"copy":case"cut":case"paste":ie=l;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=xn}var de=(r&4)!==0,pt=!de&&n==="scroll",F=de?q!==null?q+"Capture":null:q;de=[];for(var D=j,L;D!==null;){L=D;var X=L.stateNode;if(L.tag===5&&X!==null&&(L=X,F!==null&&(X=yt(D,F),X!=null&&de.push(_a(D,X,L)))),pt)break;D=D.return}0<de.length&&(q=new ie(q,ue,null,a,Q),Y.push({event:q,listeners:de}))}}if((r&7)===0){e:{if(q=n==="mouseover"||n==="pointerover",ie=n==="mouseout"||n==="pointerout",q&&a!==An&&(ue=a.relatedTarget||a.fromElement)&&(hi(ue)||ue[qr]))break e;if((ie||q)&&(q=Q.window===Q?Q:(q=Q.ownerDocument)?q.defaultView||q.parentWindow:window,ie?(ue=a.relatedTarget||a.toElement,ie=j,ue=ue?hi(ue):null,ue!==null&&(pt=Gn(ue),ue!==pt||ue.tag!==5&&ue.tag!==6)&&(ue=null)):(ie=null,ue=j),ie!==ue)){if(de=ca,X="onMouseLeave",F="onMouseEnter",D="mouse",(n==="pointerout"||n==="pointerover")&&(de=xn,X="onPointerLeave",F="onPointerEnter",D="pointer"),pt=ie==null?q:lo(ie),L=ue==null?q:lo(ue),q=new de(X,D+"leave",ie,a,Q),q.target=pt,q.relatedTarget=L,X=null,hi(Q)===j&&(de=new de(F,D+"enter",ue,a,Q),de.target=L,de.relatedTarget=pt,X=de),pt=X,ie&&ue)t:{for(de=ie,F=ue,D=0,L=de;L;L=oo(L))D++;for(L=0,X=F;X;X=oo(X))L++;for(;0<D-L;)de=oo(de),D--;for(;0<L-D;)F=oo(F),L--;for(;D--;){if(de===F||F!==null&&de===F.alternate)break t;de=oo(de),F=oo(F)}de=null}else de=null;ie!==null&&np(Y,q,ie,de,!1),ue!==null&&pt!==null&&np(Y,pt,ue,de,!0)}}e:{if(q=j?lo(j):window,ie=q.nodeName&&q.nodeName.toLowerCase(),ie==="select"||ie==="input"&&q.type==="file")var he=h0;else if(Of(q))if(Mf)he=g0;else{he=p0;var ve=f0}else(ie=q.nodeName)&&ie.toLowerCase()==="input"&&(q.type==="checkbox"||q.type==="radio")&&(he=m0);if(he&&(he=he(n,j))){Ff(Y,he,a,Q);break e}ve&&ve(n,q,j),n==="focusout"&&(ve=q._wrapperState)&&ve.controlled&&q.type==="number"&&We(q,"number",q.value)}switch(ve=j?lo(j):window,n){case"focusin":(Of(ve)||ve.contentEditable==="true")&&(so=ve,Vc=j,ga=null);break;case"focusout":ga=Vc=so=null;break;case"mousedown":Oc=!0;break;case"contextmenu":case"mouseup":case"dragend":Oc=!1,qf(Y,a,Q);break;case"selectionchange":if(_0)break;case"keydown":case"keyup":qf(Y,a,Q)}var _e;if(bc)e:{switch(n){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else ro?Df(n,a)&&(Ie="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ie="onCompositionStart");Ie&&(bf&&a.locale!=="ko"&&(ro||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&ro&&(_e=Cl()):(wn=Q,Xi="value"in wn?wn.value:wn.textContent,ro=!0)),ve=Fl(j,Ie),0<ve.length&&(Ie=new v(Ie,n,null,a,Q),Y.push({event:Ie,listeners:ve}),_e?Ie.data=_e:(_e=Vf(a),_e!==null&&(Ie.data=_e)))),(_e=a0?l0(n,a):u0(n,a))&&(j=Fl(j,"onBeforeInput"),0<j.length&&(Q=new v("onBeforeInput","beforeinput",null,a,Q),Y.push({event:Q,listeners:j}),Q.data=_e))}ep(Y,r)})}function _a(n,r,a){return{instance:n,listener:r,currentTarget:a}}function Fl(n,r){for(var a=r+"Capture",c=[];n!==null;){var h=n,f=h.stateNode;h.tag===5&&f!==null&&(h=f,f=yt(n,a),f!=null&&c.unshift(_a(n,f,h)),f=yt(n,r),f!=null&&c.push(_a(n,f,h))),n=n.return}return c}function oo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function np(n,r,a,c,h){for(var f=r._reactName,E=[];a!==null&&a!==c;){var S=a,A=S.alternate,j=S.stateNode;if(A!==null&&A===c)break;S.tag===5&&j!==null&&(S=j,h?(A=yt(a,f),A!=null&&E.unshift(_a(a,A,S))):h||(A=yt(a,f),A!=null&&E.push(_a(a,A,S)))),a=a.return}E.length!==0&&n.push({event:r,listeners:E})}var T0=/\r\n?/g,I0=/\u0000|\uFFFD/g;function rp(n){return(typeof n=="string"?n:""+n).replace(T0,`
`).replace(I0,"")}function Ml(n,r,a){if(r=rp(r),rp(n)!==r&&a)throw Error(t(425))}function Ll(){}var zc=null,Bc=null;function $c(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Hc=typeof setTimeout=="function"?setTimeout:void 0,S0=typeof clearTimeout=="function"?clearTimeout:void 0,sp=typeof Promise=="function"?Promise:void 0,k0=typeof queueMicrotask=="function"?queueMicrotask:typeof sp<"u"?function(n){return sp.resolve(null).then(n).catch(C0)}:Hc;function C0(n){setTimeout(function(){throw n})}function qc(n,r){var a=r,c=0;do{var h=a.nextSibling;if(n.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"){if(c===0){n.removeChild(h),ys(r);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=h}while(a);ys(r)}function Es(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return n}function ip(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return n;r--}else a==="/$"&&r++}n=n.previousSibling}return null}var ao=Math.random().toString(36).slice(2),xr="__reactFiber$"+ao,wa="__reactProps$"+ao,qr="__reactContainer$"+ao,Wc="__reactEvents$"+ao,A0="__reactListeners$"+ao,R0="__reactHandles$"+ao;function hi(n){var r=n[xr];if(r)return r;for(var a=n.parentNode;a;){if(r=a[qr]||a[xr]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=ip(n);n!==null;){if(a=n[xr])return a;n=ip(n)}return r}n=a,a=n.parentNode}return null}function Ea(n){return n=n[xr]||n[qr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function lo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function jl(n){return n[wa]||null}var Kc=[],uo=-1;function xs(n){return{current:n}}function tt(n){0>uo||(n.current=Kc[uo],Kc[uo]=null,uo--)}function Xe(n,r){uo++,Kc[uo]=n.current,n.current=r}var Ts={},Ht=xs(Ts),on=xs(!1),fi=Ts;function co(n,r){var a=n.type.contextTypes;if(!a)return Ts;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===r)return c.__reactInternalMemoizedMaskedChildContext;var h={},f;for(f in a)h[f]=r[f];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=h),h}function an(n){return n=n.childContextTypes,n!=null}function Ul(){tt(on),tt(Ht)}function op(n,r,a){if(Ht.current!==Ts)throw Error(t(168));Xe(Ht,r),Xe(on,a)}function ap(n,r,a){var c=n.stateNode;if(r=r.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var h in c)if(!(h in r))throw Error(t(108,De(n)||"Unknown",h));return re({},a,c)}function zl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ts,fi=Ht.current,Xe(Ht,n),Xe(on,on.current),!0}function lp(n,r,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=ap(n,r,fi),c.__reactInternalMemoizedMergedChildContext=n,tt(on),tt(Ht),Xe(Ht,n)):tt(on),Xe(on,a)}var Wr=null,Bl=!1,Gc=!1;function up(n){Wr===null?Wr=[n]:Wr.push(n)}function b0(n){Bl=!0,up(n)}function Is(){if(!Gc&&Wr!==null){Gc=!0;var n=0,r=Le;try{var a=Wr;for(Le=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Wr=null,Bl=!1}catch(h){throw Wr!==null&&(Wr=Wr.slice(n+1)),Xo(Hi,Is),h}finally{Le=r,Gc=!1}}return null}var ho=[],fo=0,$l=null,Hl=0,Pn=[],Dn=0,pi=null,Kr=1,Gr="";function mi(n,r){ho[fo++]=Hl,ho[fo++]=$l,$l=n,Hl=r}function cp(n,r,a){Pn[Dn++]=Kr,Pn[Dn++]=Gr,Pn[Dn++]=pi,pi=n;var c=Kr;n=Gr;var h=32-vn(c)-1;c&=~(1<<h),a+=1;var f=32-vn(r)+h;if(30<f){var E=h-h%5;f=(c&(1<<E)-1).toString(32),c>>=E,h-=E,Kr=1<<32-vn(r)+h|a<<h|c,Gr=f+n}else Kr=1<<f|a<<h|c,Gr=n}function Qc(n){n.return!==null&&(mi(n,1),cp(n,1,0))}function Yc(n){for(;n===$l;)$l=ho[--fo],ho[fo]=null,Hl=ho[--fo],ho[fo]=null;for(;n===pi;)pi=Pn[--Dn],Pn[Dn]=null,Gr=Pn[--Dn],Pn[Dn]=null,Kr=Pn[--Dn],Pn[Dn]=null}var Tn=null,In=null,it=!1,Xn=null;function dp(n,r){var a=Mn(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=n,r=n.deletions,r===null?(n.deletions=[a],n.flags|=16):r.push(a)}function hp(n,r){switch(n.tag){case 5:var a=n.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(n.stateNode=r,Tn=n,In=Es(r.firstChild),!0):!1;case 6:return r=n.pendingProps===""||r.nodeType!==3?null:r,r!==null?(n.stateNode=r,Tn=n,In=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=pi!==null?{id:Kr,overflow:Gr}:null,n.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=Mn(18,null,null,0),a.stateNode=r,a.return=n,n.child=a,Tn=n,In=null,!0):!1;default:return!1}}function Xc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Jc(n){if(it){var r=In;if(r){var a=r;if(!hp(n,r)){if(Xc(n))throw Error(t(418));r=Es(a.nextSibling);var c=Tn;r&&hp(n,r)?dp(c,a):(n.flags=n.flags&-4097|2,it=!1,Tn=n)}}else{if(Xc(n))throw Error(t(418));n.flags=n.flags&-4097|2,it=!1,Tn=n}}}function fp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Tn=n}function ql(n){if(n!==Tn)return!1;if(!it)return fp(n),it=!0,!1;var r;if((r=n.tag!==3)&&!(r=n.tag!==5)&&(r=n.type,r=r!=="head"&&r!=="body"&&!$c(n.type,n.memoizedProps)),r&&(r=In)){if(Xc(n))throw pp(),Error(t(418));for(;r;)dp(n,r),r=Es(r.nextSibling)}if(fp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(r===0){In=Es(n.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}n=n.nextSibling}In=null}}else In=Tn?Es(n.stateNode.nextSibling):null;return!0}function pp(){for(var n=In;n;)n=Es(n.nextSibling)}function po(){In=Tn=null,it=!1}function Zc(n){Xn===null?Xn=[n]:Xn.push(n)}var N0=Ne.ReactCurrentBatchConfig;function xa(n,r,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var h=c,f=""+n;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===f?r.ref:(r=function(E){var S=h.refs;E===null?delete S[f]:S[f]=E},r._stringRef=f,r)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Wl(n,r){throw n=Object.prototype.toString.call(r),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n))}function mp(n){var r=n._init;return r(n._payload)}function gp(n){function r(F,D){if(n){var L=F.deletions;L===null?(F.deletions=[D],F.flags|=16):L.push(D)}}function a(F,D){if(!n)return null;for(;D!==null;)r(F,D),D=D.sibling;return null}function c(F,D){for(F=new Map;D!==null;)D.key!==null?F.set(D.key,D):F.set(D.index,D),D=D.sibling;return F}function h(F,D){return F=Ps(F,D),F.index=0,F.sibling=null,F}function f(F,D,L){return F.index=L,n?(L=F.alternate,L!==null?(L=L.index,L<D?(F.flags|=2,D):L):(F.flags|=2,D)):(F.flags|=1048576,D)}function E(F){return n&&F.alternate===null&&(F.flags|=2),F}function S(F,D,L,X){return D===null||D.tag!==6?(D=Hd(L,F.mode,X),D.return=F,D):(D=h(D,L),D.return=F,D)}function A(F,D,L,X){var he=L.type;return he===b?Q(F,D,L.props.children,X,L.key):D!==null&&(D.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===Re&&mp(he)===D.type)?(X=h(D,L.props),X.ref=xa(F,D,L),X.return=F,X):(X=gu(L.type,L.key,L.props,null,F.mode,X),X.ref=xa(F,D,L),X.return=F,X)}function j(F,D,L,X){return D===null||D.tag!==4||D.stateNode.containerInfo!==L.containerInfo||D.stateNode.implementation!==L.implementation?(D=qd(L,F.mode,X),D.return=F,D):(D=h(D,L.children||[]),D.return=F,D)}function Q(F,D,L,X,he){return D===null||D.tag!==7?(D=Ti(L,F.mode,X,he),D.return=F,D):(D=h(D,L),D.return=F,D)}function Y(F,D,L){if(typeof D=="string"&&D!==""||typeof D=="number")return D=Hd(""+D,F.mode,L),D.return=F,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case je:return L=gu(D.type,D.key,D.props,null,F.mode,L),L.ref=xa(F,null,D),L.return=F,L;case Se:return D=qd(D,F.mode,L),D.return=F,D;case Re:var X=D._init;return Y(F,X(D._payload),L)}if(ot(D)||ce(D))return D=Ti(D,F.mode,L,null),D.return=F,D;Wl(F,D)}return null}function q(F,D,L,X){var he=D!==null?D.key:null;if(typeof L=="string"&&L!==""||typeof L=="number")return he!==null?null:S(F,D,""+L,X);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case je:return L.key===he?A(F,D,L,X):null;case Se:return L.key===he?j(F,D,L,X):null;case Re:return he=L._init,q(F,D,he(L._payload),X)}if(ot(L)||ce(L))return he!==null?null:Q(F,D,L,X,null);Wl(F,L)}return null}function ie(F,D,L,X,he){if(typeof X=="string"&&X!==""||typeof X=="number")return F=F.get(L)||null,S(D,F,""+X,he);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case je:return F=F.get(X.key===null?L:X.key)||null,A(D,F,X,he);case Se:return F=F.get(X.key===null?L:X.key)||null,j(D,F,X,he);case Re:var ve=X._init;return ie(F,D,L,ve(X._payload),he)}if(ot(X)||ce(X))return F=F.get(L)||null,Q(D,F,X,he,null);Wl(D,X)}return null}function ue(F,D,L,X){for(var he=null,ve=null,_e=D,Ie=D=0,Dt=null;_e!==null&&Ie<L.length;Ie++){_e.index>Ie?(Dt=_e,_e=null):Dt=_e.sibling;var $e=q(F,_e,L[Ie],X);if($e===null){_e===null&&(_e=Dt);break}n&&_e&&$e.alternate===null&&r(F,_e),D=f($e,D,Ie),ve===null?he=$e:ve.sibling=$e,ve=$e,_e=Dt}if(Ie===L.length)return a(F,_e),it&&mi(F,Ie),he;if(_e===null){for(;Ie<L.length;Ie++)_e=Y(F,L[Ie],X),_e!==null&&(D=f(_e,D,Ie),ve===null?he=_e:ve.sibling=_e,ve=_e);return it&&mi(F,Ie),he}for(_e=c(F,_e);Ie<L.length;Ie++)Dt=ie(_e,F,Ie,L[Ie],X),Dt!==null&&(n&&Dt.alternate!==null&&_e.delete(Dt.key===null?Ie:Dt.key),D=f(Dt,D,Ie),ve===null?he=Dt:ve.sibling=Dt,ve=Dt);return n&&_e.forEach(function(Ds){return r(F,Ds)}),it&&mi(F,Ie),he}function de(F,D,L,X){var he=ce(L);if(typeof he!="function")throw Error(t(150));if(L=he.call(L),L==null)throw Error(t(151));for(var ve=he=null,_e=D,Ie=D=0,Dt=null,$e=L.next();_e!==null&&!$e.done;Ie++,$e=L.next()){_e.index>Ie?(Dt=_e,_e=null):Dt=_e.sibling;var Ds=q(F,_e,$e.value,X);if(Ds===null){_e===null&&(_e=Dt);break}n&&_e&&Ds.alternate===null&&r(F,_e),D=f(Ds,D,Ie),ve===null?he=Ds:ve.sibling=Ds,ve=Ds,_e=Dt}if($e.done)return a(F,_e),it&&mi(F,Ie),he;if(_e===null){for(;!$e.done;Ie++,$e=L.next())$e=Y(F,$e.value,X),$e!==null&&(D=f($e,D,Ie),ve===null?he=$e:ve.sibling=$e,ve=$e);return it&&mi(F,Ie),he}for(_e=c(F,_e);!$e.done;Ie++,$e=L.next())$e=ie(_e,F,Ie,$e.value,X),$e!==null&&(n&&$e.alternate!==null&&_e.delete($e.key===null?Ie:$e.key),D=f($e,D,Ie),ve===null?he=$e:ve.sibling=$e,ve=$e);return n&&_e.forEach(function(cw){return r(F,cw)}),it&&mi(F,Ie),he}function pt(F,D,L,X){if(typeof L=="object"&&L!==null&&L.type===b&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case je:e:{for(var he=L.key,ve=D;ve!==null;){if(ve.key===he){if(he=L.type,he===b){if(ve.tag===7){a(F,ve.sibling),D=h(ve,L.props.children),D.return=F,F=D;break e}}else if(ve.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===Re&&mp(he)===ve.type){a(F,ve.sibling),D=h(ve,L.props),D.ref=xa(F,ve,L),D.return=F,F=D;break e}a(F,ve);break}else r(F,ve);ve=ve.sibling}L.type===b?(D=Ti(L.props.children,F.mode,X,L.key),D.return=F,F=D):(X=gu(L.type,L.key,L.props,null,F.mode,X),X.ref=xa(F,D,L),X.return=F,F=X)}return E(F);case Se:e:{for(ve=L.key;D!==null;){if(D.key===ve)if(D.tag===4&&D.stateNode.containerInfo===L.containerInfo&&D.stateNode.implementation===L.implementation){a(F,D.sibling),D=h(D,L.children||[]),D.return=F,F=D;break e}else{a(F,D);break}else r(F,D);D=D.sibling}D=qd(L,F.mode,X),D.return=F,F=D}return E(F);case Re:return ve=L._init,pt(F,D,ve(L._payload),X)}if(ot(L))return ue(F,D,L,X);if(ce(L))return de(F,D,L,X);Wl(F,L)}return typeof L=="string"&&L!==""||typeof L=="number"?(L=""+L,D!==null&&D.tag===6?(a(F,D.sibling),D=h(D,L),D.return=F,F=D):(a(F,D),D=Hd(L,F.mode,X),D.return=F,F=D),E(F)):a(F,D)}return pt}var mo=gp(!0),yp=gp(!1),Kl=xs(null),Gl=null,go=null,ed=null;function td(){ed=go=Gl=null}function nd(n){var r=Kl.current;tt(Kl),n._currentValue=r}function rd(n,r,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),n===a)break;n=n.return}}function yo(n,r){Gl=n,ed=go=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&r)!==0&&(ln=!0),n.firstContext=null)}function Vn(n){var r=n._currentValue;if(ed!==n)if(n={context:n,memoizedValue:r,next:null},go===null){if(Gl===null)throw Error(t(308));go=n,Gl.dependencies={lanes:0,firstContext:n}}else go=go.next=n;return r}var gi=null;function sd(n){gi===null?gi=[n]:gi.push(n)}function vp(n,r,a,c){var h=r.interleaved;return h===null?(a.next=a,sd(r)):(a.next=h.next,h.next=a),r.interleaved=a,Qr(n,c)}function Qr(n,r){n.lanes|=r;var a=n.alternate;for(a!==null&&(a.lanes|=r),a=n,n=n.return;n!==null;)n.childLanes|=r,a=n.alternate,a!==null&&(a.childLanes|=r),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Ss=!1;function id(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _p(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Yr(n,r){return{eventTime:n,lane:r,tag:0,payload:null,callback:null,next:null}}function ks(n,r,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Be&2)!==0){var h=c.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),c.pending=r,Qr(n,a)}return h=c.interleaved,h===null?(r.next=r,sd(c)):(r.next=h.next,h.next=r),c.interleaved=r,Qr(n,a)}function Ql(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,ra(n,a)}}function wp(n,r){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var E={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};f===null?h=f=E:f=f.next=E,a=a.next}while(a!==null);f===null?h=f=r:f=f.next=r}else h=f=r;a={baseState:c.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}function Yl(n,r,a,c){var h=n.updateQueue;Ss=!1;var f=h.firstBaseUpdate,E=h.lastBaseUpdate,S=h.shared.pending;if(S!==null){h.shared.pending=null;var A=S,j=A.next;A.next=null,E===null?f=j:E.next=j,E=A;var Q=n.alternate;Q!==null&&(Q=Q.updateQueue,S=Q.lastBaseUpdate,S!==E&&(S===null?Q.firstBaseUpdate=j:S.next=j,Q.lastBaseUpdate=A))}if(f!==null){var Y=h.baseState;E=0,Q=j=A=null,S=f;do{var q=S.lane,ie=S.eventTime;if((c&q)===q){Q!==null&&(Q=Q.next={eventTime:ie,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var ue=n,de=S;switch(q=r,ie=a,de.tag){case 1:if(ue=de.payload,typeof ue=="function"){Y=ue.call(ie,Y,q);break e}Y=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=de.payload,q=typeof ue=="function"?ue.call(ie,Y,q):ue,q==null)break e;Y=re({},Y,q);break e;case 2:Ss=!0}}S.callback!==null&&S.lane!==0&&(n.flags|=64,q=h.effects,q===null?h.effects=[S]:q.push(S))}else ie={eventTime:ie,lane:q,tag:S.tag,payload:S.payload,callback:S.callback,next:null},Q===null?(j=Q=ie,A=Y):Q=Q.next=ie,E|=q;if(S=S.next,S===null){if(S=h.shared.pending,S===null)break;q=S,S=q.next,q.next=null,h.lastBaseUpdate=q,h.shared.pending=null}}while(!0);if(Q===null&&(A=Y),h.baseState=A,h.firstBaseUpdate=j,h.lastBaseUpdate=Q,r=h.shared.interleaved,r!==null){h=r;do E|=h.lane,h=h.next;while(h!==r)}else f===null&&(h.shared.lanes=0);_i|=E,n.lanes=E,n.memoizedState=Y}}function Ep(n,r,a){if(n=r.effects,r.effects=null,n!==null)for(r=0;r<n.length;r++){var c=n[r],h=c.callback;if(h!==null){if(c.callback=null,c=a,typeof h!="function")throw Error(t(191,h));h.call(c)}}}var Ta={},Tr=xs(Ta),Ia=xs(Ta),Sa=xs(Ta);function yi(n){if(n===Ta)throw Error(t(174));return n}function od(n,r){switch(Xe(Sa,r),Xe(Ia,n),Xe(Tr,Ta),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:ls(null,"");break;default:n=n===8?r.parentNode:r,r=n.namespaceURI||null,n=n.tagName,r=ls(r,n)}tt(Tr),Xe(Tr,r)}function vo(){tt(Tr),tt(Ia),tt(Sa)}function xp(n){yi(Sa.current);var r=yi(Tr.current),a=ls(r,n.type);r!==a&&(Xe(Ia,n),Xe(Tr,a))}function ad(n){Ia.current===n&&(tt(Tr),tt(Ia))}var at=xs(0);function Xl(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ld=[];function ud(){for(var n=0;n<ld.length;n++)ld[n]._workInProgressVersionPrimary=null;ld.length=0}var Jl=Ne.ReactCurrentDispatcher,cd=Ne.ReactCurrentBatchConfig,vi=0,lt=null,It=null,Nt=null,Zl=!1,ka=!1,Ca=0,P0=0;function qt(){throw Error(t(321))}function dd(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!Yn(n[a],r[a]))return!1;return!0}function hd(n,r,a,c,h,f){if(vi=f,lt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Jl.current=n===null||n.memoizedState===null?F0:M0,n=a(c,h),ka){f=0;do{if(ka=!1,Ca=0,25<=f)throw Error(t(301));f+=1,Nt=It=null,r.updateQueue=null,Jl.current=L0,n=a(c,h)}while(ka)}if(Jl.current=nu,r=It!==null&&It.next!==null,vi=0,Nt=It=lt=null,Zl=!1,r)throw Error(t(300));return n}function fd(){var n=Ca!==0;return Ca=0,n}function Ir(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?lt.memoizedState=Nt=n:Nt=Nt.next=n,Nt}function On(){if(It===null){var n=lt.alternate;n=n!==null?n.memoizedState:null}else n=It.next;var r=Nt===null?lt.memoizedState:Nt.next;if(r!==null)Nt=r,It=n;else{if(n===null)throw Error(t(310));It=n,n={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},Nt===null?lt.memoizedState=Nt=n:Nt=Nt.next=n}return Nt}function Aa(n,r){return typeof r=="function"?r(n):r}function pd(n){var r=On(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=It,h=c.baseQueue,f=a.pending;if(f!==null){if(h!==null){var E=h.next;h.next=f.next,f.next=E}c.baseQueue=h=f,a.pending=null}if(h!==null){f=h.next,c=c.baseState;var S=E=null,A=null,j=f;do{var Q=j.lane;if((vi&Q)===Q)A!==null&&(A=A.next={lane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),c=j.hasEagerState?j.eagerState:n(c,j.action);else{var Y={lane:Q,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null};A===null?(S=A=Y,E=c):A=A.next=Y,lt.lanes|=Q,_i|=Q}j=j.next}while(j!==null&&j!==f);A===null?E=c:A.next=S,Yn(c,r.memoizedState)||(ln=!0),r.memoizedState=c,r.baseState=E,r.baseQueue=A,a.lastRenderedState=c}if(n=a.interleaved,n!==null){h=n;do f=h.lane,lt.lanes|=f,_i|=f,h=h.next;while(h!==n)}else h===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function md(n){var r=On(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,h=a.pending,f=r.memoizedState;if(h!==null){a.pending=null;var E=h=h.next;do f=n(f,E.action),E=E.next;while(E!==h);Yn(f,r.memoizedState)||(ln=!0),r.memoizedState=f,r.baseQueue===null&&(r.baseState=f),a.lastRenderedState=f}return[f,c]}function Tp(){}function Ip(n,r){var a=lt,c=On(),h=r(),f=!Yn(c.memoizedState,h);if(f&&(c.memoizedState=h,ln=!0),c=c.queue,gd(Cp.bind(null,a,c,n),[n]),c.getSnapshot!==r||f||Nt!==null&&Nt.memoizedState.tag&1){if(a.flags|=2048,Ra(9,kp.bind(null,a,c,h,r),void 0,null),Pt===null)throw Error(t(349));(vi&30)!==0||Sp(a,r,h)}return h}function Sp(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=lt.updateQueue,r===null?(r={lastEffect:null,stores:null},lt.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function kp(n,r,a,c){r.value=a,r.getSnapshot=c,Ap(r)&&Rp(n)}function Cp(n,r,a){return a(function(){Ap(r)&&Rp(n)})}function Ap(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!Yn(n,a)}catch{return!0}}function Rp(n){var r=Qr(n,1);r!==null&&tr(r,n,1,-1)}function bp(n){var r=Ir();return typeof n=="function"&&(n=n()),r.memoizedState=r.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:n},r.queue=n,n=n.dispatch=O0.bind(null,lt,n),[r.memoizedState,n]}function Ra(n,r,a,c){return n={tag:n,create:r,destroy:a,deps:c,next:null},r=lt.updateQueue,r===null?(r={lastEffect:null,stores:null},lt.updateQueue=r,r.lastEffect=n.next=n):(a=r.lastEffect,a===null?r.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,r.lastEffect=n)),n}function Np(){return On().memoizedState}function eu(n,r,a,c){var h=Ir();lt.flags|=n,h.memoizedState=Ra(1|r,a,void 0,c===void 0?null:c)}function tu(n,r,a,c){var h=On();c=c===void 0?null:c;var f=void 0;if(It!==null){var E=It.memoizedState;if(f=E.destroy,c!==null&&dd(c,E.deps)){h.memoizedState=Ra(r,a,f,c);return}}lt.flags|=n,h.memoizedState=Ra(1|r,a,f,c)}function Pp(n,r){return eu(8390656,8,n,r)}function gd(n,r){return tu(2048,8,n,r)}function Dp(n,r){return tu(4,2,n,r)}function Vp(n,r){return tu(4,4,n,r)}function Op(n,r){if(typeof r=="function")return n=n(),r(n),function(){r(null)};if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function Fp(n,r,a){return a=a!=null?a.concat([n]):null,tu(4,4,Op.bind(null,r,n),a)}function yd(){}function Mp(n,r){var a=On();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&dd(r,c[1])?c[0]:(a.memoizedState=[n,r],n)}function Lp(n,r){var a=On();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&dd(r,c[1])?c[0]:(n=n(),a.memoizedState=[n,r],n)}function jp(n,r,a){return(vi&21)===0?(n.baseState&&(n.baseState=!1,ln=!0),n.memoizedState=a):(Yn(a,r)||(a=ta(),lt.lanes|=a,_i|=a,n.baseState=!0),r)}function D0(n,r){var a=Le;Le=a!==0&&4>a?a:4,n(!0);var c=cd.transition;cd.transition={};try{n(!1),r()}finally{Le=a,cd.transition=c}}function Up(){return On().memoizedState}function V0(n,r,a){var c=bs(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},zp(n))Bp(r,a);else if(a=vp(n,r,a,c),a!==null){var h=tn();tr(a,n,c,h),$p(a,r,c)}}function O0(n,r,a){var c=bs(n),h={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(zp(n))Bp(r,h);else{var f=n.alternate;if(n.lanes===0&&(f===null||f.lanes===0)&&(f=r.lastRenderedReducer,f!==null))try{var E=r.lastRenderedState,S=f(E,a);if(h.hasEagerState=!0,h.eagerState=S,Yn(S,E)){var A=r.interleaved;A===null?(h.next=h,sd(r)):(h.next=A.next,A.next=h),r.interleaved=h;return}}catch{}finally{}a=vp(n,r,h,c),a!==null&&(h=tn(),tr(a,n,c,h),$p(a,r,c))}}function zp(n){var r=n.alternate;return n===lt||r!==null&&r===lt}function Bp(n,r){ka=Zl=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function $p(n,r,a){if((a&4194240)!==0){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,ra(n,a)}}var nu={readContext:Vn,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useInsertionEffect:qt,useLayoutEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useMutableSource:qt,useSyncExternalStore:qt,useId:qt,unstable_isNewReconciler:!1},F0={readContext:Vn,useCallback:function(n,r){return Ir().memoizedState=[n,r===void 0?null:r],n},useContext:Vn,useEffect:Pp,useImperativeHandle:function(n,r,a){return a=a!=null?a.concat([n]):null,eu(4194308,4,Op.bind(null,r,n),a)},useLayoutEffect:function(n,r){return eu(4194308,4,n,r)},useInsertionEffect:function(n,r){return eu(4,2,n,r)},useMemo:function(n,r){var a=Ir();return r=r===void 0?null:r,n=n(),a.memoizedState=[n,r],n},useReducer:function(n,r,a){var c=Ir();return r=a!==void 0?a(r):r,c.memoizedState=c.baseState=r,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:r},c.queue=n,n=n.dispatch=V0.bind(null,lt,n),[c.memoizedState,n]},useRef:function(n){var r=Ir();return n={current:n},r.memoizedState=n},useState:bp,useDebugValue:yd,useDeferredValue:function(n){return Ir().memoizedState=n},useTransition:function(){var n=bp(!1),r=n[0];return n=D0.bind(null,n[1]),Ir().memoizedState=n,[r,n]},useMutableSource:function(){},useSyncExternalStore:function(n,r,a){var c=lt,h=Ir();if(it){if(a===void 0)throw Error(t(407));a=a()}else{if(a=r(),Pt===null)throw Error(t(349));(vi&30)!==0||Sp(c,r,a)}h.memoizedState=a;var f={value:a,getSnapshot:r};return h.queue=f,Pp(Cp.bind(null,c,f,n),[n]),c.flags|=2048,Ra(9,kp.bind(null,c,f,a,r),void 0,null),a},useId:function(){var n=Ir(),r=Pt.identifierPrefix;if(it){var a=Gr,c=Kr;a=(c&~(1<<32-vn(c)-1)).toString(32)+a,r=":"+r+"R"+a,a=Ca++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=P0++,r=":"+r+"r"+a.toString(32)+":";return n.memoizedState=r},unstable_isNewReconciler:!1},M0={readContext:Vn,useCallback:Mp,useContext:Vn,useEffect:gd,useImperativeHandle:Fp,useInsertionEffect:Dp,useLayoutEffect:Vp,useMemo:Lp,useReducer:pd,useRef:Np,useState:function(){return pd(Aa)},useDebugValue:yd,useDeferredValue:function(n){var r=On();return jp(r,It.memoizedState,n)},useTransition:function(){var n=pd(Aa)[0],r=On().memoizedState;return[n,r]},useMutableSource:Tp,useSyncExternalStore:Ip,useId:Up,unstable_isNewReconciler:!1},L0={readContext:Vn,useCallback:Mp,useContext:Vn,useEffect:gd,useImperativeHandle:Fp,useInsertionEffect:Dp,useLayoutEffect:Vp,useMemo:Lp,useReducer:md,useRef:Np,useState:function(){return md(Aa)},useDebugValue:yd,useDeferredValue:function(n){var r=On();return It===null?r.memoizedState=n:jp(r,It.memoizedState,n)},useTransition:function(){var n=md(Aa)[0],r=On().memoizedState;return[n,r]},useMutableSource:Tp,useSyncExternalStore:Ip,useId:Up,unstable_isNewReconciler:!1};function Jn(n,r){if(n&&n.defaultProps){r=re({},r),n=n.defaultProps;for(var a in n)r[a]===void 0&&(r[a]=n[a]);return r}return r}function vd(n,r,a,c){r=n.memoizedState,a=a(c,r),a=a==null?r:re({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var ru={isMounted:function(n){return(n=n._reactInternals)?Gn(n)===n:!1},enqueueSetState:function(n,r,a){n=n._reactInternals;var c=tn(),h=bs(n),f=Yr(c,h);f.payload=r,a!=null&&(f.callback=a),r=ks(n,f,h),r!==null&&(tr(r,n,h,c),Ql(r,n,h))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var c=tn(),h=bs(n),f=Yr(c,h);f.tag=1,f.payload=r,a!=null&&(f.callback=a),r=ks(n,f,h),r!==null&&(tr(r,n,h,c),Ql(r,n,h))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=tn(),c=bs(n),h=Yr(a,c);h.tag=2,r!=null&&(h.callback=r),r=ks(n,h,c),r!==null&&(tr(r,n,c,a),Ql(r,n,c))}};function Hp(n,r,a,c,h,f,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,f,E):r.prototype&&r.prototype.isPureReactComponent?!ma(a,c)||!ma(h,f):!0}function qp(n,r,a){var c=!1,h=Ts,f=r.contextType;return typeof f=="object"&&f!==null?f=Vn(f):(h=an(r)?fi:Ht.current,c=r.contextTypes,f=(c=c!=null)?co(n,h):Ts),r=new r(a,f),n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=ru,n.stateNode=r,r._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=h,n.__reactInternalMemoizedMaskedChildContext=f),r}function Wp(n,r,a,c){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==n&&ru.enqueueReplaceState(r,r.state,null)}function _d(n,r,a,c){var h=n.stateNode;h.props=a,h.state=n.memoizedState,h.refs={},id(n);var f=r.contextType;typeof f=="object"&&f!==null?h.context=Vn(f):(f=an(r)?fi:Ht.current,h.context=co(n,f)),h.state=n.memoizedState,f=r.getDerivedStateFromProps,typeof f=="function"&&(vd(n,r,f,a),h.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(r=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),r!==h.state&&ru.enqueueReplaceState(h,h.state,null),Yl(n,a,h,c),h.state=n.memoizedState),typeof h.componentDidMount=="function"&&(n.flags|=4194308)}function _o(n,r){try{var a="",c=r;do a+=fe(c),c=c.return;while(c);var h=a}catch(f){h=`
Error generating stack: `+f.message+`
`+f.stack}return{value:n,source:r,stack:h,digest:null}}function wd(n,r,a){return{value:n,source:null,stack:a??null,digest:r??null}}function Ed(n,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var j0=typeof WeakMap=="function"?WeakMap:Map;function Kp(n,r,a){a=Yr(-1,a),a.tag=3,a.payload={element:null};var c=r.value;return a.callback=function(){cu||(cu=!0,Fd=c),Ed(n,r)},a}function Gp(n,r,a){a=Yr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var h=r.value;a.payload=function(){return c(h)},a.callback=function(){Ed(n,r)}}var f=n.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(a.callback=function(){Ed(n,r),typeof c!="function"&&(As===null?As=new Set([this]):As.add(this));var E=r.stack;this.componentDidCatch(r.value,{componentStack:E!==null?E:""})}),a}function Qp(n,r,a){var c=n.pingCache;if(c===null){c=n.pingCache=new j0;var h=new Set;c.set(r,h)}else h=c.get(r),h===void 0&&(h=new Set,c.set(r,h));h.has(a)||(h.add(a),n=Z0.bind(null,n,r,a),r.then(n,n))}function Yp(n){do{var r;if((r=n.tag===13)&&(r=n.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return n;n=n.return}while(n!==null);return null}function Xp(n,r,a,c,h){return(n.mode&1)===0?(n===r?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=Yr(-1,1),r.tag=2,ks(a,r,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=h,n)}var U0=Ne.ReactCurrentOwner,ln=!1;function en(n,r,a,c){r.child=n===null?yp(r,null,a,c):mo(r,n.child,a,c)}function Jp(n,r,a,c,h){a=a.render;var f=r.ref;return yo(r,h),c=hd(n,r,a,c,f,h),a=fd(),n!==null&&!ln?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~h,Xr(n,r,h)):(it&&a&&Qc(r),r.flags|=1,en(n,r,c,h),r.child)}function Zp(n,r,a,c,h){if(n===null){var f=a.type;return typeof f=="function"&&!$d(f)&&f.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=f,em(n,r,f,c,h)):(n=gu(a.type,null,c,r,r.mode,h),n.ref=r.ref,n.return=r,r.child=n)}if(f=n.child,(n.lanes&h)===0){var E=f.memoizedProps;if(a=a.compare,a=a!==null?a:ma,a(E,c)&&n.ref===r.ref)return Xr(n,r,h)}return r.flags|=1,n=Ps(f,c),n.ref=r.ref,n.return=r,r.child=n}function em(n,r,a,c,h){if(n!==null){var f=n.memoizedProps;if(ma(f,c)&&n.ref===r.ref)if(ln=!1,r.pendingProps=c=f,(n.lanes&h)!==0)(n.flags&131072)!==0&&(ln=!0);else return r.lanes=n.lanes,Xr(n,r,h)}return xd(n,r,a,c,h)}function tm(n,r,a){var c=r.pendingProps,h=c.children,f=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(Eo,Sn),Sn|=a;else{if((a&1073741824)===0)return n=f!==null?f.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:n,cachePool:null,transitions:null},r.updateQueue=null,Xe(Eo,Sn),Sn|=n,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=f!==null?f.baseLanes:a,Xe(Eo,Sn),Sn|=c}else f!==null?(c=f.baseLanes|a,r.memoizedState=null):c=a,Xe(Eo,Sn),Sn|=c;return en(n,r,h,a),r.child}function nm(n,r){var a=r.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function xd(n,r,a,c,h){var f=an(a)?fi:Ht.current;return f=co(r,f),yo(r,h),a=hd(n,r,a,c,f,h),c=fd(),n!==null&&!ln?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~h,Xr(n,r,h)):(it&&c&&Qc(r),r.flags|=1,en(n,r,a,h),r.child)}function rm(n,r,a,c,h){if(an(a)){var f=!0;zl(r)}else f=!1;if(yo(r,h),r.stateNode===null)iu(n,r),qp(r,a,c),_d(r,a,c,h),c=!0;else if(n===null){var E=r.stateNode,S=r.memoizedProps;E.props=S;var A=E.context,j=a.contextType;typeof j=="object"&&j!==null?j=Vn(j):(j=an(a)?fi:Ht.current,j=co(r,j));var Q=a.getDerivedStateFromProps,Y=typeof Q=="function"||typeof E.getSnapshotBeforeUpdate=="function";Y||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(S!==c||A!==j)&&Wp(r,E,c,j),Ss=!1;var q=r.memoizedState;E.state=q,Yl(r,c,E,h),A=r.memoizedState,S!==c||q!==A||on.current||Ss?(typeof Q=="function"&&(vd(r,a,Q,c),A=r.memoizedState),(S=Ss||Hp(r,a,S,c,q,A,j))?(Y||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(r.flags|=4194308)):(typeof E.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=A),E.props=c,E.state=A,E.context=j,c=S):(typeof E.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{E=r.stateNode,_p(n,r),S=r.memoizedProps,j=r.type===r.elementType?S:Jn(r.type,S),E.props=j,Y=r.pendingProps,q=E.context,A=a.contextType,typeof A=="object"&&A!==null?A=Vn(A):(A=an(a)?fi:Ht.current,A=co(r,A));var ie=a.getDerivedStateFromProps;(Q=typeof ie=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(S!==Y||q!==A)&&Wp(r,E,c,A),Ss=!1,q=r.memoizedState,E.state=q,Yl(r,c,E,h);var ue=r.memoizedState;S!==Y||q!==ue||on.current||Ss?(typeof ie=="function"&&(vd(r,a,ie,c),ue=r.memoizedState),(j=Ss||Hp(r,a,j,c,q,ue,A)||!1)?(Q||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(c,ue,A),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(c,ue,A)),typeof E.componentDidUpdate=="function"&&(r.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof E.componentDidUpdate!="function"||S===n.memoizedProps&&q===n.memoizedState||(r.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&q===n.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=ue),E.props=c,E.state=ue,E.context=A,c=j):(typeof E.componentDidUpdate!="function"||S===n.memoizedProps&&q===n.memoizedState||(r.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&q===n.memoizedState||(r.flags|=1024),c=!1)}return Td(n,r,a,c,f,h)}function Td(n,r,a,c,h,f){nm(n,r);var E=(r.flags&128)!==0;if(!c&&!E)return h&&lp(r,a,!1),Xr(n,r,f);c=r.stateNode,U0.current=r;var S=E&&typeof a.getDerivedStateFromError!="function"?null:c.render();return r.flags|=1,n!==null&&E?(r.child=mo(r,n.child,null,f),r.child=mo(r,null,S,f)):en(n,r,S,f),r.memoizedState=c.state,h&&lp(r,a,!0),r.child}function sm(n){var r=n.stateNode;r.pendingContext?op(n,r.pendingContext,r.pendingContext!==r.context):r.context&&op(n,r.context,!1),od(n,r.containerInfo)}function im(n,r,a,c,h){return po(),Zc(h),r.flags|=256,en(n,r,a,c),r.child}var Id={dehydrated:null,treeContext:null,retryLane:0};function Sd(n){return{baseLanes:n,cachePool:null,transitions:null}}function om(n,r,a){var c=r.pendingProps,h=at.current,f=!1,E=(r.flags&128)!==0,S;if((S=E)||(S=n!==null&&n.memoizedState===null?!1:(h&2)!==0),S?(f=!0,r.flags&=-129):(n===null||n.memoizedState!==null)&&(h|=1),Xe(at,h&1),n===null)return Jc(r),n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((r.mode&1)===0?r.lanes=1:n.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(E=c.children,n=c.fallback,f?(c=r.mode,f=r.child,E={mode:"hidden",children:E},(c&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=E):f=yu(E,c,0,null),n=Ti(n,c,a,null),f.return=r,n.return=r,f.sibling=n,r.child=f,r.child.memoizedState=Sd(a),r.memoizedState=Id,n):kd(r,E));if(h=n.memoizedState,h!==null&&(S=h.dehydrated,S!==null))return z0(n,r,E,c,S,h,a);if(f){f=c.fallback,E=r.mode,h=n.child,S=h.sibling;var A={mode:"hidden",children:c.children};return(E&1)===0&&r.child!==h?(c=r.child,c.childLanes=0,c.pendingProps=A,r.deletions=null):(c=Ps(h,A),c.subtreeFlags=h.subtreeFlags&14680064),S!==null?f=Ps(S,f):(f=Ti(f,E,a,null),f.flags|=2),f.return=r,c.return=r,c.sibling=f,r.child=c,c=f,f=r.child,E=n.child.memoizedState,E=E===null?Sd(a):{baseLanes:E.baseLanes|a,cachePool:null,transitions:E.transitions},f.memoizedState=E,f.childLanes=n.childLanes&~a,r.memoizedState=Id,c}return f=n.child,n=f.sibling,c=Ps(f,{mode:"visible",children:c.children}),(r.mode&1)===0&&(c.lanes=a),c.return=r,c.sibling=null,n!==null&&(a=r.deletions,a===null?(r.deletions=[n],r.flags|=16):a.push(n)),r.child=c,r.memoizedState=null,c}function kd(n,r){return r=yu({mode:"visible",children:r},n.mode,0,null),r.return=n,n.child=r}function su(n,r,a,c){return c!==null&&Zc(c),mo(r,n.child,null,a),n=kd(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function z0(n,r,a,c,h,f,E){if(a)return r.flags&256?(r.flags&=-257,c=wd(Error(t(422))),su(n,r,E,c)):r.memoizedState!==null?(r.child=n.child,r.flags|=128,null):(f=c.fallback,h=r.mode,c=yu({mode:"visible",children:c.children},h,0,null),f=Ti(f,h,E,null),f.flags|=2,c.return=r,f.return=r,c.sibling=f,r.child=c,(r.mode&1)!==0&&mo(r,n.child,null,E),r.child.memoizedState=Sd(E),r.memoizedState=Id,f);if((r.mode&1)===0)return su(n,r,E,null);if(h.data==="$!"){if(c=h.nextSibling&&h.nextSibling.dataset,c)var S=c.dgst;return c=S,f=Error(t(419)),c=wd(f,c,void 0),su(n,r,E,c)}if(S=(E&n.childLanes)!==0,ln||S){if(c=Pt,c!==null){switch(E&-E){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(c.suspendedLanes|E))!==0?0:h,h!==0&&h!==f.retryLane&&(f.retryLane=h,Qr(n,h),tr(c,n,h,-1))}return Bd(),c=wd(Error(t(421))),su(n,r,E,c)}return h.data==="$?"?(r.flags|=128,r.child=n.child,r=ew.bind(null,n),h._reactRetry=r,null):(n=f.treeContext,In=Es(h.nextSibling),Tn=r,it=!0,Xn=null,n!==null&&(Pn[Dn++]=Kr,Pn[Dn++]=Gr,Pn[Dn++]=pi,Kr=n.id,Gr=n.overflow,pi=r),r=kd(r,c.children),r.flags|=4096,r)}function am(n,r,a){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r),rd(n.return,r,a)}function Cd(n,r,a,c,h){var f=n.memoizedState;f===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:h}:(f.isBackwards=r,f.rendering=null,f.renderingStartTime=0,f.last=c,f.tail=a,f.tailMode=h)}function lm(n,r,a){var c=r.pendingProps,h=c.revealOrder,f=c.tail;if(en(n,r,c.children,a),c=at.current,(c&2)!==0)c=c&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&am(n,a,r);else if(n.tag===19)am(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Xe(at,c),(r.mode&1)===0)r.memoizedState=null;else switch(h){case"forwards":for(a=r.child,h=null;a!==null;)n=a.alternate,n!==null&&Xl(n)===null&&(h=a),a=a.sibling;a=h,a===null?(h=r.child,r.child=null):(h=a.sibling,a.sibling=null),Cd(r,!1,h,a,f);break;case"backwards":for(a=null,h=r.child,r.child=null;h!==null;){if(n=h.alternate,n!==null&&Xl(n)===null){r.child=h;break}n=h.sibling,h.sibling=a,a=h,h=n}Cd(r,!0,a,null,f);break;case"together":Cd(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function iu(n,r){(r.mode&1)===0&&n!==null&&(n.alternate=null,r.alternate=null,r.flags|=2)}function Xr(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),_i|=r.lanes,(a&r.childLanes)===0)return null;if(n!==null&&r.child!==n.child)throw Error(t(153));if(r.child!==null){for(n=r.child,a=Ps(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=Ps(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function B0(n,r,a){switch(r.tag){case 3:sm(r),po();break;case 5:xp(r);break;case 1:an(r.type)&&zl(r);break;case 4:od(r,r.stateNode.containerInfo);break;case 10:var c=r.type._context,h=r.memoizedProps.value;Xe(Kl,c._currentValue),c._currentValue=h;break;case 13:if(c=r.memoizedState,c!==null)return c.dehydrated!==null?(Xe(at,at.current&1),r.flags|=128,null):(a&r.child.childLanes)!==0?om(n,r,a):(Xe(at,at.current&1),n=Xr(n,r,a),n!==null?n.sibling:null);Xe(at,at.current&1);break;case 19:if(c=(a&r.childLanes)!==0,(n.flags&128)!==0){if(c)return lm(n,r,a);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Xe(at,at.current),c)break;return null;case 22:case 23:return r.lanes=0,tm(n,r,a)}return Xr(n,r,a)}var um,Ad,cm,dm;um=function(n,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Ad=function(){},cm=function(n,r,a,c){var h=n.memoizedProps;if(h!==c){n=r.stateNode,yi(Tr.current);var f=null;switch(a){case"input":h=or(n,h),c=or(n,c),f=[];break;case"select":h=re({},h,{value:void 0}),c=re({},c,{value:void 0}),f=[];break;case"textarea":h=Tt(n,h),c=Tt(n,c),f=[];break;default:typeof h.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=Ll)}sn(a,c);var E;a=null;for(j in h)if(!c.hasOwnProperty(j)&&h.hasOwnProperty(j)&&h[j]!=null)if(j==="style"){var S=h[j];for(E in S)S.hasOwnProperty(E)&&(a||(a={}),a[E]="")}else j!=="dangerouslySetInnerHTML"&&j!=="children"&&j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(o.hasOwnProperty(j)?f||(f=[]):(f=f||[]).push(j,null));for(j in c){var A=c[j];if(S=h?.[j],c.hasOwnProperty(j)&&A!==S&&(A!=null||S!=null))if(j==="style")if(S){for(E in S)!S.hasOwnProperty(E)||A&&A.hasOwnProperty(E)||(a||(a={}),a[E]="");for(E in A)A.hasOwnProperty(E)&&S[E]!==A[E]&&(a||(a={}),a[E]=A[E])}else a||(f||(f=[]),f.push(j,a)),a=A;else j==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,S=S?S.__html:void 0,A!=null&&S!==A&&(f=f||[]).push(j,A)):j==="children"?typeof A!="string"&&typeof A!="number"||(f=f||[]).push(j,""+A):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&(o.hasOwnProperty(j)?(A!=null&&j==="onScroll"&&et("scroll",n),f||S===A||(f=[])):(f=f||[]).push(j,A))}a&&(f=f||[]).push("style",a);var j=f;(r.updateQueue=j)&&(r.flags|=4)}},dm=function(n,r,a,c){a!==c&&(r.flags|=4)};function ba(n,r){if(!it)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Wt(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(r)for(var h=n.child;h!==null;)a|=h.lanes|h.childLanes,c|=h.subtreeFlags&14680064,c|=h.flags&14680064,h.return=n,h=h.sibling;else for(h=n.child;h!==null;)a|=h.lanes|h.childLanes,c|=h.subtreeFlags,c|=h.flags,h.return=n,h=h.sibling;return n.subtreeFlags|=c,n.childLanes=a,r}function $0(n,r,a){var c=r.pendingProps;switch(Yc(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(r),null;case 1:return an(r.type)&&Ul(),Wt(r),null;case 3:return c=r.stateNode,vo(),tt(on),tt(Ht),ud(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(ql(r)?r.flags|=4:n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Xn!==null&&(jd(Xn),Xn=null))),Ad(n,r),Wt(r),null;case 5:ad(r);var h=yi(Sa.current);if(a=r.type,n!==null&&r.stateNode!=null)cm(n,r,a,c,h),n.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!c){if(r.stateNode===null)throw Error(t(166));return Wt(r),null}if(n=yi(Tr.current),ql(r)){c=r.stateNode,a=r.type;var f=r.memoizedProps;switch(c[xr]=r,c[wa]=f,n=(r.mode&1)!==0,a){case"dialog":et("cancel",c),et("close",c);break;case"iframe":case"object":case"embed":et("load",c);break;case"video":case"audio":for(h=0;h<ya.length;h++)et(ya[h],c);break;case"source":et("error",c);break;case"img":case"image":case"link":et("error",c),et("load",c);break;case"details":et("toggle",c);break;case"input":zi(c,f),et("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!f.multiple},et("invalid",c);break;case"textarea":Cn(c,f),et("invalid",c)}sn(a,f),h=null;for(var E in f)if(f.hasOwnProperty(E)){var S=f[E];E==="children"?typeof S=="string"?c.textContent!==S&&(f.suppressHydrationWarning!==!0&&Ml(c.textContent,S,n),h=["children",S]):typeof S=="number"&&c.textContent!==""+S&&(f.suppressHydrationWarning!==!0&&Ml(c.textContent,S,n),h=["children",""+S]):o.hasOwnProperty(E)&&S!=null&&E==="onScroll"&&et("scroll",c)}switch(a){case"input":Bn(c),as(c,f,!0);break;case"textarea":Bn(c),ar(c);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(c.onclick=Ll)}c=h,r.updateQueue=c,c!==null&&(r.flags|=4)}else{E=h.nodeType===9?h:h.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=lr(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=E.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=E.createElement(a,{is:c.is}):(n=E.createElement(a),a==="select"&&(E=n,c.multiple?E.multiple=!0:c.size&&(E.size=c.size))):n=E.createElementNS(n,a),n[xr]=r,n[wa]=c,um(n,r,!1,!1),r.stateNode=n;e:{switch(E=hs(a,c),a){case"dialog":et("cancel",n),et("close",n),h=c;break;case"iframe":case"object":case"embed":et("load",n),h=c;break;case"video":case"audio":for(h=0;h<ya.length;h++)et(ya[h],n);h=c;break;case"source":et("error",n),h=c;break;case"img":case"image":case"link":et("error",n),et("load",n),h=c;break;case"details":et("toggle",n),h=c;break;case"input":zi(n,c),h=or(n,c),et("invalid",n);break;case"option":h=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},h=re({},c,{value:void 0}),et("invalid",n);break;case"textarea":Cn(n,c),h=Tt(n,c),et("invalid",n);break;default:h=c}sn(a,h),S=h;for(f in S)if(S.hasOwnProperty(f)){var A=S[f];f==="style"?cs(n,A):f==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&us(n,A)):f==="children"?typeof A=="string"?(a!=="textarea"||A!=="")&&rn(n,A):typeof A=="number"&&rn(n,""+A):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(o.hasOwnProperty(f)?A!=null&&f==="onScroll"&&et("scroll",n):A!=null&&G(n,f,A,E))}switch(a){case"input":Bn(n),as(n,c,!1);break;case"textarea":Bn(n),ar(n);break;case"option":c.value!=null&&n.setAttribute("value",""+pe(c.value));break;case"select":n.multiple=!!c.multiple,f=c.value,f!=null?mn(n,!!c.multiple,f,!1):c.defaultValue!=null&&mn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof h.onClick=="function"&&(n.onclick=Ll)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Wt(r),null;case 6:if(n&&r.stateNode!=null)dm(n,r,n.memoizedProps,c);else{if(typeof c!="string"&&r.stateNode===null)throw Error(t(166));if(a=yi(Sa.current),yi(Tr.current),ql(r)){if(c=r.stateNode,a=r.memoizedProps,c[xr]=r,(f=c.nodeValue!==a)&&(n=Tn,n!==null))switch(n.tag){case 3:Ml(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Ml(c.nodeValue,a,(n.mode&1)!==0)}f&&(r.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[xr]=r,r.stateNode=c}return Wt(r),null;case 13:if(tt(at),c=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(it&&In!==null&&(r.mode&1)!==0&&(r.flags&128)===0)pp(),po(),r.flags|=98560,f=!1;else if(f=ql(r),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(t(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(t(317));f[xr]=r}else po(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Wt(r),f=!1}else Xn!==null&&(jd(Xn),Xn=null),f=!0;if(!f)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=a,r):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(r.child.flags|=8192,(r.mode&1)!==0&&(n===null||(at.current&1)!==0?St===0&&(St=3):Bd())),r.updateQueue!==null&&(r.flags|=4),Wt(r),null);case 4:return vo(),Ad(n,r),n===null&&va(r.stateNode.containerInfo),Wt(r),null;case 10:return nd(r.type._context),Wt(r),null;case 17:return an(r.type)&&Ul(),Wt(r),null;case 19:if(tt(at),f=r.memoizedState,f===null)return Wt(r),null;if(c=(r.flags&128)!==0,E=f.rendering,E===null)if(c)ba(f,!1);else{if(St!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(E=Xl(n),E!==null){for(r.flags|=128,ba(f,!1),c=E.updateQueue,c!==null&&(r.updateQueue=c,r.flags|=4),r.subtreeFlags=0,c=a,a=r.child;a!==null;)f=a,n=c,f.flags&=14680066,E=f.alternate,E===null?(f.childLanes=0,f.lanes=n,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=E.childLanes,f.lanes=E.lanes,f.child=E.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=E.memoizedProps,f.memoizedState=E.memoizedState,f.updateQueue=E.updateQueue,f.type=E.type,n=E.dependencies,f.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Xe(at,at.current&1|2),r.child}n=n.sibling}f.tail!==null&&Ze()>xo&&(r.flags|=128,c=!0,ba(f,!1),r.lanes=4194304)}else{if(!c)if(n=Xl(E),n!==null){if(r.flags|=128,c=!0,a=n.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),ba(f,!0),f.tail===null&&f.tailMode==="hidden"&&!E.alternate&&!it)return Wt(r),null}else 2*Ze()-f.renderingStartTime>xo&&a!==1073741824&&(r.flags|=128,c=!0,ba(f,!1),r.lanes=4194304);f.isBackwards?(E.sibling=r.child,r.child=E):(a=f.last,a!==null?a.sibling=E:r.child=E,f.last=E)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=Ze(),r.sibling=null,a=at.current,Xe(at,c?a&1|2:a&1),r):(Wt(r),null);case 22:case 23:return zd(),c=r.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(r.flags|=8192),c&&(r.mode&1)!==0?(Sn&1073741824)!==0&&(Wt(r),r.subtreeFlags&6&&(r.flags|=8192)):Wt(r),null;case 24:return null;case 25:return null}throw Error(t(156,r.tag))}function H0(n,r){switch(Yc(r),r.tag){case 1:return an(r.type)&&Ul(),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return vo(),tt(on),tt(Ht),ud(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 5:return ad(r),null;case 13:if(tt(at),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(t(340));po()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return tt(at),null;case 4:return vo(),null;case 10:return nd(r.type._context),null;case 22:case 23:return zd(),null;case 24:return null;default:return null}}var ou=!1,Kt=!1,q0=typeof WeakSet=="function"?WeakSet:Set,ae=null;function wo(n,r){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){dt(n,r,c)}else a.current=null}function Rd(n,r,a){try{a()}catch(c){dt(n,r,c)}}var hm=!1;function W0(n,r){if(zc=Br,n=Hf(),Dc(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var h=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var E=0,S=-1,A=-1,j=0,Q=0,Y=n,q=null;t:for(;;){for(var ie;Y!==a||h!==0&&Y.nodeType!==3||(S=E+h),Y!==f||c!==0&&Y.nodeType!==3||(A=E+c),Y.nodeType===3&&(E+=Y.nodeValue.length),(ie=Y.firstChild)!==null;)q=Y,Y=ie;for(;;){if(Y===n)break t;if(q===a&&++j===h&&(S=E),q===f&&++Q===c&&(A=E),(ie=Y.nextSibling)!==null)break;Y=q,q=Y.parentNode}Y=ie}a=S===-1||A===-1?null:{start:S,end:A}}else a=null}a=a||{start:0,end:0}}else a=null;for(Bc={focusedElem:n,selectionRange:a},Br=!1,ae=r;ae!==null;)if(r=ae,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,ae=n;else for(;ae!==null;){r=ae;try{var ue=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ue!==null){var de=ue.memoizedProps,pt=ue.memoizedState,F=r.stateNode,D=F.getSnapshotBeforeUpdate(r.elementType===r.type?de:Jn(r.type,de),pt);F.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var L=r.stateNode.containerInfo;L.nodeType===1?L.textContent="":L.nodeType===9&&L.documentElement&&L.removeChild(L.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(X){dt(r,r.return,X)}if(n=r.sibling,n!==null){n.return=r.return,ae=n;break}ae=r.return}return ue=hm,hm=!1,ue}function Na(n,r,a){var c=r.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&n)===n){var f=h.destroy;h.destroy=void 0,f!==void 0&&Rd(r,a,f)}h=h.next}while(h!==c)}}function au(n,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==r)}}function bd(n){var r=n.ref;if(r!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof r=="function"?r(n):r.current=n}}function fm(n){var r=n.alternate;r!==null&&(n.alternate=null,fm(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&(delete r[xr],delete r[wa],delete r[Wc],delete r[A0],delete r[R0])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function pm(n){return n.tag===5||n.tag===3||n.tag===4}function mm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||pm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Nd(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(n,r):a.insertBefore(n,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(n,a)):(r=a,r.appendChild(n)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Ll));else if(c!==4&&(n=n.child,n!==null))for(Nd(n,r,a),n=n.sibling;n!==null;)Nd(n,r,a),n=n.sibling}function Pd(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(Pd(n,r,a),n=n.sibling;n!==null;)Pd(n,r,a),n=n.sibling}var Mt=null,Zn=!1;function Cs(n,r,a){for(a=a.child;a!==null;)gm(n,r,a),a=a.sibling}function gm(n,r,a){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(ri,a)}catch{}switch(a.tag){case 5:Kt||wo(a,r);case 6:var c=Mt,h=Zn;Mt=null,Cs(n,r,a),Mt=c,Zn=h,Mt!==null&&(Zn?(n=Mt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Mt.removeChild(a.stateNode));break;case 18:Mt!==null&&(Zn?(n=Mt,a=a.stateNode,n.nodeType===8?qc(n.parentNode,a):n.nodeType===1&&qc(n,a),ys(n)):qc(Mt,a.stateNode));break;case 4:c=Mt,h=Zn,Mt=a.stateNode.containerInfo,Zn=!0,Cs(n,r,a),Mt=c,Zn=h;break;case 0:case 11:case 14:case 15:if(!Kt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){h=c=c.next;do{var f=h,E=f.destroy;f=f.tag,E!==void 0&&((f&2)!==0||(f&4)!==0)&&Rd(a,r,E),h=h.next}while(h!==c)}Cs(n,r,a);break;case 1:if(!Kt&&(wo(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(S){dt(a,r,S)}Cs(n,r,a);break;case 21:Cs(n,r,a);break;case 22:a.mode&1?(Kt=(c=Kt)||a.memoizedState!==null,Cs(n,r,a),Kt=c):Cs(n,r,a);break;default:Cs(n,r,a)}}function ym(n){var r=n.updateQueue;if(r!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new q0),r.forEach(function(c){var h=tw.bind(null,n,c);a.has(c)||(a.add(c),c.then(h,h))})}}function er(n,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var h=a[c];try{var f=n,E=r,S=E;e:for(;S!==null;){switch(S.tag){case 5:Mt=S.stateNode,Zn=!1;break e;case 3:Mt=S.stateNode.containerInfo,Zn=!0;break e;case 4:Mt=S.stateNode.containerInfo,Zn=!0;break e}S=S.return}if(Mt===null)throw Error(t(160));gm(f,E,h),Mt=null,Zn=!1;var A=h.alternate;A!==null&&(A.return=null),h.return=null}catch(j){dt(h,r,j)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)vm(r,n),r=r.sibling}function vm(n,r){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(er(r,n),Sr(n),c&4){try{Na(3,n,n.return),au(3,n)}catch(de){dt(n,n.return,de)}try{Na(5,n,n.return)}catch(de){dt(n,n.return,de)}}break;case 1:er(r,n),Sr(n),c&512&&a!==null&&wo(a,a.return);break;case 5:if(er(r,n),Sr(n),c&512&&a!==null&&wo(a,a.return),n.flags&32){var h=n.stateNode;try{rn(h,"")}catch(de){dt(n,n.return,de)}}if(c&4&&(h=n.stateNode,h!=null)){var f=n.memoizedProps,E=a!==null?a.memoizedProps:f,S=n.type,A=n.updateQueue;if(n.updateQueue=null,A!==null)try{S==="input"&&f.type==="radio"&&f.name!=null&&Mr(h,f),hs(S,E);var j=hs(S,f);for(E=0;E<A.length;E+=2){var Q=A[E],Y=A[E+1];Q==="style"?cs(h,Y):Q==="dangerouslySetInnerHTML"?us(h,Y):Q==="children"?rn(h,Y):G(h,Q,Y,j)}switch(S){case"input":pn(h,f);break;case"textarea":Bi(h,f);break;case"select":var q=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!f.multiple;var ie=f.value;ie!=null?mn(h,!!f.multiple,ie,!1):q!==!!f.multiple&&(f.defaultValue!=null?mn(h,!!f.multiple,f.defaultValue,!0):mn(h,!!f.multiple,f.multiple?[]:"",!1))}h[wa]=f}catch(de){dt(n,n.return,de)}}break;case 6:if(er(r,n),Sr(n),c&4){if(n.stateNode===null)throw Error(t(162));h=n.stateNode,f=n.memoizedProps;try{h.nodeValue=f}catch(de){dt(n,n.return,de)}}break;case 3:if(er(r,n),Sr(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{ys(r.containerInfo)}catch(de){dt(n,n.return,de)}break;case 4:er(r,n),Sr(n);break;case 13:er(r,n),Sr(n),h=n.child,h.flags&8192&&(f=h.memoizedState!==null,h.stateNode.isHidden=f,!f||h.alternate!==null&&h.alternate.memoizedState!==null||(Od=Ze())),c&4&&ym(n);break;case 22:if(Q=a!==null&&a.memoizedState!==null,n.mode&1?(Kt=(j=Kt)||Q,er(r,n),Kt=j):er(r,n),Sr(n),c&8192){if(j=n.memoizedState!==null,(n.stateNode.isHidden=j)&&!Q&&(n.mode&1)!==0)for(ae=n,Q=n.child;Q!==null;){for(Y=ae=Q;ae!==null;){switch(q=ae,ie=q.child,q.tag){case 0:case 11:case 14:case 15:Na(4,q,q.return);break;case 1:wo(q,q.return);var ue=q.stateNode;if(typeof ue.componentWillUnmount=="function"){c=q,a=q.return;try{r=c,ue.props=r.memoizedProps,ue.state=r.memoizedState,ue.componentWillUnmount()}catch(de){dt(c,a,de)}}break;case 5:wo(q,q.return);break;case 22:if(q.memoizedState!==null){Em(Y);continue}}ie!==null?(ie.return=q,ae=ie):Em(Y)}Q=Q.sibling}e:for(Q=null,Y=n;;){if(Y.tag===5){if(Q===null){Q=Y;try{h=Y.stateNode,j?(f=h.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(S=Y.stateNode,A=Y.memoizedProps.style,E=A!=null&&A.hasOwnProperty("display")?A.display:null,S.style.display=ur("display",E))}catch(de){dt(n,n.return,de)}}}else if(Y.tag===6){if(Q===null)try{Y.stateNode.nodeValue=j?"":Y.memoizedProps}catch(de){dt(n,n.return,de)}}else if((Y.tag!==22&&Y.tag!==23||Y.memoizedState===null||Y===n)&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===n)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===n)break e;Q===Y&&(Q=null),Y=Y.return}Q===Y&&(Q=null),Y.sibling.return=Y.return,Y=Y.sibling}}break;case 19:er(r,n),Sr(n),c&4&&ym(n);break;case 21:break;default:er(r,n),Sr(n)}}function Sr(n){var r=n.flags;if(r&2){try{e:{for(var a=n.return;a!==null;){if(pm(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var h=c.stateNode;c.flags&32&&(rn(h,""),c.flags&=-33);var f=mm(n);Pd(n,f,h);break;case 3:case 4:var E=c.stateNode.containerInfo,S=mm(n);Nd(n,S,E);break;default:throw Error(t(161))}}catch(A){dt(n,n.return,A)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function K0(n,r,a){ae=n,_m(n)}function _m(n,r,a){for(var c=(n.mode&1)!==0;ae!==null;){var h=ae,f=h.child;if(h.tag===22&&c){var E=h.memoizedState!==null||ou;if(!E){var S=h.alternate,A=S!==null&&S.memoizedState!==null||Kt;S=ou;var j=Kt;if(ou=E,(Kt=A)&&!j)for(ae=h;ae!==null;)E=ae,A=E.child,E.tag===22&&E.memoizedState!==null?xm(h):A!==null?(A.return=E,ae=A):xm(h);for(;f!==null;)ae=f,_m(f),f=f.sibling;ae=h,ou=S,Kt=j}wm(n)}else(h.subtreeFlags&8772)!==0&&f!==null?(f.return=h,ae=f):wm(n)}}function wm(n){for(;ae!==null;){var r=ae;if((r.flags&8772)!==0){var a=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Kt||au(5,r);break;case 1:var c=r.stateNode;if(r.flags&4&&!Kt)if(a===null)c.componentDidMount();else{var h=r.elementType===r.type?a.memoizedProps:Jn(r.type,a.memoizedProps);c.componentDidUpdate(h,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var f=r.updateQueue;f!==null&&Ep(r,f,c);break;case 3:var E=r.updateQueue;if(E!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}Ep(r,E,a)}break;case 5:var S=r.stateNode;if(a===null&&r.flags&4){a=S;var A=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&a.focus();break;case"img":A.src&&(a.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var j=r.alternate;if(j!==null){var Q=j.memoizedState;if(Q!==null){var Y=Q.dehydrated;Y!==null&&ys(Y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Kt||r.flags&512&&bd(r)}catch(q){dt(r,r.return,q)}}if(r===n){ae=null;break}if(a=r.sibling,a!==null){a.return=r.return,ae=a;break}ae=r.return}}function Em(n){for(;ae!==null;){var r=ae;if(r===n){ae=null;break}var a=r.sibling;if(a!==null){a.return=r.return,ae=a;break}ae=r.return}}function xm(n){for(;ae!==null;){var r=ae;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{au(4,r)}catch(A){dt(r,a,A)}break;case 1:var c=r.stateNode;if(typeof c.componentDidMount=="function"){var h=r.return;try{c.componentDidMount()}catch(A){dt(r,h,A)}}var f=r.return;try{bd(r)}catch(A){dt(r,f,A)}break;case 5:var E=r.return;try{bd(r)}catch(A){dt(r,E,A)}}}catch(A){dt(r,r.return,A)}if(r===n){ae=null;break}var S=r.sibling;if(S!==null){S.return=r.return,ae=S;break}ae=r.return}}var G0=Math.ceil,lu=Ne.ReactCurrentDispatcher,Dd=Ne.ReactCurrentOwner,Fn=Ne.ReactCurrentBatchConfig,Be=0,Pt=null,wt=null,Lt=0,Sn=0,Eo=xs(0),St=0,Pa=null,_i=0,uu=0,Vd=0,Da=null,un=null,Od=0,xo=1/0,Jr=null,cu=!1,Fd=null,As=null,du=!1,Rs=null,hu=0,Va=0,Md=null,fu=-1,pu=0;function tn(){return(Be&6)!==0?Ze():fu!==-1?fu:fu=Ze()}function bs(n){return(n.mode&1)===0?1:(Be&2)!==0&&Lt!==0?Lt&-Lt:N0.transition!==null?(pu===0&&(pu=ta()),pu):(n=Le,n!==0||(n=window.event,n=n===void 0?16:Yi(n.type)),n)}function tr(n,r,a,c){if(50<Va)throw Va=0,Md=null,Error(t(185));ai(n,a,c),((Be&2)===0||n!==Pt)&&(n===Pt&&((Be&2)===0&&(uu|=a),St===4&&Ns(n,Lt)),cn(n,c),a===1&&Be===0&&(r.mode&1)===0&&(xo=Ze()+500,Bl&&Is()))}function cn(n,r){var a=n.callbackNode;oi(n,r);var c=jr(n,n===Pt?Lt:0);if(c===0)a!==null&&$i(a),n.callbackNode=null,n.callbackPriority=0;else if(r=c&-c,n.callbackPriority!==r){if(a!=null&&$i(a),r===1)n.tag===0?b0(Im.bind(null,n)):up(Im.bind(null,n)),k0(function(){(Be&6)===0&&Is()}),a=null;else{switch(hr(c)){case 1:a=Hi;break;case 4:a=Jo;break;case 16:a=ni;break;case 536870912:a=qi;break;default:a=ni}a=Pm(a,Tm.bind(null,n))}n.callbackPriority=r,n.callbackNode=a}}function Tm(n,r){if(fu=-1,pu=0,(Be&6)!==0)throw Error(t(327));var a=n.callbackNode;if(To()&&n.callbackNode!==a)return null;var c=jr(n,n===Pt?Lt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||r)r=mu(n,c);else{r=c;var h=Be;Be|=2;var f=km();(Pt!==n||Lt!==r)&&(Jr=null,xo=Ze()+500,Ei(n,r));do try{X0();break}catch(S){Sm(n,S)}while(!0);td(),lu.current=f,Be=h,wt!==null?r=0:(Pt=null,Lt=0,r=St)}if(r!==0){if(r===2&&(h=ea(n),h!==0&&(c=h,r=Ld(n,h))),r===1)throw a=Pa,Ei(n,0),Ns(n,c),cn(n,Ze()),a;if(r===6)Ns(n,c);else{if(h=n.current.alternate,(c&30)===0&&!Q0(h)&&(r=mu(n,c),r===2&&(f=ea(n),f!==0&&(c=f,r=Ld(n,f))),r===1))throw a=Pa,Ei(n,0),Ns(n,c),cn(n,Ze()),a;switch(n.finishedWork=h,n.finishedLanes=c,r){case 0:case 1:throw Error(t(345));case 2:xi(n,un,Jr);break;case 3:if(Ns(n,c),(c&130023424)===c&&(r=Od+500-Ze(),10<r)){if(jr(n,0)!==0)break;if(h=n.suspendedLanes,(h&c)!==c){tn(),n.pingedLanes|=n.suspendedLanes&h;break}n.timeoutHandle=Hc(xi.bind(null,n,un,Jr),r);break}xi(n,un,Jr);break;case 4:if(Ns(n,c),(c&4194240)===c)break;for(r=n.eventTimes,h=-1;0<c;){var E=31-vn(c);f=1<<E,E=r[E],E>h&&(h=E),c&=~f}if(c=h,c=Ze()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*G0(c/1960))-c,10<c){n.timeoutHandle=Hc(xi.bind(null,n,un,Jr),c);break}xi(n,un,Jr);break;case 5:xi(n,un,Jr);break;default:throw Error(t(329))}}}return cn(n,Ze()),n.callbackNode===a?Tm.bind(null,n):null}function Ld(n,r){var a=Da;return n.current.memoizedState.isDehydrated&&(Ei(n,r).flags|=256),n=mu(n,r),n!==2&&(r=un,un=a,r!==null&&jd(r)),n}function jd(n){un===null?un=n:un.push.apply(un,n)}function Q0(n){for(var r=n;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var h=a[c],f=h.getSnapshot;h=h.value;try{if(!Yn(f(),h))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ns(n,r){for(r&=~Vd,r&=~uu,n.suspendedLanes|=r,n.pingedLanes&=~r,n=n.expirationTimes;0<r;){var a=31-vn(r),c=1<<a;n[a]=-1,r&=~c}}function Im(n){if((Be&6)!==0)throw Error(t(327));To();var r=jr(n,0);if((r&1)===0)return cn(n,Ze()),null;var a=mu(n,r);if(n.tag!==0&&a===2){var c=ea(n);c!==0&&(r=c,a=Ld(n,c))}if(a===1)throw a=Pa,Ei(n,0),Ns(n,r),cn(n,Ze()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=r,xi(n,un,Jr),cn(n,Ze()),null}function Ud(n,r){var a=Be;Be|=1;try{return n(r)}finally{Be=a,Be===0&&(xo=Ze()+500,Bl&&Is())}}function wi(n){Rs!==null&&Rs.tag===0&&(Be&6)===0&&To();var r=Be;Be|=1;var a=Fn.transition,c=Le;try{if(Fn.transition=null,Le=1,n)return n()}finally{Le=c,Fn.transition=a,Be=r,(Be&6)===0&&Is()}}function zd(){Sn=Eo.current,tt(Eo)}function Ei(n,r){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,S0(a)),wt!==null)for(a=wt.return;a!==null;){var c=a;switch(Yc(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Ul();break;case 3:vo(),tt(on),tt(Ht),ud();break;case 5:ad(c);break;case 4:vo();break;case 13:tt(at);break;case 19:tt(at);break;case 10:nd(c.type._context);break;case 22:case 23:zd()}a=a.return}if(Pt=n,wt=n=Ps(n.current,null),Lt=Sn=r,St=0,Pa=null,Vd=uu=_i=0,un=Da=null,gi!==null){for(r=0;r<gi.length;r++)if(a=gi[r],c=a.interleaved,c!==null){a.interleaved=null;var h=c.next,f=a.pending;if(f!==null){var E=f.next;f.next=h,c.next=E}a.pending=c}gi=null}return n}function Sm(n,r){do{var a=wt;try{if(td(),Jl.current=nu,Zl){for(var c=lt.memoizedState;c!==null;){var h=c.queue;h!==null&&(h.pending=null),c=c.next}Zl=!1}if(vi=0,Nt=It=lt=null,ka=!1,Ca=0,Dd.current=null,a===null||a.return===null){St=1,Pa=r,wt=null;break}e:{var f=n,E=a.return,S=a,A=r;if(r=Lt,S.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var j=A,Q=S,Y=Q.tag;if((Q.mode&1)===0&&(Y===0||Y===11||Y===15)){var q=Q.alternate;q?(Q.updateQueue=q.updateQueue,Q.memoizedState=q.memoizedState,Q.lanes=q.lanes):(Q.updateQueue=null,Q.memoizedState=null)}var ie=Yp(E);if(ie!==null){ie.flags&=-257,Xp(ie,E,S,f,r),ie.mode&1&&Qp(f,j,r),r=ie,A=j;var ue=r.updateQueue;if(ue===null){var de=new Set;de.add(A),r.updateQueue=de}else ue.add(A);break e}else{if((r&1)===0){Qp(f,j,r),Bd();break e}A=Error(t(426))}}else if(it&&S.mode&1){var pt=Yp(E);if(pt!==null){(pt.flags&65536)===0&&(pt.flags|=256),Xp(pt,E,S,f,r),Zc(_o(A,S));break e}}f=A=_o(A,S),St!==4&&(St=2),Da===null?Da=[f]:Da.push(f),f=E;do{switch(f.tag){case 3:f.flags|=65536,r&=-r,f.lanes|=r;var F=Kp(f,A,r);wp(f,F);break e;case 1:S=A;var D=f.type,L=f.stateNode;if((f.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(As===null||!As.has(L)))){f.flags|=65536,r&=-r,f.lanes|=r;var X=Gp(f,S,r);wp(f,X);break e}}f=f.return}while(f!==null)}Am(a)}catch(he){r=he,wt===a&&a!==null&&(wt=a=a.return);continue}break}while(!0)}function km(){var n=lu.current;return lu.current=nu,n===null?nu:n}function Bd(){(St===0||St===3||St===2)&&(St=4),Pt===null||(_i&268435455)===0&&(uu&268435455)===0||Ns(Pt,Lt)}function mu(n,r){var a=Be;Be|=2;var c=km();(Pt!==n||Lt!==r)&&(Jr=null,Ei(n,r));do try{Y0();break}catch(h){Sm(n,h)}while(!0);if(td(),Be=a,lu.current=c,wt!==null)throw Error(t(261));return Pt=null,Lt=0,St}function Y0(){for(;wt!==null;)Cm(wt)}function X0(){for(;wt!==null&&!ti();)Cm(wt)}function Cm(n){var r=Nm(n.alternate,n,Sn);n.memoizedProps=n.pendingProps,r===null?Am(n):wt=r,Dd.current=null}function Am(n){var r=n;do{var a=r.alternate;if(n=r.return,(r.flags&32768)===0){if(a=$0(a,r,Sn),a!==null){wt=a;return}}else{if(a=H0(a,r),a!==null){a.flags&=32767,wt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{St=6,wt=null;return}}if(r=r.sibling,r!==null){wt=r;return}wt=r=n}while(r!==null);St===0&&(St=5)}function xi(n,r,a){var c=Le,h=Fn.transition;try{Fn.transition=null,Le=1,J0(n,r,a,c)}finally{Fn.transition=h,Le=c}return null}function J0(n,r,a,c){do To();while(Rs!==null);if((Be&6)!==0)throw Error(t(327));a=n.finishedWork;var h=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var f=a.lanes|a.childLanes;if(Ac(n,f),n===Pt&&(wt=Pt=null,Lt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||du||(du=!0,Pm(ni,function(){return To(),null})),f=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||f){f=Fn.transition,Fn.transition=null;var E=Le;Le=1;var S=Be;Be|=4,Dd.current=null,W0(n,a),vm(a,n),v0(Bc),Br=!!zc,Bc=zc=null,n.current=a,K0(a),Lr(),Be=S,Le=E,Fn.transition=f}else n.current=a;if(du&&(du=!1,Rs=n,hu=h),f=n.pendingLanes,f===0&&(As=null),xl(a.stateNode),cn(n,Ze()),r!==null)for(c=n.onRecoverableError,a=0;a<r.length;a++)h=r[a],c(h.value,{componentStack:h.stack,digest:h.digest});if(cu)throw cu=!1,n=Fd,Fd=null,n;return(hu&1)!==0&&n.tag!==0&&To(),f=n.pendingLanes,(f&1)!==0?n===Md?Va++:(Va=0,Md=n):Va=0,Is(),null}function To(){if(Rs!==null){var n=hr(hu),r=Fn.transition,a=Le;try{if(Fn.transition=null,Le=16>n?16:n,Rs===null)var c=!1;else{if(n=Rs,Rs=null,hu=0,(Be&6)!==0)throw Error(t(331));var h=Be;for(Be|=4,ae=n.current;ae!==null;){var f=ae,E=f.child;if((ae.flags&16)!==0){var S=f.deletions;if(S!==null){for(var A=0;A<S.length;A++){var j=S[A];for(ae=j;ae!==null;){var Q=ae;switch(Q.tag){case 0:case 11:case 15:Na(8,Q,f)}var Y=Q.child;if(Y!==null)Y.return=Q,ae=Y;else for(;ae!==null;){Q=ae;var q=Q.sibling,ie=Q.return;if(fm(Q),Q===j){ae=null;break}if(q!==null){q.return=ie,ae=q;break}ae=ie}}}var ue=f.alternate;if(ue!==null){var de=ue.child;if(de!==null){ue.child=null;do{var pt=de.sibling;de.sibling=null,de=pt}while(de!==null)}}ae=f}}if((f.subtreeFlags&2064)!==0&&E!==null)E.return=f,ae=E;else e:for(;ae!==null;){if(f=ae,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:Na(9,f,f.return)}var F=f.sibling;if(F!==null){F.return=f.return,ae=F;break e}ae=f.return}}var D=n.current;for(ae=D;ae!==null;){E=ae;var L=E.child;if((E.subtreeFlags&2064)!==0&&L!==null)L.return=E,ae=L;else e:for(E=D;ae!==null;){if(S=ae,(S.flags&2048)!==0)try{switch(S.tag){case 0:case 11:case 15:au(9,S)}}catch(he){dt(S,S.return,he)}if(S===E){ae=null;break e}var X=S.sibling;if(X!==null){X.return=S.return,ae=X;break e}ae=S.return}}if(Be=h,Is(),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(ri,n)}catch{}c=!0}return c}finally{Le=a,Fn.transition=r}}return!1}function Rm(n,r,a){r=_o(a,r),r=Kp(n,r,1),n=ks(n,r,1),r=tn(),n!==null&&(ai(n,1,r),cn(n,r))}function dt(n,r,a){if(n.tag===3)Rm(n,n,a);else for(;r!==null;){if(r.tag===3){Rm(r,n,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(As===null||!As.has(c))){n=_o(a,n),n=Gp(r,n,1),r=ks(r,n,1),n=tn(),r!==null&&(ai(r,1,n),cn(r,n));break}}r=r.return}}function Z0(n,r,a){var c=n.pingCache;c!==null&&c.delete(r),r=tn(),n.pingedLanes|=n.suspendedLanes&a,Pt===n&&(Lt&a)===a&&(St===4||St===3&&(Lt&130023424)===Lt&&500>Ze()-Od?Ei(n,0):Vd|=a),cn(n,r)}function bm(n,r){r===0&&((n.mode&1)===0?r=1:(r=ps,ps<<=1,(ps&130023424)===0&&(ps=4194304)));var a=tn();n=Qr(n,r),n!==null&&(ai(n,r,a),cn(n,a))}function ew(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),bm(n,a)}function tw(n,r){var a=0;switch(n.tag){case 13:var c=n.stateNode,h=n.memoizedState;h!==null&&(a=h.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(r),bm(n,a)}var Nm;Nm=function(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps||on.current)ln=!0;else{if((n.lanes&a)===0&&(r.flags&128)===0)return ln=!1,B0(n,r,a);ln=(n.flags&131072)!==0}else ln=!1,it&&(r.flags&1048576)!==0&&cp(r,Hl,r.index);switch(r.lanes=0,r.tag){case 2:var c=r.type;iu(n,r),n=r.pendingProps;var h=co(r,Ht.current);yo(r,a),h=hd(null,r,c,n,h,a);var f=fd();return r.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,an(c)?(f=!0,zl(r)):f=!1,r.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,id(r),h.updater=ru,r.stateNode=h,h._reactInternals=r,_d(r,c,n,a),r=Td(null,r,c,!0,f,a)):(r.tag=0,it&&f&&Qc(r),en(null,r,h,a),r=r.child),r;case 16:c=r.elementType;e:{switch(iu(n,r),n=r.pendingProps,h=c._init,c=h(c._payload),r.type=c,h=r.tag=rw(c),n=Jn(c,n),h){case 0:r=xd(null,r,c,n,a);break e;case 1:r=rm(null,r,c,n,a);break e;case 11:r=Jp(null,r,c,n,a);break e;case 14:r=Zp(null,r,c,Jn(c.type,n),a);break e}throw Error(t(306,c,""))}return r;case 0:return c=r.type,h=r.pendingProps,h=r.elementType===c?h:Jn(c,h),xd(n,r,c,h,a);case 1:return c=r.type,h=r.pendingProps,h=r.elementType===c?h:Jn(c,h),rm(n,r,c,h,a);case 3:e:{if(sm(r),n===null)throw Error(t(387));c=r.pendingProps,f=r.memoizedState,h=f.element,_p(n,r),Yl(r,c,null,a);var E=r.memoizedState;if(c=E.element,f.isDehydrated)if(f={element:c,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},r.updateQueue.baseState=f,r.memoizedState=f,r.flags&256){h=_o(Error(t(423)),r),r=im(n,r,c,a,h);break e}else if(c!==h){h=_o(Error(t(424)),r),r=im(n,r,c,a,h);break e}else for(In=Es(r.stateNode.containerInfo.firstChild),Tn=r,it=!0,Xn=null,a=yp(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(po(),c===h){r=Xr(n,r,a);break e}en(n,r,c,a)}r=r.child}return r;case 5:return xp(r),n===null&&Jc(r),c=r.type,h=r.pendingProps,f=n!==null?n.memoizedProps:null,E=h.children,$c(c,h)?E=null:f!==null&&$c(c,f)&&(r.flags|=32),nm(n,r),en(n,r,E,a),r.child;case 6:return n===null&&Jc(r),null;case 13:return om(n,r,a);case 4:return od(r,r.stateNode.containerInfo),c=r.pendingProps,n===null?r.child=mo(r,null,c,a):en(n,r,c,a),r.child;case 11:return c=r.type,h=r.pendingProps,h=r.elementType===c?h:Jn(c,h),Jp(n,r,c,h,a);case 7:return en(n,r,r.pendingProps,a),r.child;case 8:return en(n,r,r.pendingProps.children,a),r.child;case 12:return en(n,r,r.pendingProps.children,a),r.child;case 10:e:{if(c=r.type._context,h=r.pendingProps,f=r.memoizedProps,E=h.value,Xe(Kl,c._currentValue),c._currentValue=E,f!==null)if(Yn(f.value,E)){if(f.children===h.children&&!on.current){r=Xr(n,r,a);break e}}else for(f=r.child,f!==null&&(f.return=r);f!==null;){var S=f.dependencies;if(S!==null){E=f.child;for(var A=S.firstContext;A!==null;){if(A.context===c){if(f.tag===1){A=Yr(-1,a&-a),A.tag=2;var j=f.updateQueue;if(j!==null){j=j.shared;var Q=j.pending;Q===null?A.next=A:(A.next=Q.next,Q.next=A),j.pending=A}}f.lanes|=a,A=f.alternate,A!==null&&(A.lanes|=a),rd(f.return,a,r),S.lanes|=a;break}A=A.next}}else if(f.tag===10)E=f.type===r.type?null:f.child;else if(f.tag===18){if(E=f.return,E===null)throw Error(t(341));E.lanes|=a,S=E.alternate,S!==null&&(S.lanes|=a),rd(E,a,r),E=f.sibling}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===r){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}en(n,r,h.children,a),r=r.child}return r;case 9:return h=r.type,c=r.pendingProps.children,yo(r,a),h=Vn(h),c=c(h),r.flags|=1,en(n,r,c,a),r.child;case 14:return c=r.type,h=Jn(c,r.pendingProps),h=Jn(c.type,h),Zp(n,r,c,h,a);case 15:return em(n,r,r.type,r.pendingProps,a);case 17:return c=r.type,h=r.pendingProps,h=r.elementType===c?h:Jn(c,h),iu(n,r),r.tag=1,an(c)?(n=!0,zl(r)):n=!1,yo(r,a),qp(r,c,h),_d(r,c,h,a),Td(null,r,c,!0,n,a);case 19:return lm(n,r,a);case 22:return tm(n,r,a)}throw Error(t(156,r.tag))};function Pm(n,r){return Xo(n,r)}function nw(n,r,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(n,r,a,c){return new nw(n,r,a,c)}function $d(n){return n=n.prototype,!(!n||!n.isReactComponent)}function rw(n){if(typeof n=="function")return $d(n)?1:0;if(n!=null){if(n=n.$$typeof,n===O)return 11;if(n===st)return 14}return 2}function Ps(n,r){var a=n.alternate;return a===null?(a=Mn(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function gu(n,r,a,c,h,f){var E=2;if(c=n,typeof n=="function")$d(n)&&(E=1);else if(typeof n=="string")E=5;else e:switch(n){case b:return Ti(a.children,h,f,r);case I:E=8,h|=8;break;case C:return n=Mn(12,a,r,h|2),n.elementType=C,n.lanes=f,n;case k:return n=Mn(13,a,r,h),n.elementType=k,n.lanes=f,n;case He:return n=Mn(19,a,r,h),n.elementType=He,n.lanes=f,n;case be:return yu(a,h,f,r);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case P:E=10;break e;case N:E=9;break e;case O:E=11;break e;case st:E=14;break e;case Re:E=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return r=Mn(E,a,r,h),r.elementType=n,r.type=c,r.lanes=f,r}function Ti(n,r,a,c){return n=Mn(7,n,c,r),n.lanes=a,n}function yu(n,r,a,c){return n=Mn(22,n,c,r),n.elementType=be,n.lanes=a,n.stateNode={isHidden:!1},n}function Hd(n,r,a){return n=Mn(6,n,null,r),n.lanes=a,n}function qd(n,r,a){return r=Mn(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function sw(n,r,a,c,h){this.tag=r,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=na(0),this.expirationTimes=na(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=na(0),this.identifierPrefix=c,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function Wd(n,r,a,c,h,f,E,S,A){return n=new sw(n,r,a,S,A),r===1?(r=1,f===!0&&(r|=8)):r=0,f=Mn(3,null,null,r),n.current=f,f.stateNode=n,f.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},id(f),n}function iw(n,r,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Se,key:c==null?null:""+c,children:n,containerInfo:r,implementation:a}}function Dm(n){if(!n)return Ts;n=n._reactInternals;e:{if(Gn(n)!==n||n.tag!==1)throw Error(t(170));var r=n;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(an(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(an(a))return ap(n,a,r)}return r}function Vm(n,r,a,c,h,f,E,S,A){return n=Wd(a,c,!0,n,h,f,E,S,A),n.context=Dm(null),a=n.current,c=tn(),h=bs(a),f=Yr(c,h),f.callback=r??null,ks(a,f,h),n.current.lanes=h,ai(n,h,c),cn(n,c),n}function vu(n,r,a,c){var h=r.current,f=tn(),E=bs(h);return a=Dm(a),r.context===null?r.context=a:r.pendingContext=a,r=Yr(f,E),r.payload={element:n},c=c===void 0?null:c,c!==null&&(r.callback=c),n=ks(h,r,E),n!==null&&(tr(n,h,E,f),Ql(n,h,E)),E}function _u(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Om(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function Kd(n,r){Om(n,r),(n=n.alternate)&&Om(n,r)}function ow(){return null}var Fm=typeof reportError=="function"?reportError:function(n){console.error(n)};function Gd(n){this._internalRoot=n}wu.prototype.render=Gd.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(t(409));vu(n,r,null,null)},wu.prototype.unmount=Gd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;wi(function(){vu(null,n,null,null)}),r[qr]=null}};function wu(n){this._internalRoot=n}wu.prototype.unstable_scheduleHydration=function(n){if(n){var r=oa();n={blockedOn:null,target:n,priority:r};for(var a=0;a<_n.length&&r!==0&&r<_n[a].priority;a++);_n.splice(a,0,n),a===0&&Gi(n)}};function Qd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Eu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Mm(){}function aw(n,r,a,c,h){if(h){if(typeof c=="function"){var f=c;c=function(){var j=_u(E);f.call(j)}}var E=Vm(r,c,n,0,null,!1,!1,"",Mm);return n._reactRootContainer=E,n[qr]=E.current,va(n.nodeType===8?n.parentNode:n),wi(),E}for(;h=n.lastChild;)n.removeChild(h);if(typeof c=="function"){var S=c;c=function(){var j=_u(A);S.call(j)}}var A=Wd(n,0,!1,null,null,!1,!1,"",Mm);return n._reactRootContainer=A,n[qr]=A.current,va(n.nodeType===8?n.parentNode:n),wi(function(){vu(r,A,a,c)}),A}function xu(n,r,a,c,h){var f=a._reactRootContainer;if(f){var E=f;if(typeof h=="function"){var S=h;h=function(){var A=_u(E);S.call(A)}}vu(r,E,n,h)}else E=aw(a,r,n,h,c);return _u(E)}sa=function(n){switch(n.tag){case 3:var r=n.stateNode;if(r.current.memoizedState.isDehydrated){var a=qe(r.pendingLanes);a!==0&&(ra(r,a|1),cn(r,Ze()),(Be&6)===0&&(xo=Ze()+500,Is()))}break;case 13:wi(function(){var c=Qr(n,1);if(c!==null){var h=tn();tr(c,n,1,h)}}),Kd(n,1)}},Wi=function(n){if(n.tag===13){var r=Qr(n,134217728);if(r!==null){var a=tn();tr(r,n,134217728,a)}Kd(n,134217728)}},ia=function(n){if(n.tag===13){var r=bs(n),a=Qr(n,r);if(a!==null){var c=tn();tr(a,n,r,c)}Kd(n,r)}},oa=function(){return Le},aa=function(n,r){var a=Le;try{return Le=n,r()}finally{Le=a}},Wn=function(n,r,a){switch(r){case"input":if(pn(n,a),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==n&&c.form===n.form){var h=jl(c);if(!h)throw Error(t(90));kn(c),pn(c,h)}}}break;case"textarea":Bi(n,a);break;case"select":r=a.value,r!=null&&mn(n,!!a.multiple,r,!1)}},ht=Ud,Rt=wi;var lw={usingClientEntryPoint:!1,Events:[Ea,lo,jl,we,Qe,Ud]},Oa={findFiberByHostInstance:hi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uw={bundleType:Oa.bundleType,version:Oa.version,rendererPackageName:Oa.rendererPackageName,rendererConfig:Oa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ne.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=El(n),n===null?null:n.stateNode},findFiberByHostInstance:Oa.findFiberByHostInstance||ow,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tu.isDisabled&&Tu.supportsFiber)try{ri=Tu.inject(uw),yn=Tu}catch{}}return dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lw,dn.createPortal=function(n,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qd(r))throw Error(t(200));return iw(n,r,null,a)},dn.createRoot=function(n,r){if(!Qd(n))throw Error(t(299));var a=!1,c="",h=Fm;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),r=Wd(n,1,!1,null,null,a,!1,c,h),n[qr]=r.current,va(n.nodeType===8?n.parentNode:n),new Gd(r)},dn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=El(r),n=n===null?null:n.stateNode,n},dn.flushSync=function(n){return wi(n)},dn.hydrate=function(n,r,a){if(!Eu(r))throw Error(t(200));return xu(null,n,r,!0,a)},dn.hydrateRoot=function(n,r,a){if(!Qd(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,h=!1,f="",E=Fm;if(a!=null&&(a.unstable_strictMode===!0&&(h=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(E=a.onRecoverableError)),r=Vm(r,null,n,1,a??null,h,!1,f,E),n[qr]=r.current,va(n),c)for(n=0;n<c.length;n++)a=c[n],h=a._getVersion,h=h(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,h]:r.mutableSourceEagerHydrationData.push(a,h);return new wu(r)},dn.render=function(n,r,a){if(!Eu(r))throw Error(t(200));return xu(null,n,r,!1,a)},dn.unmountComponentAtNode=function(n){if(!Eu(n))throw Error(t(40));return n._reactRootContainer?(wi(function(){xu(null,null,n,!1,function(){n._reactRootContainer=null,n[qr]=null})}),!0):!1},dn.unstable_batchedUpdates=Ud,dn.unstable_renderSubtreeIntoContainer=function(n,r,a,c){if(!Eu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return xu(n,r,a,!1,c)},dn.version="18.3.1-next-f1338f8080-20240426",dn}var qm;function ky(){if(qm)return Jd.exports;qm=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Jd.exports=gw(),Jd.exports}var Wm;function yw(){if(Wm)return Iu;Wm=1;var s=ky();return Iu.createRoot=s.createRoot,Iu.hydrateRoot=s.hydrateRoot,Iu}var vw=yw(),Oe=jh();const te=Sy(Oe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ww=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),Km=s=>{const e=ww(s);return e.charAt(0).toUpperCase()+e.slice(1)},Cy=(...s)=>s.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ew={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xw=Oe.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:u,iconNode:d,...m},g)=>Oe.createElement("svg",{ref:g,...Ew,width:e,height:e,stroke:s,strokeWidth:i?Number(t)*24/Number(e):t,className:Cy("lucide",o),...m},[...d.map(([y,x])=>Oe.createElement(y,x)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=(s,e)=>{const t=Oe.forwardRef(({className:i,...o},u)=>Oe.createElement(xw,{ref:u,iconNode:e,className:Cy(`lucide-${_w(Km(s))}`,`lucide-${s}`,i),...o}));return t.displayName=Km(s),t};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tw=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],zo=zn("arrow-left",Tw);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iw=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Sw=zn("download",Iw);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kw=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Cw=zn("file-text",kw);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aw=[["path",{d:"M5 12h14",key:"1ays0h"}]],Rw=zn("minus",Aw);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Nw=zn("package",bw);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pw=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Dw=zn("plus",Pw);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vw=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],lc=zn("search",Vw);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ow=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Fw=zn("settings",Ow);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mw=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Lw=zn("shopping-cart",Mw);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jw=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Su=zn("trash-2",jw);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uw=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],zw=zn("truck",Uw);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bw=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Uh=zn("x",Bw);/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w=()=>{};var Gm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay=function(s){const e=[];let t=0;for(let i=0;i<s.length;i++){let o=s.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},Hw=function(s){const e=[];let t=0,i=0;for(;t<s.length;){const o=s[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[t++];e[i++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[t++],d=s[t++],m=s[t++],g=((o&7)<<18|(u&63)<<12|(d&63)<<6|m&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const u=s[t++],d=s[t++];e[i++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},Ry={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<s.length;o+=3){const u=s[o],d=o+1<s.length,m=d?s[o+1]:0,g=o+2<s.length,y=g?s[o+2]:0,x=u>>2,_=(u&3)<<4|m>>4;let R=(m&15)<<2|y>>6,z=y&63;g||(z=64,d||(R=64)),i.push(t[x],t[_],t[R],t[z])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(Ay(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):Hw(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<s.length;){const u=t[s.charAt(o++)],m=o<s.length?t[s.charAt(o)]:0;++o;const y=o<s.length?t[s.charAt(o)]:64;++o;const _=o<s.length?t[s.charAt(o)]:64;if(++o,u==null||m==null||y==null||_==null)throw new qw;const R=u<<2|m>>4;if(i.push(R),y!==64){const z=m<<4&240|y>>2;if(i.push(z),_!==64){const K=y<<6&192|_;i.push(K)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class qw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ww=function(s){const e=Ay(s);return Ry.encodeByteArray(e,!0)},$u=function(s){return Ww(s).replace(/\./g,"")},by=function(s){try{return Ry.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw=()=>Kw().__FIREBASE_DEFAULTS__,Qw=()=>{if(typeof process>"u"||typeof Gm>"u")return;const s=Gm.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},Yw=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&by(s[1]);return e&&JSON.parse(e)},uc=()=>{try{return $w()||Gw()||Qw()||Yw()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Ny=s=>uc()?.emulatorHosts?.[s],Xw=s=>{const e=Ny(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Py=()=>uc()?.config,Dy=s=>uc()?.[`_${s}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bo(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Vy(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[$u(JSON.stringify(t)),$u(JSON.stringify(d)),""].join(".")}const $a={};function eE(){const s={prod:[],emulator:[]};for(const e of Object.keys($a))$a[e]?s.emulator.push(e):s.prod.push(e);return s}function tE(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let Qm=!1;function Oy(s,e){if(typeof window>"u"||typeof document>"u"||!Bo(window.location.host)||$a[s]===e||$a[s]||Qm)return;$a[s]=e;function t(R){return`__firebase__banner__${R}`}const i="__firebase__banner",u=eE().prod.length>0;function d(){const R=document.getElementById(i);R&&R.remove()}function m(R){R.style.display="flex",R.style.background="#7faaf0",R.style.position="fixed",R.style.bottom="5px",R.style.left="5px",R.style.padding=".5em",R.style.borderRadius="5px",R.style.alignItems="center"}function g(R,z){R.setAttribute("width","24"),R.setAttribute("id",z),R.setAttribute("height","24"),R.setAttribute("viewBox","0 0 24 24"),R.setAttribute("fill","none"),R.style.marginLeft="-6px"}function y(){const R=document.createElement("span");return R.style.cursor="pointer",R.style.marginLeft="16px",R.style.fontSize="24px",R.innerHTML=" &times;",R.onclick=()=>{Qm=!0,d()},R}function x(R,z){R.setAttribute("id",z),R.innerText="Learn more",R.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",R.setAttribute("target","__blank"),R.style.paddingLeft="5px",R.style.textDecoration="underline"}function _(){const R=tE(i),z=t("text"),K=document.getElementById(z)||document.createElement("span"),J=t("learnmore"),B=document.getElementById(J)||document.createElement("a"),ne=t("preprendIcon"),ge=document.getElementById(ne)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(R.created){const G=R.element;m(G),x(B,J);const Ne=y();g(ge,ne),G.append(ge,K,B,Ne),document.body.appendChild(G)}u?(K.innerText="Preview backend disconnected.",ge.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ge.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,K.innerText="Preview backend running in this workspace."),K.setAttribute("id",z)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xt())}function rE(){const s=uc()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sE(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function iE(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function oE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aE(){const s=Xt();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function lE(){return!rE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uE(){try{return typeof indexedDB=="object"}catch{return!1}}function cE(){return new Promise((s,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),s(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE="FirebaseError";class os extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=dE,Object.setPrototypeOf(this,os.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ol.prototype.create)}}class ol{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?hE(u,i):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new os(o,m,i)}}function hE(s,e){return s.replace(fE,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const fE=/\{\$([^}]+)}/g;function pE(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function bi(s,e){if(s===e)return!0;const t=Object.keys(s),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const u=s[o],d=e[o];if(Ym(u)&&Ym(d)){if(!bi(u,d))return!1}else if(u!==d)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Ym(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al(s){const e=[];for(const[t,i]of Object.entries(s))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ma(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,u]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function La(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function mE(s,e){const t=new gE(s,e);return t.subscribe.bind(t)}class gE{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");yE(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=th),o.error===void 0&&(o.error=th),o.complete===void 0&&(o.complete=th);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yE(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function th(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(s){return s&&s._delegate?s._delegate:s}class Ni{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Jw;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wE(e))try{this.getOrInitializeService({instanceIdentifier:Ii})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});i.resolve(u)}catch{}}}}clearInstance(e=Ii){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ii){return this.instances.has(e)}getOptions(e=Ii){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[u,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);i===m&&d.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const u=this.instances.get(i);return u&&e(u,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:_E(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ii){return this.component?this.component.multipleInstances?e:Ii:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _E(s){return s===Ii?void 0:s}function wE(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new vE(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ve||(Ve={}));const xE={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},TE=Ve.INFO,IE={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},SE=(s,e,...t)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),o=IE[e];if(o)console[o](`[${i}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zh{constructor(e){this.name=e,this._logLevel=TE,this._logHandler=SE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const kE=(s,e)=>e.some(t=>s instanceof t);let Xm,Jm;function CE(){return Xm||(Xm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AE(){return Jm||(Jm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Fy=new WeakMap,fh=new WeakMap,My=new WeakMap,nh=new WeakMap,Bh=new WeakMap;function RE(s){const e=new Promise((t,i)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",d)},u=()=>{t(Us(s.result)),o()},d=()=>{i(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&Fy.set(t,s)}).catch(()=>{}),Bh.set(e,s),e}function bE(s){if(fh.has(s))return;const e=new Promise((t,i)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",d),s.removeEventListener("abort",d)},u=()=>{t(),o()},d=()=>{i(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",d),s.addEventListener("abort",d)});fh.set(s,e)}let ph={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return fh.get(s);if(e==="objectStoreNames")return s.objectStoreNames||My.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Us(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function NE(s){ph=s(ph)}function PE(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=s.call(rh(this),e,...t);return My.set(i,e.sort?e.sort():[e]),Us(i)}:AE().includes(s)?function(...e){return s.apply(rh(this),e),Us(Fy.get(this))}:function(...e){return Us(s.apply(rh(this),e))}}function DE(s){return typeof s=="function"?PE(s):(s instanceof IDBTransaction&&bE(s),kE(s,CE())?new Proxy(s,ph):s)}function Us(s){if(s instanceof IDBRequest)return RE(s);if(nh.has(s))return nh.get(s);const e=DE(s);return e!==s&&(nh.set(s,e),Bh.set(e,s)),e}const rh=s=>Bh.get(s);function VE(s,e,{blocked:t,upgrade:i,blocking:o,terminated:u}={}){const d=indexedDB.open(s,e),m=Us(d);return i&&d.addEventListener("upgradeneeded",g=>{i(Us(d.result),g.oldVersion,g.newVersion,Us(d.transaction),g)}),t&&d.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const OE=["get","getKey","getAll","getAllKeys","count"],FE=["put","add","delete","clear"],sh=new Map;function Zm(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(sh.get(e))return sh.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=FE.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||OE.includes(t)))return;const u=async function(d,...m){const g=this.transaction(d,o?"readwrite":"readonly");let y=g.store;return i&&(y=y.index(m.shift())),(await Promise.all([y[t](...m),o&&g.done]))[0]};return sh.set(e,u),u}NE(s=>({...s,get:(e,t,i)=>Zm(e,t)||s.get(e,t,i),has:(e,t)=>!!Zm(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(LE(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function LE(s){return s.getComponent()?.type==="VERSION"}const mh="@firebase/app",eg="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=new zh("@firebase/app"),jE="@firebase/app-compat",UE="@firebase/analytics-compat",zE="@firebase/analytics",BE="@firebase/app-check-compat",$E="@firebase/app-check",HE="@firebase/auth",qE="@firebase/auth-compat",WE="@firebase/database",KE="@firebase/data-connect",GE="@firebase/database-compat",QE="@firebase/functions",YE="@firebase/functions-compat",XE="@firebase/installations",JE="@firebase/installations-compat",ZE="@firebase/messaging",ex="@firebase/messaging-compat",tx="@firebase/performance",nx="@firebase/performance-compat",rx="@firebase/remote-config",sx="@firebase/remote-config-compat",ix="@firebase/storage",ox="@firebase/storage-compat",ax="@firebase/firestore",lx="@firebase/ai",ux="@firebase/firestore-compat",cx="firebase",dx="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh="[DEFAULT]",hx={[mh]:"fire-core",[jE]:"fire-core-compat",[zE]:"fire-analytics",[UE]:"fire-analytics-compat",[$E]:"fire-app-check",[BE]:"fire-app-check-compat",[HE]:"fire-auth",[qE]:"fire-auth-compat",[WE]:"fire-rtdb",[KE]:"fire-data-connect",[GE]:"fire-rtdb-compat",[QE]:"fire-fn",[YE]:"fire-fn-compat",[XE]:"fire-iid",[JE]:"fire-iid-compat",[ZE]:"fire-fcm",[ex]:"fire-fcm-compat",[tx]:"fire-perf",[nx]:"fire-perf-compat",[rx]:"fire-rc",[sx]:"fire-rc-compat",[ix]:"fire-gcs",[ox]:"fire-gcs-compat",[ax]:"fire-fst",[ux]:"fire-fst-compat",[lx]:"fire-vertex","fire-js":"fire-js",[cx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hu=new Map,fx=new Map,yh=new Map;function tg(s,e){try{s.container.addComponent(e)}catch(t){ns.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function Vo(s){const e=s.name;if(yh.has(e))return ns.debug(`There were multiple attempts to register component ${e}.`),!1;yh.set(e,s);for(const t of Hu.values())tg(t,s);for(const t of fx.values())tg(t,s);return!0}function $h(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function Ln(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zs=new ol("app","Firebase",px);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ni("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o=dx;function Ly(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const i={name:gh,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw zs.create("bad-app-name",{appName:String(o)});if(t||(t=Py()),!t)throw zs.create("no-options");const u=Hu.get(o);if(u){if(bi(t,u.options)&&bi(i,u.config))return u;throw zs.create("duplicate-app",{appName:o})}const d=new EE(o);for(const g of yh.values())d.addComponent(g);const m=new mx(t,i,d);return Hu.set(o,m),m}function jy(s=gh){const e=Hu.get(s);if(!e&&s===gh&&Py())return Ly();if(!e)throw zs.create("no-app",{appName:s});return e}function Bs(s,e,t){let i=hx[s]??s;t&&(i+=`-${t}`);const o=i.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const d=[`Unable to register library "${i}" with version "${e}":`];o&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ns.warn(d.join(" "));return}Vo(new Ni(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx="firebase-heartbeat-database",yx=1,Qa="firebase-heartbeat-store";let ih=null;function Uy(){return ih||(ih=VE(gx,yx,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Qa)}catch(t){console.warn(t)}}}}).catch(s=>{throw zs.create("idb-open",{originalErrorMessage:s.message})})),ih}async function vx(s){try{const t=(await Uy()).transaction(Qa),i=await t.objectStore(Qa).get(zy(s));return await t.done,i}catch(e){if(e instanceof os)ns.warn(e.message);else{const t=zs.create("idb-get",{originalErrorMessage:e?.message});ns.warn(t.message)}}}async function ng(s,e){try{const i=(await Uy()).transaction(Qa,"readwrite");await i.objectStore(Qa).put(e,zy(s)),await i.done}catch(t){if(t instanceof os)ns.warn(t.message);else{const i=zs.create("idb-set",{originalErrorMessage:t?.message});ns.warn(i.message)}}}function zy(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x=1024,wx=30;class Ex{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Tx(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=rg();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>wx){const o=Ix(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ns.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=rg(),{heartbeatsToSend:t,unsentEntries:i}=xx(this._heartbeatsCache.heartbeats),o=$u(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return ns.warn(e),""}}}function rg(){return new Date().toISOString().substring(0,10)}function xx(s,e=_x){const t=[];let i=s.slice();for(const o of s){const u=t.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),sg(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),sg(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class Tx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uE()?cE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await vx(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return ng(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return ng(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function sg(s){return $u(JSON.stringify({version:2,heartbeats:s})).length}function Ix(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let i=1;i<s.length;i++)s[i].date<t&&(t=s[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(s){Vo(new Ni("platform-logger",e=>new ME(e),"PRIVATE")),Vo(new Ni("heartbeat",e=>new Ex(e),"PRIVATE")),Bs(mh,eg,s),Bs(mh,eg,"esm2020"),Bs("fire-js","")}Sx("");function By(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kx=By,$y=new ol("auth","Firebase",By());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qu=new zh("@firebase/auth");function Cx(s,...e){qu.logLevel<=Ve.WARN&&qu.warn(`Auth (${$o}): ${s}`,...e)}function Du(s,...e){qu.logLevel<=Ve.ERROR&&qu.error(`Auth (${$o}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(s,...e){throw Hh(s,...e)}function Ar(s,...e){return Hh(s,...e)}function Hy(s,e,t){const i={...kx(),[e]:t};return new ol("auth","Firebase",i).create(e,{appName:s.name})}function ts(s){return Hy(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Hh(s,...e){if(typeof s!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(t,...i)}return $y.create(s,...e)}function xe(s,e,...t){if(!s)throw Hh(e,...t)}function Zr(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Du(e),new Error(e)}function rs(s,e){s||Zr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vh(){return typeof self<"u"&&self.location?.href||""}function Ax(){return ig()==="http:"||ig()==="https:"}function ig(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ax()||iE()||"connection"in navigator)?navigator.onLine:!0}function bx(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,t){this.shortDelay=e,this.longDelay=t,rs(t>e,"Short delay should be less than long delay!"),this.isMobile=nE()||oE()}get(){return Rx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(s,e){rs(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Dx=new ll(3e4,6e4);function Xs(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Js(s,e,t,i,o={}){return Wy(s,o,async()=>{let u={},d={};i&&(e==="GET"?d=i:u={body:JSON.stringify(i)});const m=al({key:s.config.apiKey,...d}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:g,...u};return sE()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&Bo(s.emulatorConfig.host)&&(y.credentials="include"),qy.fetch()(await Ky(s,s.config.apiHost,t,m),y)})}async function Wy(s,e,t){s._canInitEmulator=!1;const i={...Nx,...e};try{const o=new Ox(s),u=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw ku(s,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const m=u.ok?d.errorMessage:d.error.message,[g,y]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw ku(s,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw ku(s,"email-already-in-use",d);if(g==="USER_DISABLED")throw ku(s,"user-disabled",d);const x=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Hy(s,x,y);sr(s,x)}}catch(o){if(o instanceof os)throw o;sr(s,"network-request-failed",{message:String(o)})}}async function ul(s,e,t,i,o={}){const u=await Js(s,e,t,i,o);return"mfaPendingCredential"in u&&sr(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function Ky(s,e,t,i){const o=`${e}${t}?${i}`,u=s,d=u.config.emulator?qh(s.config,o):`${s.config.apiScheme}://${o}`;return Px.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function Vx(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ox{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ar(this.auth,"network-request-failed")),Dx.get())})}}function ku(s,e,t){const i={appName:s.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Ar(s,e,i);return o.customData._tokenResponse=t,o}function og(s){return s!==void 0&&s.enterprise!==void 0}class Fx{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Vx(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Mx(s,e){return Js(s,"GET","/v2/recaptchaConfig",Xs(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lx(s,e){return Js(s,"POST","/v1/accounts:delete",e)}async function Wu(s,e){return Js(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function jx(s,e=!1){const t=nn(s),i=await t.getIdToken(e),o=Wh(i);xe(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u?.sign_in_provider;return{claims:o,token:i,authTime:Ha(oh(o.auth_time)),issuedAtTime:Ha(oh(o.iat)),expirationTime:Ha(oh(o.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function oh(s){return Number(s)*1e3}function Wh(s){const[e,t,i]=s.split(".");if(e===void 0||t===void 0||i===void 0)return Du("JWT malformed, contained fewer than 3 sections"),null;try{const o=by(t);return o?JSON.parse(o):(Du("Failed to decode base64 JWT payload"),null)}catch(o){return Du("Caught error parsing JWT payload as JSON",o?.toString()),null}}function ag(s){const e=Wh(s);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ya(s,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof os&&Ux(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function Ux({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ha(this.lastLoginAt),this.creationTime=Ha(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ku(s){const e=s.auth,t=await s.getIdToken(),i=await Ya(s,Wu(e,{idToken:t}));xe(i?.users.length,e,"internal-error");const o=i.users[0];s._notifyReloadListener(o);const u=o.providerUserInfo?.length?Gy(o.providerUserInfo):[],d=$x(s.providerData,u),m=s.isAnonymous,g=!(s.email&&o.passwordHash)&&!d?.length,y=m?g:!1,x={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new _h(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(s,x)}async function Bx(s){const e=nn(s);await Ku(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $x(s,e){return[...s.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Gy(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hx(s,e){const t=await Wy(s,{},async()=>{const i=al({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,d=await Ky(s,o,"/v1/token",`key=${u}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:i};return s.emulatorConfig&&Bo(s.emulatorConfig.host)&&(g.credentials="include"),qy.fetch()(d,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function qx(s,e){return Js(s,"POST","/v2/accounts:revokeToken",Xs(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ag(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const t=ag(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:u}=await Hx(e,t);this.updateTokensAndExpiration(i,o,Number(u))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:u}=t,d=new Ro;return i&&(xe(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),o&&(xe(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(xe(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ro,this.toJSON())}_performRefresh(){return Zr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vs(s,e){xe(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class nr{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new zx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new _h(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Ya(this,this.stsTokenManager.getToken(this.auth,e));return xe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return jx(this,e)}reload(){return Bx(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new nr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Ku(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ln(this.auth.app))return Promise.reject(ts(this.auth));const e=await this.getIdToken();return await Ya(this,Lx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,u=t.phoneNumber??void 0,d=t.photoURL??void 0,m=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,x=t.lastLoginAt??void 0,{uid:_,emailVerified:R,isAnonymous:z,providerData:K,stsTokenManager:J}=t;xe(_&&J,e,"internal-error");const B=Ro.fromJSON(this.name,J);xe(typeof _=="string",e,"internal-error"),Vs(i,e.name),Vs(o,e.name),xe(typeof R=="boolean",e,"internal-error"),xe(typeof z=="boolean",e,"internal-error"),Vs(u,e.name),Vs(d,e.name),Vs(m,e.name),Vs(g,e.name),Vs(y,e.name),Vs(x,e.name);const ne=new nr({uid:_,auth:e,email:o,emailVerified:R,displayName:i,isAnonymous:z,photoURL:d,phoneNumber:u,tenantId:m,stsTokenManager:B,createdAt:y,lastLoginAt:x});return K&&Array.isArray(K)&&(ne.providerData=K.map(ge=>({...ge}))),g&&(ne._redirectEventId=g),ne}static async _fromIdTokenResponse(e,t,i=!1){const o=new Ro;o.updateFromServerResponse(t);const u=new nr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Ku(u),u}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];xe(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?Gy(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!u?.length,m=new Ro;m.updateFromIdToken(i);const g=new nr({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new _h(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg=new Map;function es(s){rs(s instanceof Function,"Expected a class definition");let e=lg.get(s);return e?(rs(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,lg.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Qy.type="NONE";const ug=Qy;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(s,e,t){return`firebase:${s}:${e}:${t}`}class bo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:u}=this.auth;this.fullUserKey=Vu(this.userKey,o.apiKey,u),this.fullPersistenceKey=Vu("persistence",o.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Wu(this.auth,{idToken:e}).catch(()=>{});return t?nr._fromGetAccountInfoResponse(this.auth,t,e):null}return nr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new bo(es(ug),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||es(ug);const d=Vu(i,e.config.apiKey,e.name);let m=null;for(const y of t)try{const x=await y._get(d);if(x){let _;if(typeof x=="string"){const R=await Wu(e,{idToken:x}).catch(()=>{});if(!R)break;_=await nr._fromGetAccountInfoResponse(e,R,x)}else _=nr._fromJSON(e,x);y!==u&&(m=_),u=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new bo(u,e,i):(u=g[0],m&&await u._set(d,m.toJSON()),await Promise.all(t.map(async y=>{if(y!==u)try{await y._remove(d)}catch{}})),new bo(u,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Zy(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Yy(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tv(e))return"Blackberry";if(nv(e))return"Webos";if(Xy(e))return"Safari";if((e.includes("chrome/")||Jy(e))&&!e.includes("edge/"))return"Chrome";if(ev(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(t);if(i?.length===2)return i[1]}return"Other"}function Yy(s=Xt()){return/firefox\//i.test(s)}function Xy(s=Xt()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Jy(s=Xt()){return/crios\//i.test(s)}function Zy(s=Xt()){return/iemobile/i.test(s)}function ev(s=Xt()){return/android/i.test(s)}function tv(s=Xt()){return/blackberry/i.test(s)}function nv(s=Xt()){return/webos/i.test(s)}function Kh(s=Xt()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function Wx(s=Xt()){return Kh(s)&&!!window.navigator?.standalone}function Kx(){return aE()&&document.documentMode===10}function rv(s=Xt()){return Kh(s)||ev(s)||nv(s)||tv(s)||/windows phone/i.test(s)||Zy(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(s,e=[]){let t;switch(s){case"Browser":t=cg(Xt());break;case"Worker":t=`${cg(Xt())}-${s}`;break;default:t=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${$o}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=u=>new Promise((d,m)=>{try{const g=e(u);d(g)}catch(g){m(g)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qx(s,e={}){return Js(s,"GET","/v2/passwordPolicy",Xs(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx=6;class Xx{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Yx,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dg(this),this.idTokenSubscription=new dg(this),this.beforeStateQueue=new Gx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$y,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=es(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await bo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Wu(this,{idToken:e}),i=await nr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ln(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,d=i?._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===d)&&m?.user&&(i=m.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ku(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=bx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ln(this.app))return Promise.reject(ts(this));const t=e?nn(e):null;return t&&xe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ln(this.app)?Promise.reject(ts(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ln(this.app)?Promise.reject(ts(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(es(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Qx(this),t=new Xx(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ol("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await qx(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&es(e)||this._popupRedirectResolver;xe(t,this,"argument-error"),this.redirectPersistenceManager=await bo.create(this,[es(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(m,this,"internal-error"),m.then(()=>{d||u(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,o);return()=>{d=!0,g()}}else{const g=e.addObserver(t);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Ln(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Cx(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Fi(s){return nn(s)}class dg{constructor(e){this.auth=e,this.observer=null,this.addObserver=mE(t=>this.observer=t)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Zx(s){cc=s}function iv(s){return cc.loadJS(s)}function e1(){return cc.recaptchaEnterpriseScript}function t1(){return cc.gapiScript}function n1(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class r1{constructor(){this.enterprise=new s1}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class s1{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const i1="recaptcha-enterprise",ov="NO_RECAPTCHA";class o1{constructor(e){this.type=i1,this.auth=Fi(e)}async verify(e="verify",t=!1){async function i(u){if(!t){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,m)=>{Mx(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const y=new Fx(g);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,d(y.siteKey)}}).catch(g=>{m(g)})})}function o(u,d,m){const g=window.grecaptcha;og(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(y=>{d(y)}).catch(()=>{d(ov)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new r1().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{i(this.auth).then(m=>{if(!t&&og(window.grecaptcha))o(m,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=e1();g.length!==0&&(g+=m),iv(g).then(()=>{o(m,u,d)}).catch(y=>{d(y)})}}).catch(m=>{d(m)})})}}async function hg(s,e,t,i=!1,o=!1){const u=new o1(s);let d;if(o)d=ov;else try{d=await u.verify(t)}catch{d=await u.verify(t,!0)}const m={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,y=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return i?Object.assign(m,{captchaResp:d}):Object.assign(m,{captchaResponse:d}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function wh(s,e,t,i,o){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await hg(s,e,t,t==="getOobCode");return i(s,u)}else return i(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await hg(s,e,t,t==="getOobCode");return i(s,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(s,e){const t=$h(s,"auth");if(t.isInitialized()){const o=t.getImmediate(),u=t.getOptions();if(bi(u,e??{}))return o;sr(o,"already-initialized")}return t.initialize({options:e})}function l1(s,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(es);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function u1(s,e,t){const i=Fi(s);xe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,u=av(e),{host:d,port:m}=c1(e),g=m===null?"":`:${m}`,y={url:`${u}//${d}${g}/`},x=Object.freeze({host:d,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){xe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),xe(bi(y,i.config.emulator)&&bi(x,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=x,i.settings.appVerificationDisabledForTesting=!0,Bo(d)?(Vy(`${u}//${d}${g}`),Oy("Auth",!0)):d1()}function av(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function c1(s){const e=av(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const u=o[1];return{host:u,port:fg(i.substr(u.length+1))}}else{const[u,d]=i.split(":");return{host:u,port:fg(d)}}}function fg(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function d1(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Zr("not implemented")}_getIdTokenResponse(e){return Zr("not implemented")}_linkToIdToken(e,t){return Zr("not implemented")}_getReauthenticationResolver(e){return Zr("not implemented")}}async function h1(s,e){return Js(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f1(s,e){return ul(s,"POST","/v1/accounts:signInWithPassword",Xs(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p1(s,e){return ul(s,"POST","/v1/accounts:signInWithEmailLink",Xs(s,e))}async function m1(s,e){return ul(s,"POST","/v1/accounts:signInWithEmailLink",Xs(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa extends Gh{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Xa(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Xa(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wh(e,t,"signInWithPassword",f1);case"emailLink":return p1(e,{email:this._email,oobCode:this._password});default:sr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wh(e,i,"signUpPassword",h1);case"emailLink":return m1(e,{idToken:t,email:this._email,oobCode:this._password});default:sr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function No(s,e){return ul(s,"POST","/v1/accounts:signInWithIdp",Xs(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1="http://localhost";class Pi extends Gh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Pi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):sr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...u}=t;if(!i||!o)return null;const d=new Pi(i,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return No(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,No(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,No(e,t)}buildRequest(){const e={requestUri:g1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=al(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function v1(s){const e=Ma(La(s)).link,t=e?Ma(La(e)).deep_link_id:null,i=Ma(La(s)).deep_link_id;return(i?Ma(La(i)).link:null)||i||t||e||s}class Qh{constructor(e){const t=Ma(La(e)),i=t.apiKey??null,o=t.oobCode??null,u=y1(t.mode??null);xe(i&&o&&u,"argument-error"),this.apiKey=i,this.operation=u,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=v1(e);try{return new Qh(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(){this.providerId=Ho.PROVIDER_ID}static credential(e,t){return Xa._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Qh.parseLink(t);return xe(i,"argument-error"),Xa._fromEmailAndCode(e,i.code,i.tenantId)}}Ho.PROVIDER_ID="password";Ho.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ho.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl extends lv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os extends cl{constructor(){super("facebook.com")}static credential(e){return Pi._fromParams({providerId:Os.PROVIDER_ID,signInMethod:Os.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Os.credentialFromTaggedObject(e)}static credentialFromError(e){return Os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Os.credential(e.oauthAccessToken)}catch{return null}}}Os.FACEBOOK_SIGN_IN_METHOD="facebook.com";Os.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends cl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Pi._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Fs.credential(t,i)}catch{return null}}}Fs.GOOGLE_SIGN_IN_METHOD="google.com";Fs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms extends cl{constructor(){super("github.com")}static credential(e){return Pi._fromParams({providerId:Ms.PROVIDER_ID,signInMethod:Ms.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ms.credentialFromTaggedObject(e)}static credentialFromError(e){return Ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ms.credential(e.oauthAccessToken)}catch{return null}}}Ms.GITHUB_SIGN_IN_METHOD="github.com";Ms.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls extends cl{constructor(){super("twitter.com")}static credential(e,t){return Pi._fromParams({providerId:Ls.PROVIDER_ID,signInMethod:Ls.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ls.credentialFromTaggedObject(e)}static credentialFromError(e){return Ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Ls.credential(t,i)}catch{return null}}}Ls.TWITTER_SIGN_IN_METHOD="twitter.com";Ls.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _1(s,e){return ul(s,"POST","/v1/accounts:signUp",Xs(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const u=await nr._fromIdTokenResponse(e,i,o),d=pg(i);return new Di({user:u,providerId:d,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=pg(i);return new Di({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function pg(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu extends os{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Gu.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Gu(e,t,i,o)}}function uv(s,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Gu._fromErrorAndOperation(s,u,e,i):u})}async function w1(s,e,t=!1){const i=await Ya(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return Di._forOperation(s,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E1(s,e,t=!1){const{auth:i}=s;if(Ln(i.app))return Promise.reject(ts(i));const o="reauthenticate";try{const u=await Ya(s,uv(i,o,e,s),t);xe(u.idToken,i,"internal-error");const d=Wh(u.idToken);xe(d,i,"internal-error");const{sub:m}=d;return xe(s.uid===m,i,"user-mismatch"),Di._forOperation(s,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&sr(i,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cv(s,e,t=!1){if(Ln(s.app))return Promise.reject(ts(s));const i="signIn",o=await uv(s,i,e),u=await Di._fromIdTokenResponse(s,i,o);return t||await s._updateCurrentUser(u.user),u}async function x1(s,e){return cv(Fi(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dv(s){const e=Fi(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function T1(s,e,t){if(Ln(s.app))return Promise.reject(ts(s));const i=Fi(s),d=await wh(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_1).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&dv(s),g}),m=await Di._fromIdTokenResponse(i,"signIn",d);return await i._updateCurrentUser(m.user),m}function I1(s,e,t){return Ln(s.app)?Promise.reject(ts(s)):x1(nn(s),Ho.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&dv(s),i})}function S1(s,e,t,i){return nn(s).onIdTokenChanged(e,t,i)}function k1(s,e,t){return nn(s).beforeAuthStateChanged(e,t)}function hv(s,e,t,i){return nn(s).onAuthStateChanged(e,t,i)}function C1(s){return nn(s).signOut()}const Qu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Qu,"1"),this.storage.removeItem(Qu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1=1e3,R1=10;class pv extends fv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,m,g)=>{this.notifyListeners(d,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(i);!t&&this.localCache[i]===d||this.notifyListeners(i,d)},u=this.storage.getItem(i);Kx()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,R1):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},A1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}pv.type="LOCAL";const b1=pv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv extends fv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}mv.type="SESSION";const gv=mv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new dc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:u}=t.data,d=this.handlersMap[o];if(!d?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const m=Array.from(d).map(async y=>y(t.origin,u)),g=await N1(m);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}dc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(s="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return s+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((m,g)=>{const y=Yh("",20);o.port1.start();const x=setTimeout(()=>{g(new Error("unsupported_event"))},i);d={messageChannel:o,onMessage(_){const R=_;if(R.data.eventId===y)switch(R.data.status){case"ack":clearTimeout(x),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(R.data.response);break;default:clearTimeout(x),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(){return window}function D1(s){Rr().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(){return typeof Rr().WorkerGlobalScope<"u"&&typeof Rr().importScripts=="function"}async function V1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function O1(){return navigator?.serviceWorker?.controller||null}function F1(){return yv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv="firebaseLocalStorageDb",M1=1,Yu="firebaseLocalStorage",_v="fbase_key";class dl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function hc(s,e){return s.transaction([Yu],e?"readwrite":"readonly").objectStore(Yu)}function L1(){const s=indexedDB.deleteDatabase(vv);return new dl(s).toPromise()}function Eh(){const s=indexedDB.open(vv,M1);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(Yu,{keyPath:_v})}catch(o){t(o)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(Yu)?e(i):(i.close(),await L1(),e(await Eh()))})})}async function mg(s,e,t){const i=hc(s,!0).put({[_v]:e,value:t});return new dl(i).toPromise()}async function j1(s,e){const t=hc(s,!1).get(e),i=await new dl(t).toPromise();return i===void 0?null:i.value}function gg(s,e){const t=hc(s,!0).delete(e);return new dl(t).toPromise()}const U1=800,z1=3;class wv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Eh(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>z1)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=dc._getInstance(F1()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await V1(),!this.activeServiceWorker)return;this.sender=new P1(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||O1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Eh();return await mg(e,Qu,"1"),await gg(e,Qu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>mg(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>j1(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>gg(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=hc(o,!1).getAll();return new dl(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),U1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}wv.type="LOCAL";const B1=wv;new ll(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(s,e){return e?es(e):(xe(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh extends Gh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return No(e,this._buildIdpRequest())}_linkToIdToken(e,t){return No(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return No(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function H1(s){return cv(s.auth,new Xh(s),s.bypassAuthState)}function q1(s){const{auth:e,user:t}=s;return xe(t,e,"internal-error"),E1(t,new Xh(s),s.bypassAuthState)}async function W1(s){const{auth:e,user:t}=s;return xe(t,e,"internal-error"),w1(t,new Xh(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(e,t,i,o,u=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:u,error:d,type:m}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return H1;case"linkViaPopup":case"linkViaRedirect":return W1;case"reauthViaPopup":case"reauthViaRedirect":return q1;default:sr(this.auth,"internal-error")}}resolve(e){rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1=new ll(2e3,1e4);class Ao extends Ev{constructor(e,t,i,o,u){super(e,t,o,u),this.provider=i,this.authWindow=null,this.pollId=null,Ao.currentPopupAction&&Ao.currentPopupAction.cancel(),Ao.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xe(e,this.auth,"internal-error"),e}async onExecution(){rs(this.filter.length===1,"Popup operations only handle one event");const e=Yh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ar(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ar(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ao.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ar(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,K1.get())};e()}}Ao.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="pendingRedirect",Ou=new Map;class Q1 extends Ev{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Ou.get(this.auth._key());if(!e){try{const i=await Y1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Ou.set(this.auth._key(),e)}return this.bypassAuthState||Ou.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Y1(s,e){const t=Z1(e),i=J1(s);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function X1(s,e){Ou.set(s._key(),e)}function J1(s){return es(s._redirectPersistence)}function Z1(s){return Vu(G1,s.config.apiKey,s.name)}async function eT(s,e,t=!1){if(Ln(s.app))return Promise.reject(ts(s));const i=Fi(s),o=$1(i,e),d=await new Q1(i,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT=600*1e3;class nT{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rT(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!xv(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ar(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tT&&this.cachedEventUids.clear(),this.cachedEventUids.has(yg(e))}saveEventToCache(e){this.cachedEventUids.add(yg(e)),this.lastProcessedEventTime=Date.now()}}function yg(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function xv({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function rT(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xv(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sT(s,e={}){return Js(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oT=/^https?/;async function aT(s){if(s.config.emulator)return;const{authorizedDomains:e}=await sT(s);for(const t of e)try{if(lT(t))return}catch{}sr(s,"unauthorized-domain")}function lT(s){const e=vh(),{protocol:t,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&i===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===i}if(!oT.test(t))return!1;if(iT.test(s))return i===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT=new ll(3e4,6e4);function vg(){const s=Rr().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function cT(s){return new Promise((e,t)=>{function i(){vg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vg(),t(Ar(s,"network-request-failed"))},timeout:uT.get()})}if(Rr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Rr().gapi?.load)i();else{const o=n1("iframefcb");return Rr()[o]=()=>{gapi.load?i():t(Ar(s,"network-request-failed"))},iv(`${t1()}?onload=${o}`).catch(u=>t(u))}}).catch(e=>{throw Fu=null,e})}let Fu=null;function dT(s){return Fu=Fu||cT(s),Fu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT=new ll(5e3,15e3),fT="__/auth/iframe",pT="emulator/auth/iframe",mT={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gT=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yT(s){const e=s.config;xe(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?qh(e,pT):`https://${s.config.authDomain}/${fT}`,i={apiKey:e.apiKey,appName:s.name,v:$o},o=gT.get(s.config.apiHost);o&&(i.eid=o);const u=s._getFrameworks();return u.length&&(i.fw=u.join(",")),`${t}?${al(i).slice(1)}`}async function vT(s){const e=await dT(s),t=Rr().gapi;return xe(t,s,"internal-error"),e.open({where:document.body,url:yT(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mT,dontclear:!0},i=>new Promise(async(o,u)=>{await i.restyle({setHideOnLeave:!1});const d=Ar(s,"network-request-failed"),m=Rr().setTimeout(()=>{u(d)},hT.get());function g(){Rr().clearTimeout(m),o(i)}i.ping(g).then(g,()=>{u(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wT=500,ET=600,xT="_blank",TT="http://localhost";class _g{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function IT(s,e,t,i=wT,o=ET){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let m="";const g={..._T,width:i.toString(),height:o.toString(),top:u,left:d},y=Xt().toLowerCase();t&&(m=Jy(y)?xT:t),Yy(y)&&(e=e||TT,g.scrollbars="yes");const x=Object.entries(g).reduce((R,[z,K])=>`${R}${z}=${K},`,"");if(Wx(y)&&m!=="_self")return ST(e||"",m),new _g(null);const _=window.open(e||"",m,x);xe(_,s,"popup-blocked");try{_.focus()}catch{}return new _g(_)}function ST(s,e){const t=document.createElement("a");t.href=s,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT="__/auth/handler",CT="emulator/auth/handler",AT=encodeURIComponent("fac");async function wg(s,e,t,i,o,u){xe(s.config.authDomain,s,"auth-domain-config-required"),xe(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:i,v:$o,eventId:o};if(e instanceof lv){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",pE(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,_]of Object.entries({}))d[x]=_}if(e instanceof cl){const x=e.getScopes().filter(_=>_!=="");x.length>0&&(d.scopes=x.join(","))}s.tenantId&&(d.tid=s.tenantId);const m=d;for(const x of Object.keys(m))m[x]===void 0&&delete m[x];const g=await s._getAppCheckToken(),y=g?`#${AT}=${encodeURIComponent(g)}`:"";return`${RT(s)}?${al(m).slice(1)}${y}`}function RT({config:s}){return s.emulator?qh(s,CT):`https://${s.authDomain}/${kT}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah="webStorageSupport";class bT{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gv,this._completeRedirectFn=eT,this._overrideRedirectResult=X1}async _openPopup(e,t,i,o){rs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await wg(e,t,i,vh(),o);return IT(e,u,Yh())}async _openRedirect(e,t,i,o){await this._originValidation(e);const u=await wg(e,t,i,vh(),o);return D1(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:u}=this.eventManagers[t];return o?Promise.resolve(o):(rs(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await vT(e),i=new nT(e);return t.register("authEvent",o=>(xe(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ah,{type:ah},o=>{const u=o?.[0]?.[ah];u!==void 0&&t(!!u),sr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=aT(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return rv()||Xy()||Kh()}}const NT=bT;var Eg="@firebase/auth",xg="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function VT(s){Vo(new Ni("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=i.options;xe(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:d,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sv(s)},y=new Jx(i,o,u,g);return l1(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Vo(new Ni("auth-internal",e=>{const t=Fi(e.getProvider("auth").getImmediate());return(i=>new PT(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Bs(Eg,xg,DT(s)),Bs(Eg,xg,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT=300,FT=Dy("authIdTokenMaxAge")||OT;let Tg=null;const MT=s=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>FT)return;const o=t?.token;Tg!==o&&(Tg=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function LT(s=jy()){const e=$h(s,"auth");if(e.isInitialized())return e.getImmediate();const t=a1(s,{popupRedirectResolver:NT,persistence:[B1,b1,gv]}),i=Dy("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const d=MT(u.toString());k1(t,d,()=>d(t.currentUser)),S1(t,m=>d(m))}}const o=Ny("auth");return o&&u1(t,`http://${o}`),t}function jT(){return document.getElementsByTagName("head")?.[0]??document}Zx({loadJS(s){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=o=>{const u=Ar("internal-error");u.customData=o,t(u)},i.type="text/javascript",i.charset="UTF-8",jT().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});VT("Browser");var Ig=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $s,Tv;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,I){function C(){}C.prototype=I.prototype,b.F=I.prototype,b.prototype=new C,b.prototype.constructor=b,b.D=function(P,N,O){for(var k=Array(arguments.length-2),He=2;He<arguments.length;He++)k[He-2]=arguments[He];return I.prototype[N].apply(P,k)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(b,I,C){C||(C=0);const P=Array(16);if(typeof I=="string")for(var N=0;N<16;++N)P[N]=I.charCodeAt(C++)|I.charCodeAt(C++)<<8|I.charCodeAt(C++)<<16|I.charCodeAt(C++)<<24;else for(N=0;N<16;++N)P[N]=I[C++]|I[C++]<<8|I[C++]<<16|I[C++]<<24;I=b.g[0],C=b.g[1],N=b.g[2];let O=b.g[3],k;k=I+(O^C&(N^O))+P[0]+3614090360&4294967295,I=C+(k<<7&4294967295|k>>>25),k=O+(N^I&(C^N))+P[1]+3905402710&4294967295,O=I+(k<<12&4294967295|k>>>20),k=N+(C^O&(I^C))+P[2]+606105819&4294967295,N=O+(k<<17&4294967295|k>>>15),k=C+(I^N&(O^I))+P[3]+3250441966&4294967295,C=N+(k<<22&4294967295|k>>>10),k=I+(O^C&(N^O))+P[4]+4118548399&4294967295,I=C+(k<<7&4294967295|k>>>25),k=O+(N^I&(C^N))+P[5]+1200080426&4294967295,O=I+(k<<12&4294967295|k>>>20),k=N+(C^O&(I^C))+P[6]+2821735955&4294967295,N=O+(k<<17&4294967295|k>>>15),k=C+(I^N&(O^I))+P[7]+4249261313&4294967295,C=N+(k<<22&4294967295|k>>>10),k=I+(O^C&(N^O))+P[8]+1770035416&4294967295,I=C+(k<<7&4294967295|k>>>25),k=O+(N^I&(C^N))+P[9]+2336552879&4294967295,O=I+(k<<12&4294967295|k>>>20),k=N+(C^O&(I^C))+P[10]+4294925233&4294967295,N=O+(k<<17&4294967295|k>>>15),k=C+(I^N&(O^I))+P[11]+2304563134&4294967295,C=N+(k<<22&4294967295|k>>>10),k=I+(O^C&(N^O))+P[12]+1804603682&4294967295,I=C+(k<<7&4294967295|k>>>25),k=O+(N^I&(C^N))+P[13]+4254626195&4294967295,O=I+(k<<12&4294967295|k>>>20),k=N+(C^O&(I^C))+P[14]+2792965006&4294967295,N=O+(k<<17&4294967295|k>>>15),k=C+(I^N&(O^I))+P[15]+1236535329&4294967295,C=N+(k<<22&4294967295|k>>>10),k=I+(N^O&(C^N))+P[1]+4129170786&4294967295,I=C+(k<<5&4294967295|k>>>27),k=O+(C^N&(I^C))+P[6]+3225465664&4294967295,O=I+(k<<9&4294967295|k>>>23),k=N+(I^C&(O^I))+P[11]+643717713&4294967295,N=O+(k<<14&4294967295|k>>>18),k=C+(O^I&(N^O))+P[0]+3921069994&4294967295,C=N+(k<<20&4294967295|k>>>12),k=I+(N^O&(C^N))+P[5]+3593408605&4294967295,I=C+(k<<5&4294967295|k>>>27),k=O+(C^N&(I^C))+P[10]+38016083&4294967295,O=I+(k<<9&4294967295|k>>>23),k=N+(I^C&(O^I))+P[15]+3634488961&4294967295,N=O+(k<<14&4294967295|k>>>18),k=C+(O^I&(N^O))+P[4]+3889429448&4294967295,C=N+(k<<20&4294967295|k>>>12),k=I+(N^O&(C^N))+P[9]+568446438&4294967295,I=C+(k<<5&4294967295|k>>>27),k=O+(C^N&(I^C))+P[14]+3275163606&4294967295,O=I+(k<<9&4294967295|k>>>23),k=N+(I^C&(O^I))+P[3]+4107603335&4294967295,N=O+(k<<14&4294967295|k>>>18),k=C+(O^I&(N^O))+P[8]+1163531501&4294967295,C=N+(k<<20&4294967295|k>>>12),k=I+(N^O&(C^N))+P[13]+2850285829&4294967295,I=C+(k<<5&4294967295|k>>>27),k=O+(C^N&(I^C))+P[2]+4243563512&4294967295,O=I+(k<<9&4294967295|k>>>23),k=N+(I^C&(O^I))+P[7]+1735328473&4294967295,N=O+(k<<14&4294967295|k>>>18),k=C+(O^I&(N^O))+P[12]+2368359562&4294967295,C=N+(k<<20&4294967295|k>>>12),k=I+(C^N^O)+P[5]+4294588738&4294967295,I=C+(k<<4&4294967295|k>>>28),k=O+(I^C^N)+P[8]+2272392833&4294967295,O=I+(k<<11&4294967295|k>>>21),k=N+(O^I^C)+P[11]+1839030562&4294967295,N=O+(k<<16&4294967295|k>>>16),k=C+(N^O^I)+P[14]+4259657740&4294967295,C=N+(k<<23&4294967295|k>>>9),k=I+(C^N^O)+P[1]+2763975236&4294967295,I=C+(k<<4&4294967295|k>>>28),k=O+(I^C^N)+P[4]+1272893353&4294967295,O=I+(k<<11&4294967295|k>>>21),k=N+(O^I^C)+P[7]+4139469664&4294967295,N=O+(k<<16&4294967295|k>>>16),k=C+(N^O^I)+P[10]+3200236656&4294967295,C=N+(k<<23&4294967295|k>>>9),k=I+(C^N^O)+P[13]+681279174&4294967295,I=C+(k<<4&4294967295|k>>>28),k=O+(I^C^N)+P[0]+3936430074&4294967295,O=I+(k<<11&4294967295|k>>>21),k=N+(O^I^C)+P[3]+3572445317&4294967295,N=O+(k<<16&4294967295|k>>>16),k=C+(N^O^I)+P[6]+76029189&4294967295,C=N+(k<<23&4294967295|k>>>9),k=I+(C^N^O)+P[9]+3654602809&4294967295,I=C+(k<<4&4294967295|k>>>28),k=O+(I^C^N)+P[12]+3873151461&4294967295,O=I+(k<<11&4294967295|k>>>21),k=N+(O^I^C)+P[15]+530742520&4294967295,N=O+(k<<16&4294967295|k>>>16),k=C+(N^O^I)+P[2]+3299628645&4294967295,C=N+(k<<23&4294967295|k>>>9),k=I+(N^(C|~O))+P[0]+4096336452&4294967295,I=C+(k<<6&4294967295|k>>>26),k=O+(C^(I|~N))+P[7]+1126891415&4294967295,O=I+(k<<10&4294967295|k>>>22),k=N+(I^(O|~C))+P[14]+2878612391&4294967295,N=O+(k<<15&4294967295|k>>>17),k=C+(O^(N|~I))+P[5]+4237533241&4294967295,C=N+(k<<21&4294967295|k>>>11),k=I+(N^(C|~O))+P[12]+1700485571&4294967295,I=C+(k<<6&4294967295|k>>>26),k=O+(C^(I|~N))+P[3]+2399980690&4294967295,O=I+(k<<10&4294967295|k>>>22),k=N+(I^(O|~C))+P[10]+4293915773&4294967295,N=O+(k<<15&4294967295|k>>>17),k=C+(O^(N|~I))+P[1]+2240044497&4294967295,C=N+(k<<21&4294967295|k>>>11),k=I+(N^(C|~O))+P[8]+1873313359&4294967295,I=C+(k<<6&4294967295|k>>>26),k=O+(C^(I|~N))+P[15]+4264355552&4294967295,O=I+(k<<10&4294967295|k>>>22),k=N+(I^(O|~C))+P[6]+2734768916&4294967295,N=O+(k<<15&4294967295|k>>>17),k=C+(O^(N|~I))+P[13]+1309151649&4294967295,C=N+(k<<21&4294967295|k>>>11),k=I+(N^(C|~O))+P[4]+4149444226&4294967295,I=C+(k<<6&4294967295|k>>>26),k=O+(C^(I|~N))+P[11]+3174756917&4294967295,O=I+(k<<10&4294967295|k>>>22),k=N+(I^(O|~C))+P[2]+718787259&4294967295,N=O+(k<<15&4294967295|k>>>17),k=C+(O^(N|~I))+P[9]+3951481745&4294967295,b.g[0]=b.g[0]+I&4294967295,b.g[1]=b.g[1]+(N+(k<<21&4294967295|k>>>11))&4294967295,b.g[2]=b.g[2]+N&4294967295,b.g[3]=b.g[3]+O&4294967295}i.prototype.v=function(b,I){I===void 0&&(I=b.length);const C=I-this.blockSize,P=this.C;let N=this.h,O=0;for(;O<I;){if(N==0)for(;O<=C;)o(this,b,O),O+=this.blockSize;if(typeof b=="string"){for(;O<I;)if(P[N++]=b.charCodeAt(O++),N==this.blockSize){o(this,P),N=0;break}}else for(;O<I;)if(P[N++]=b[O++],N==this.blockSize){o(this,P),N=0;break}}this.h=N,this.o+=I},i.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var I=1;I<b.length-8;++I)b[I]=0;I=this.o*8;for(var C=b.length-8;C<b.length;++C)b[C]=I&255,I/=256;for(this.v(b),b=Array(16),I=0,C=0;C<4;++C)for(let P=0;P<32;P+=8)b[I++]=this.g[C]>>>P&255;return b};function u(b,I){var C=m;return Object.prototype.hasOwnProperty.call(C,b)?C[b]:C[b]=I(b)}function d(b,I){this.h=I;const C=[];let P=!0;for(let N=b.length-1;N>=0;N--){const O=b[N]|0;P&&O==I||(C[N]=O,P=!1)}this.g=C}var m={};function g(b){return-128<=b&&b<128?u(b,function(I){return new d([I|0],I<0?-1:0)}):new d([b|0],b<0?-1:0)}function y(b){if(isNaN(b)||!isFinite(b))return _;if(b<0)return B(y(-b));const I=[];let C=1;for(let P=0;b>=C;P++)I[P]=b/C|0,C*=4294967296;return new d(I,0)}function x(b,I){if(b.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(b.charAt(0)=="-")return B(x(b.substring(1),I));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=y(Math.pow(I,8));let P=_;for(let O=0;O<b.length;O+=8){var N=Math.min(8,b.length-O);const k=parseInt(b.substring(O,O+N),I);N<8?(N=y(Math.pow(I,N)),P=P.j(N).add(y(k))):(P=P.j(C),P=P.add(y(k)))}return P}var _=g(0),R=g(1),z=g(16777216);s=d.prototype,s.m=function(){if(J(this))return-B(this).m();let b=0,I=1;for(let C=0;C<this.g.length;C++){const P=this.i(C);b+=(P>=0?P:4294967296+P)*I,I*=4294967296}return b},s.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(K(this))return"0";if(J(this))return"-"+B(this).toString(b);const I=y(Math.pow(b,6));var C=this;let P="";for(;;){const N=Ne(C,I).g;C=ne(C,N.j(I));let O=((C.g.length>0?C.g[0]:C.h)>>>0).toString(b);if(C=N,K(C))return O+P;for(;O.length<6;)O="0"+O;P=O+P}},s.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function K(b){if(b.h!=0)return!1;for(let I=0;I<b.g.length;I++)if(b.g[I]!=0)return!1;return!0}function J(b){return b.h==-1}s.l=function(b){return b=ne(this,b),J(b)?-1:K(b)?0:1};function B(b){const I=b.g.length,C=[];for(let P=0;P<I;P++)C[P]=~b.g[P];return new d(C,~b.h).add(R)}s.abs=function(){return J(this)?B(this):this},s.add=function(b){const I=Math.max(this.g.length,b.g.length),C=[];let P=0;for(let N=0;N<=I;N++){let O=P+(this.i(N)&65535)+(b.i(N)&65535),k=(O>>>16)+(this.i(N)>>>16)+(b.i(N)>>>16);P=k>>>16,O&=65535,k&=65535,C[N]=k<<16|O}return new d(C,C[C.length-1]&-2147483648?-1:0)};function ne(b,I){return b.add(B(I))}s.j=function(b){if(K(this)||K(b))return _;if(J(this))return J(b)?B(this).j(B(b)):B(B(this).j(b));if(J(b))return B(this.j(B(b)));if(this.l(z)<0&&b.l(z)<0)return y(this.m()*b.m());const I=this.g.length+b.g.length,C=[];for(var P=0;P<2*I;P++)C[P]=0;for(P=0;P<this.g.length;P++)for(let N=0;N<b.g.length;N++){const O=this.i(P)>>>16,k=this.i(P)&65535,He=b.i(N)>>>16,st=b.i(N)&65535;C[2*P+2*N]+=k*st,ge(C,2*P+2*N),C[2*P+2*N+1]+=O*st,ge(C,2*P+2*N+1),C[2*P+2*N+1]+=k*He,ge(C,2*P+2*N+1),C[2*P+2*N+2]+=O*He,ge(C,2*P+2*N+2)}for(b=0;b<I;b++)C[b]=C[2*b+1]<<16|C[2*b];for(b=I;b<2*I;b++)C[b]=0;return new d(C,0)};function ge(b,I){for(;(b[I]&65535)!=b[I];)b[I+1]+=b[I]>>>16,b[I]&=65535,I++}function G(b,I){this.g=b,this.h=I}function Ne(b,I){if(K(I))throw Error("division by zero");if(K(b))return new G(_,_);if(J(b))return I=Ne(B(b),I),new G(B(I.g),B(I.h));if(J(I))return I=Ne(b,B(I)),new G(B(I.g),I.h);if(b.g.length>30){if(J(b)||J(I))throw Error("slowDivide_ only works with positive integers.");for(var C=R,P=I;P.l(b)<=0;)C=je(C),P=je(P);var N=Se(C,1),O=Se(P,1);for(P=Se(P,2),C=Se(C,2);!K(P);){var k=O.add(P);k.l(b)<=0&&(N=N.add(C),O=k),P=Se(P,1),C=Se(C,1)}return I=ne(b,N.j(I)),new G(N,I)}for(N=_;b.l(I)>=0;){for(C=Math.max(1,Math.floor(b.m()/I.m())),P=Math.ceil(Math.log(C)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),O=y(C),k=O.j(I);J(k)||k.l(b)>0;)C-=P,O=y(C),k=O.j(I);K(O)&&(O=R),N=N.add(O),b=ne(b,k)}return new G(N,b)}s.B=function(b){return Ne(this,b).h},s.and=function(b){const I=Math.max(this.g.length,b.g.length),C=[];for(let P=0;P<I;P++)C[P]=this.i(P)&b.i(P);return new d(C,this.h&b.h)},s.or=function(b){const I=Math.max(this.g.length,b.g.length),C=[];for(let P=0;P<I;P++)C[P]=this.i(P)|b.i(P);return new d(C,this.h|b.h)},s.xor=function(b){const I=Math.max(this.g.length,b.g.length),C=[];for(let P=0;P<I;P++)C[P]=this.i(P)^b.i(P);return new d(C,this.h^b.h)};function je(b){const I=b.g.length+1,C=[];for(let P=0;P<I;P++)C[P]=b.i(P)<<1|b.i(P-1)>>>31;return new d(C,b.h)}function Se(b,I){const C=I>>5;I%=32;const P=b.g.length-C,N=[];for(let O=0;O<P;O++)N[O]=I>0?b.i(O+C)>>>I|b.i(O+C+1)<<32-I:b.i(O+C);return new d(N,b.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Tv=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=x,$s=d}).apply(typeof Ig<"u"?Ig:typeof self<"u"?self:typeof window<"u"?window:{});var Cu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Iv,ja,Sv,Mu,xh,kv,Cv,Av;(function(){var s,e=Object.defineProperty;function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Cu=="object"&&Cu];for(var p=0;p<l.length;++p){var v=l[p];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(l,p){if(p)e:{var v=i;l=l.split(".");for(var T=0;T<l.length-1;T++){var M=l[T];if(!(M in v))break e;v=v[M]}l=l[l.length-1],T=v[l],p=p(T),p!=T&&p!=null&&e(v,l,{configurable:!0,writable:!0,value:p})}}o("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(l){return l||function(p){var v=[],T;for(T in p)Object.prototype.hasOwnProperty.call(p,T)&&v.push([T,p[T]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function m(l){var p=typeof l;return p=="object"&&l!=null||p=="function"}function g(l,p,v){return l.call.apply(l.bind,arguments)}function y(l,p,v){return y=g,y.apply(null,arguments)}function x(l,p){var v=Array.prototype.slice.call(arguments,1);return function(){var T=v.slice();return T.push.apply(T,arguments),l.apply(this,T)}}function _(l,p){function v(){}v.prototype=p.prototype,l.Z=p.prototype,l.prototype=new v,l.prototype.constructor=l,l.Ob=function(T,M,U){for(var ee=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)ee[Ce-2]=arguments[Ce];return p.prototype[M].apply(T,ee)}}var R=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function z(l){const p=l.length;if(p>0){const v=Array(p);for(let T=0;T<p;T++)v[T]=l[T];return v}return[]}function K(l,p){for(let T=1;T<arguments.length;T++){const M=arguments[T];var v=typeof M;if(v=v!="object"?v:M?Array.isArray(M)?"array":v:"null",v=="array"||v=="object"&&typeof M.length=="number"){v=l.length||0;const U=M.length||0;l.length=v+U;for(let ee=0;ee<U;ee++)l[v+ee]=M[ee]}else l.push(M)}}class J{constructor(p,v){this.i=p,this.j=v,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function B(l){d.setTimeout(()=>{throw l},0)}function ne(){var l=b;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}class ge{constructor(){this.h=this.g=null}add(p,v){const T=G.get();T.set(p,v),this.h?this.h.next=T:this.g=T,this.h=T}}var G=new J(()=>new Ne,l=>l.reset());class Ne{constructor(){this.next=this.g=this.h=null}set(p,v){this.h=p,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let je,Se=!1,b=new ge,I=()=>{const l=Promise.resolve(void 0);je=()=>{l.then(C)}};function C(){for(var l;l=ne();){try{l.h.call(l.g)}catch(v){B(v)}var p=G;p.j(l),p.h<100&&(p.h++,l.next=p.g,p.g=l)}Se=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const v=()=>{};d.addEventListener("test",v,p),d.removeEventListener("test",v,p)}catch{}return l})();function k(l){return/^[\s\xa0]*$/.test(l)}function He(l,p){N.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,p)}_(He,N),He.prototype.init=function(l,p){const v=this.type=l.type,T=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget,p||(v=="mouseover"?p=l.fromElement:v=="mouseout"&&(p=l.toElement)),this.relatedTarget=p,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&He.Z.h.call(this)},He.prototype.h=function(){He.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var st="closure_listenable_"+(Math.random()*1e6|0),Re=0;function be(l,p,v,T,M){this.listener=l,this.proxy=null,this.src=p,this.type=v,this.capture=!!T,this.ha=M,this.key=++Re,this.da=this.fa=!1}function Z(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function ce(l,p,v){for(const T in l)p.call(v,l[T],T,l)}function re(l,p){for(const v in l)p.call(void 0,l[v],v,l)}function V(l){const p={};for(const v in l)p[v]=l[v];return p}const H="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function se(l,p){let v,T;for(let M=1;M<arguments.length;M++){T=arguments[M];for(v in T)l[v]=T[v];for(let U=0;U<H.length;U++)v=H[U],Object.prototype.hasOwnProperty.call(T,v)&&(l[v]=T[v])}}function le(l){this.src=l,this.g={},this.h=0}le.prototype.add=function(l,p,v,T,M){const U=l.toString();l=this.g[U],l||(l=this.g[U]=[],this.h++);const ee=Ee(l,p,T,M);return ee>-1?(p=l[ee],v||(p.fa=!1)):(p=new be(p,this.src,U,!!T,M),p.fa=v,l.push(p)),p};function fe(l,p){const v=p.type;if(v in l.g){var T=l.g[v],M=Array.prototype.indexOf.call(T,p,void 0),U;(U=M>=0)&&Array.prototype.splice.call(T,M,1),U&&(Z(p),l.g[v].length==0&&(delete l.g[v],l.h--))}}function Ee(l,p,v,T){for(let M=0;M<l.length;++M){const U=l[M];if(!U.da&&U.listener==p&&U.capture==!!v&&U.ha==T)return M}return-1}var De="closure_lm_"+(Math.random()*1e6|0),pe={};function Ue(l,p,v,T,M){if(Array.isArray(p)){for(let U=0;U<p.length;U++)Ue(l,p[U],v,T,M);return null}return v=as(v),l&&l[st]?l.J(p,v,m(T)?!!T.capture:!1,M):gt(l,p,v,!1,T,M)}function gt(l,p,v,T,M,U){if(!p)throw Error("Invalid event type");const ee=m(M)?!!M.capture:!!M;let Ce=Mr(l);if(Ce||(l[De]=Ce=new le(l)),v=Ce.add(p,v,T,ee,U),v.proxy)return v;if(T=Bn(),v.proxy=T,T.src=l,T.listener=v,l.addEventListener)O||(M=ee),M===void 0&&(M=!1),l.addEventListener(p.toString(),T,M);else if(l.attachEvent)l.attachEvent(or(p.toString()),T);else if(l.addListener&&l.removeListener)l.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Bn(){function l(v){return p.call(l.src,l.listener,v)}const p=zi;return l}function kn(l,p,v,T,M){if(Array.isArray(p))for(var U=0;U<p.length;U++)kn(l,p[U],v,T,M);else T=m(T)?!!T.capture:!!T,v=as(v),l&&l[st]?(l=l.i,U=String(p).toString(),U in l.g&&(p=l.g[U],v=Ee(p,v,T,M),v>-1&&(Z(p[v]),Array.prototype.splice.call(p,v,1),p.length==0&&(delete l.g[U],l.h--)))):l&&(l=Mr(l))&&(p=l.g[p.toString()],l=-1,p&&(l=Ee(p,v,T,M)),(v=l>-1?p[l]:null)&&ir(v))}function ir(l){if(typeof l!="number"&&l&&!l.da){var p=l.src;if(p&&p[st])fe(p.i,l);else{var v=l.type,T=l.proxy;p.removeEventListener?p.removeEventListener(v,T,l.capture):p.detachEvent?p.detachEvent(or(v),T):p.addListener&&p.removeListener&&p.removeListener(T),(v=Mr(p))?(fe(v,l),v.h==0&&(v.src=null,p[De]=null)):Z(l)}}}function or(l){return l in pe?pe[l]:pe[l]="on"+l}function zi(l,p){if(l.da)l=!0;else{p=new He(p,this);const v=l.listener,T=l.ha||l.src;l.fa&&ir(l),l=v.call(T,p)}return l}function Mr(l){return l=l[De],l instanceof le?l:null}var pn="__closure_events_fn_"+(Math.random()*1e9>>>0);function as(l){return typeof l=="function"?l:(l[pn]||(l[pn]=function(p){return l.handleEvent(p)}),l[pn])}function We(){P.call(this),this.i=new le(this),this.M=this,this.G=null}_(We,P),We.prototype[st]=!0,We.prototype.removeEventListener=function(l,p,v,T){kn(this,l,p,v,T)};function ot(l,p){var v,T=l.G;if(T)for(v=[];T;T=T.G)v.push(T);if(l=l.M,T=p.type||p,typeof p=="string")p=new N(p,l);else if(p instanceof N)p.target=p.target||l;else{var M=p;p=new N(T,l),se(p,M)}M=!0;let U,ee;if(v)for(ee=v.length-1;ee>=0;ee--)U=p.g=v[ee],M=mn(U,T,!0,p)&&M;if(U=p.g=l,M=mn(U,T,!0,p)&&M,M=mn(U,T,!1,p)&&M,v)for(ee=0;ee<v.length;ee++)U=p.g=v[ee],M=mn(U,T,!1,p)&&M}We.prototype.N=function(){if(We.Z.N.call(this),this.i){var l=this.i;for(const p in l.g){const v=l.g[p];for(let T=0;T<v.length;T++)Z(v[T]);delete l.g[p],l.h--}}this.G=null},We.prototype.J=function(l,p,v,T){return this.i.add(String(l),p,!1,v,T)},We.prototype.K=function(l,p,v,T){return this.i.add(String(l),p,!0,v,T)};function mn(l,p,v,T){if(p=l.i.g[String(p)],!p)return!0;p=p.concat();let M=!0;for(let U=0;U<p.length;++U){const ee=p[U];if(ee&&!ee.da&&ee.capture==v){const Ce=ee.listener,ft=ee.ha||ee.src;ee.fa&&fe(l.i,ee),M=Ce.call(ft,T)!==!1&&M}}return M&&!T.defaultPrevented}function Tt(l,p){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=y(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:d.setTimeout(l,p||0)}function Cn(l){l.g=Tt(()=>{l.g=null,l.i&&(l.i=!1,Cn(l))},l.l);const p=l.h;l.h=null,l.m.apply(null,p)}class Bi extends P{constructor(p,v){super(),this.m=p,this.l=v,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Cn(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ar(l){P.call(this),this.h=l,this.g={}}_(ar,P);var lr=[];function ls(l){ce(l.g,function(p,v){this.g.hasOwnProperty(v)&&ir(p)},l),l.g={}}ar.prototype.N=function(){ar.Z.N.call(this),ls(this)},ar.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $n=d.JSON.stringify,us=d.JSON.parse,rn=class{stringify(l){return d.JSON.stringify(l,void 0)}parse(l){return d.JSON.parse(l,void 0)}};function Hn(){}function qn(){}var ur={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function cs(){N.call(this,"d")}_(cs,N);function ds(){N.call(this,"c")}_(ds,N);var sn={},hs=null;function An(){return hs=hs||new We}sn.Ia="serverreachability";function Jt(l){N.call(this,sn.Ia,l)}_(Jt,N);function Wn(l){const p=An();ot(p,new Jt(p))}sn.STAT_EVENT="statevent";function Kn(l,p){N.call(this,sn.STAT_EVENT,l),this.stat=p}_(Kn,N);function Je(l){const p=An();ot(p,new Kn(p,l))}sn.Ja="timingevent";function fs(l,p){N.call(this,sn.Ja,l),this.size=p}_(fs,N);function we(l,p){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){l()},p)}function Qe(){this.g=!0}Qe.prototype.ua=function(){this.g=!1};function ht(l,p,v,T,M,U){l.info(function(){if(l.g)if(U){var ee="",Ce=U.split("&");for(let Ge=0;Ge<Ce.length;Ge++){var ft=Ce[Ge].split("=");if(ft.length>1){const _t=ft[0];ft=ft[1];const xn=_t.split("_");ee=xn.length>=2&&xn[1]=="type"?ee+(_t+"="+ft+"&"):ee+(_t+"=redacted&")}}}else ee=null;else ee=U;return"XMLHTTP REQ ("+T+") [attempt "+M+"]: "+p+`
`+v+`
`+ee})}function Rt(l,p,v,T,M,U,ee){l.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+M+"]: "+p+`
`+v+`
`+U+" "+ee})}function Zt(l,p,v,T){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+yt(l,v)+(T?" "+T:"")})}function ct(l,p){l.info(function(){return"TIMEOUT: "+p})}Qe.prototype.info=function(){};function yt(l,p){if(!l.g)return p;if(!p)return null;try{const U=JSON.parse(p);if(U){for(l=0;l<U.length;l++)if(Array.isArray(U[l])){var v=U[l];if(!(v.length<2)){var T=v[1];if(Array.isArray(T)&&!(T.length<1)){var M=T[0];if(M!="noop"&&M!="stop"&&M!="close")for(let ee=1;ee<T.length;ee++)T[ee]=""}}}}return $n(U)}catch{return p}}var gn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},vt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Bt;function Rn(){}_(Rn,Hn),Rn.prototype.g=function(){return new XMLHttpRequest},Bt=new Rn;function bt(l){return encodeURIComponent(String(l))}function Zs(l){var p=1;l=l.split(":");const v=[];for(;p>0&&l.length;)v.push(l.shift()),p--;return l.length&&v.push(l.join(":")),v}function bn(l,p,v,T){this.j=l,this.i=p,this.l=v,this.S=T||1,this.V=new ar(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new yl}function yl(){this.i=null,this.g="",this.h=!1}var vl={},Qo={};function Gn(l,p,v){l.M=1,l.A=jr(Nn(p)),l.u=v,l.R=!0,Yo(l,null)}function Yo(l,p){l.F=Date.now(),ei(l),l.B=Nn(l.A);var v=l.B,T=l.S;Array.isArray(T)||(T=[String(T)]),oa(v.i,"t",T),l.C=0,v=l.j.L,l.h=new yl,l.g=Al(l.j,v?p:null,!l.u),l.P>0&&(l.O=new Bi(y(l.Y,l,l.g),l.P)),p=l.V,v=l.g,T=l.ba;var M="readystatechange";Array.isArray(M)||(M&&(lr[0]=M.toString()),M=lr);for(let U=0;U<M.length;U++){const ee=Ue(v,M[U],T||p.handleEvent,!1,p.h||p);if(!ee)break;p.g[ee.key]=ee}p=l.J?V(l.J):{},l.u?(l.v||(l.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,p)):(l.v="GET",l.g.ea(l.B,l.v,null,p)),Wn(),ht(l.i,l.v,l.B,l.l,l.S,l.u)}bn.prototype.ba=function(l){l=l.target;const p=this.O;p&&gr(l)==3?p.j():this.Y(l)},bn.prototype.Y=function(l){try{if(l==this.g)e:{const Ce=gr(this.g),ft=this.g.ya(),Ge=this.g.ca();if(!(Ce<3)&&(Ce!=3||this.g&&(this.h.h||this.g.la()||kl(this.g)))){this.K||Ce!=4||ft==7||(ft==8||Ge<=0?Wn(3):Wn(2)),$i(this);var p=this.g.ca();this.X=p;var v=_l(this);if(this.o=p==200,Rt(this.i,this.v,this.B,this.l,this.S,Ce,p),this.o){if(this.U&&!this.L){t:{if(this.g){var T,M=this.g;if((T=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(T)){var U=T;break t}}U=null}if(l=U)Zt(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ze(this,l);else{this.o=!1,this.m=3,Je(12),Lr(this),ti(this);break e}}if(this.R){l=!0;let _t;for(;!this.K&&this.C<v.length;)if(_t=El(this,v),_t==Qo){Ce==4&&(this.m=4,Je(14),l=!1),Zt(this.i,this.l,null,"[Incomplete Response]");break}else if(_t==vl){this.m=4,Je(15),Zt(this.i,this.l,v,"[Invalid Chunk]"),l=!1;break}else Zt(this.i,this.l,_t,null),Ze(this,_t);if(wl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ce!=4||v.length!=0||this.h.h||(this.m=1,Je(16),l=!1),this.o=this.o&&l,!l)Zt(this.i,this.l,v,"[Invalid Chunked Response]"),Lr(this),ti(this);else if(v.length>0&&!this.W){this.W=!0;var ee=this.j;ee.g==this&&ee.aa&&!ee.P&&(ee.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),ci(ee),ee.P=!0,Je(11))}}else Zt(this.i,this.l,v,null),Ze(this,v);Ce==4&&Lr(this),this.o&&!this.K&&(Ce==4?Zi(this.j,this):(this.o=!1,ei(this)))}else la(this.g),p==400&&v.indexOf("Unknown SID")>0?(this.m=3,Je(12)):(this.m=0,Je(13)),Lr(this),ti(this)}}}catch{}finally{}};function _l(l){if(!wl(l))return l.g.la();const p=kl(l.g);if(p==="")return"";let v="";const T=p.length,M=gr(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return Lr(l),ti(l),"";l.h.i=new d.TextDecoder}for(let U=0;U<T;U++)l.h.h=!0,v+=l.h.i.decode(p[U],{stream:!(M&&U==T-1)});return p.length=0,l.h.g+=v,l.C=0,l.h.g}function wl(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function El(l,p){var v=l.C,T=p.indexOf(`
`,v);return T==-1?Qo:(v=Number(p.substring(v,T)),isNaN(v)?vl:(T+=1,T+v>p.length?Qo:(p=p.slice(T,T+v),l.C=T+v,p)))}bn.prototype.cancel=function(){this.K=!0,Lr(this)};function ei(l){l.T=Date.now()+l.H,Xo(l,l.H)}function Xo(l,p){if(l.D!=null)throw Error("WatchDog timer not null");l.D=we(y(l.aa,l),p)}function $i(l){l.D&&(d.clearTimeout(l.D),l.D=null)}bn.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(ct(this.i,this.B),this.M!=2&&(Wn(),Je(17)),Lr(this),this.m=2,ti(this)):Xo(this,this.T-l)};function ti(l){l.j.I==0||l.K||Zi(l.j,l)}function Lr(l){$i(l);var p=l.O;p&&typeof p.dispose=="function"&&p.dispose(),l.O=null,ls(l.V),l.g&&(p=l.g,l.g=null,p.abort(),p.dispose())}function Ze(l,p){try{var v=l.j;if(v.I!=0&&(v.g==l||Zo(v.h,l))){if(!l.L&&Zo(v.h,l)&&v.I==3){try{var T=v.Ba.g.parse(p)}catch{T=null}if(Array.isArray(T)&&T.length==3){var M=T;if(M[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<l.F)Ji(v),wn(v);else break e;_r(v),Je(18)}}else v.xa=M[1],0<v.xa-v.K&&M[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=we(y(v.Va,v),6e3));ni(v.h)<=1&&v.ta&&(v.ta=void 0)}else En(v,11)}else if((l.L||v.g==l)&&Ji(v),!k(p))for(M=v.Ba.g.parse(p),p=0;p<M.length;p++){let Ge=M[p];const _t=Ge[0];if(!(_t<=v.K))if(v.K=_t,Ge=Ge[1],v.I==2)if(Ge[0]=="c"){v.M=Ge[1],v.ba=Ge[2];const xn=Ge[3];xn!=null&&(v.ka=xn,v.j.info("VER="+v.ka));const Hr=Ge[4];Hr!=null&&(v.za=Hr,v.j.info("SVER="+v.za));const wr=Ge[5];wr!=null&&typeof wr=="number"&&wr>0&&(T=1.5*wr,v.O=T,v.j.info("backChannelRequestTimeoutMs_="+T)),T=v;const Er=l.g;if(Er){const no=Er.g?Er.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(no){var U=T.h;U.g||no.indexOf("spdy")==-1&&no.indexOf("quic")==-1&&no.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(qi(U,U.h),U.h=null))}if(T.G){const da=Er.g?Er.g.getResponseHeader("X-HTTP-Session-Id"):null;da&&(T.wa=da,qe(T.J,T.G,da))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-l.F,v.j.info("Handshake RTT: "+v.T+"ms")),T=v;var ee=l;if(T.na=ca(T,T.L?T.ba:null,T.W),ee.L){ri(T.h,ee);var Ce=ee,ft=T.O;ft&&(Ce.H=ft),Ce.D&&($i(Ce),ei(Ce)),T.g=ee}else $t(T);v.i.length>0&&$r(v)}else Ge[0]!="stop"&&Ge[0]!="close"||En(v,7);else v.I==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?En(v,7):Yi(v):Ge[0]!="noop"&&v.l&&v.l.qa(Ge),v.A=0)}}Wn(4)}catch{}}var Cc=class{constructor(l,p){this.g=l,this.map=p}};function Hi(l){this.l=l||10,d.PerformanceNavigationTiming?(l=d.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Jo(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function ni(l){return l.h?1:l.g?l.g.size:0}function Zo(l,p){return l.h?l.h==p:l.g?l.g.has(p):!1}function qi(l,p){l.g?l.g.add(p):l.h=p}function ri(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}Hi.prototype.cancel=function(){if(this.i=yn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function yn(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let p=l.i;for(const v of l.g.values())p=p.concat(v.G);return p}return z(l.i)}var xl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vn(l,p){if(l){l=l.split("&");for(let v=0;v<l.length;v++){const T=l[v].indexOf("=");let M,U=null;T>=0?(M=l[v].substring(0,T),U=l[v].substring(T+1)):M=l[v],p(M,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function cr(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;l instanceof cr?(this.l=l.l,si(this,l.j),this.o=l.o,this.g=l.g,dr(this,l.u),this.h=l.h,ps(this,aa(l.i)),this.m=l.m):l&&(p=String(l).match(xl))?(this.l=!1,si(this,p[1]||"",!0),this.o=ii(p[2]||""),this.g=ii(p[3]||"",!0),dr(this,p[4]),this.h=ii(p[5]||"",!0),ps(this,p[6]||"",!0),this.m=ii(p[7]||"")):(this.l=!1,this.i=new Le(null,this.l))}cr.prototype.toString=function(){const l=[];var p=this.j;p&&l.push(oi(p,ta,!0),":");var v=this.g;return(v||p=="file")&&(l.push("//"),(p=this.o)&&l.push(oi(p,ta,!0),"@"),l.push(bt(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&l.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&l.push("/"),l.push(oi(v,v.charAt(0)=="/"?ai:na,!0))),(v=this.i.toString())&&l.push("?",v),(v=this.m)&&l.push("#",oi(v,ra)),l.join("")},cr.prototype.resolve=function(l){const p=Nn(this);let v=!!l.j;v?si(p,l.j):v=!!l.o,v?p.o=l.o:v=!!l.g,v?p.g=l.g:v=l.u!=null;var T=l.h;if(v)dr(p,l.u);else if(v=!!l.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var M=p.h.lastIndexOf("/");M!=-1&&(T=p.h.slice(0,M+1)+T)}if(M=T,M==".."||M==".")T="";else if(M.indexOf("./")!=-1||M.indexOf("/.")!=-1){T=M.lastIndexOf("/",0)==0,M=M.split("/");const U=[];for(let ee=0;ee<M.length;){const Ce=M[ee++];Ce=="."?T&&ee==M.length&&U.push(""):Ce==".."?((U.length>1||U.length==1&&U[0]!="")&&U.pop(),T&&ee==M.length&&U.push("")):(U.push(Ce),T=!0)}T=U.join("/")}else T=M}return v?p.h=T:v=l.i.toString()!=="",v?ps(p,aa(l.i)):v=!!l.m,v&&(p.m=l.m),p};function Nn(l){return new cr(l)}function si(l,p,v){l.j=v?ii(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function dr(l,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);l.u=p}else l.u=null}function ps(l,p,v){p instanceof Le?(l.i=p,Ki(l.i,l.l)):(v||(p=oi(p,Ac)),l.i=new Le(p,l.l))}function qe(l,p,v){l.i.set(p,v)}function jr(l){return qe(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function ii(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function oi(l,p,v){return typeof l=="string"?(l=encodeURI(l).replace(p,ea),v&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function ea(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var ta=/[#\/\?@]/g,na=/[#\?:]/g,ai=/[#\?]/g,Ac=/[#\?@]/g,ra=/#/g;function Le(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function hr(l){l.g||(l.g=new Map,l.h=0,l.i&&vn(l.i,function(p,v){l.add(decodeURIComponent(p.replace(/\+/g," ")),v)}))}s=Le.prototype,s.add=function(l,p){hr(this),this.i=null,l=fr(this,l);let v=this.g.get(l);return v||this.g.set(l,v=[]),v.push(p),this.h+=1,this};function sa(l,p){hr(l),p=fr(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function Wi(l,p){return hr(l),p=fr(l,p),l.g.has(p)}s.forEach=function(l,p){hr(this),this.g.forEach(function(v,T){v.forEach(function(M){l.call(p,M,T,this)},this)},this)};function ia(l,p){hr(l);let v=[];if(typeof p=="string")Wi(l,p)&&(v=v.concat(l.g.get(fr(l,p))));else for(l=Array.from(l.g.values()),p=0;p<l.length;p++)v=v.concat(l[p]);return v}s.set=function(l,p){return hr(this),this.i=null,l=fr(this,l),Wi(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},s.get=function(l,p){return l?(l=ia(this,l),l.length>0?String(l[0]):p):p};function oa(l,p,v){sa(l,p),v.length>0&&(l.i=null,l.g.set(fr(l,p),z(v)),l.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],p=Array.from(this.g.keys());for(let T=0;T<p.length;T++){var v=p[T];const M=bt(v);v=ia(this,v);for(let U=0;U<v.length;U++){let ee=M;v[U]!==""&&(ee+="="+bt(v[U])),l.push(ee)}}return this.i=l.join("&")};function aa(l){const p=new Le;return p.i=l.i,l.g&&(p.g=new Map(l.g),p.h=l.h),p}function fr(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function Ki(l,p){p&&!l.j&&(hr(l),l.i=null,l.g.forEach(function(v,T){const M=T.toLowerCase();T!=M&&(sa(this,T),oa(this,M,v))},l)),l.j=p}function pr(l,p){const v=new Qe;if(d.Image){const T=new Image;T.onload=x(Ot,v,"TestLoadImage: loaded",!0,p,T),T.onerror=x(Ot,v,"TestLoadImage: error",!1,p,T),T.onabort=x(Ot,v,"TestLoadImage: abort",!1,p,T),T.ontimeout=x(Ot,v,"TestLoadImage: timeout",!1,p,T),d.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=l}else p(!1)}function mr(l,p){const v=new Qe,T=new AbortController,M=setTimeout(()=>{T.abort(),Ot(v,"TestPingServer: timeout",!1,p)},1e4);fetch(l,{signal:T.signal}).then(U=>{clearTimeout(M),U.ok?Ot(v,"TestPingServer: ok",!0,p):Ot(v,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(M),Ot(v,"TestPingServer: error",!1,p)})}function Ot(l,p,v,T,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),T(v)}catch{}}function li(){this.g=new rn}function Ur(l){this.i=l.Sb||null,this.h=l.ab||!1}_(Ur,Hn),Ur.prototype.g=function(){return new _n(this.i,this.h)};function _n(l,p){We.call(this),this.H=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(_n,We),s=_n.prototype,s.open=function(l,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=p,this.readyState=1,Qn(this)},s.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(p.body=l),(this.H||d).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ms(this)),this.readyState=0},s.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Qn(this)),this.g&&(this.readyState=3,Qn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Tl(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function Tl(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}s.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?ms(this):Qn(this),this.readyState==3&&Tl(this)}},s.Oa=function(l){this.g&&(this.response=this.responseText=l,ms(this))},s.Na=function(l){this.g&&(this.response=l,ms(this))},s.ga=function(){this.g&&ms(this)};function ms(l){l.readyState=4,l.l=null,l.j=null,l.B=null,Qn(l)}s.setRequestHeader=function(l,p){this.A.append(l,p)},s.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],p=this.h.entries();for(var v=p.next();!v.done;)v=v.value,l.push(v[0]+": "+v[1]),v=p.next();return l.join(`\r
`)};function Qn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(_n.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Il(l){let p="";return ce(l,function(v,T){p+=T,p+=":",p+=v,p+=`\r
`}),p}function Gi(l,p,v){e:{for(T in v){var T=!1;break e}T=!0}T||(v=Il(v),typeof l=="string"?v!=null&&bt(v):qe(l,p,v))}function Ye(l){We.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(Ye,We);var Sl=/^https?$/i,Rc=["POST","PUT"];s=Ye.prototype,s.Fa=function(l){this.H=l},s.ea=function(l,p,v,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Bt.g(),this.g.onreadystatechange=R(y(this.Ca,this));try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(U){gs(this,U);return}if(l=v||"",v=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var M in T)v.set(M,T[M]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const U of T.keys())v.set(U,T.get(U));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(v.keys()).find(U=>U.toLowerCase()=="content-type"),M=d.FormData&&l instanceof d.FormData,!(Array.prototype.indexOf.call(Rc,p,void 0)>=0)||T||M||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,ee]of v)this.g.setRequestHeader(U,ee);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(U){gs(this,U)}};function gs(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.o=5,ys(l),Br(l)}function ys(l){l.A||(l.A=!0,ot(l,"complete"),ot(l,"error"))}s.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,ot(this,"complete"),ot(this,"abort"),Br(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Br(this,!0)),Ye.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?zr(this):this.Xa())},s.Xa=function(){zr(this)};function zr(l){if(l.h&&typeof u<"u"){if(l.v&&gr(l)==4)setTimeout(l.Ca.bind(l),0);else if(ot(l,"readystatechange"),gr(l)==4){l.h=!1;try{const U=l.ca();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var v;if(!(v=p)){var T;if(T=U===0){let ee=String(l.D).match(xl)[1]||null;!ee&&d.self&&d.self.location&&(ee=d.self.location.protocol.slice(0,-1)),T=!Sl.test(ee?ee.toLowerCase():"")}v=T}if(v)ot(l,"complete"),ot(l,"success");else{l.o=6;try{var M=gr(l)>2?l.g.statusText:""}catch{M=""}l.l=M+" ["+l.ca()+"]",ys(l)}}finally{Br(l)}}}}function Br(l,p){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const v=l.g;l.g=null,p||ot(l,"ready");try{v.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function gr(l){return l.g?l.g.readyState:0}s.ca=function(){try{return gr(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(l){if(this.g){var p=this.g.responseText;return l&&p.indexOf(l)==0&&(p=p.substring(l.length)),us(p)}};function kl(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function la(l){const p={};l=(l.g&&gr(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<l.length;T++){if(k(l[T]))continue;var v=Zs(l[T]);const M=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const U=p[M]||[];p[M]=U,U.push(v)}re(p,function(T){return T.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function yr(l,p,v){return v&&v.internalChannelParams&&v.internalChannelParams[l]||p}function Qi(l){this.za=0,this.i=[],this.j=new Qe,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=yr("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=yr("baseRetryDelayMs",5e3,l),this.Za=yr("retryDelaySeedMs",1e4,l),this.Ta=yr("forwardChannelMaxRetries",2,l),this.va=yr("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new Hi(l&&l.concurrentRequestLimit),this.Ba=new li,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Qi.prototype,s.ka=8,s.I=1,s.connect=function(l,p,v,T){Je(0),this.W=l,this.H=p||{},v&&T!==void 0&&(this.H.OSID=v,this.H.OAID=T),this.F=this.X,this.J=ca(this,null,this.W),$r(this)};function Yi(l){if(Xi(l),l.I==3){var p=l.V++,v=Nn(l.J);if(qe(v,"SID",l.M),qe(v,"RID",p),qe(v,"TYPE","terminate"),vr(l,v),p=new bn(l,l.j,p),p.M=2,p.A=jr(Nn(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(p.A.toString(),"")}catch{}!v&&d.Image&&(new Image().src=p.A,v=!0),v||(p.g=Al(p.j,null),p.g.ea(p.A)),p.F=Date.now(),ei(p)}di(l)}function wn(l){l.g&&(ci(l),l.g.cancel(),l.g=null)}function Xi(l){wn(l),l.v&&(d.clearTimeout(l.v),l.v=null),Ji(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&d.clearTimeout(l.m),l.m=null)}function $r(l){if(!Jo(l.h)&&!l.m){l.m=!0;var p=l.Ea;je||I(),Se||(je(),Se=!0),b.add(p,l),l.D=0}}function Cl(l,p){return ni(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=p.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=we(y(l.Ea,l,p),eo(l,l.D)),l.D++,!0)}s.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const M=new bn(this,this.j,l);let U=this.o;if(this.U&&(U?(U=V(U),se(U,this.U)):U=this.U),this.u!==null||this.R||(M.J=U,U=null),this.S)e:{for(var p=0,v=0;v<this.i.length;v++){t:{var T=this.i[v];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(p+=T,p>4096){p=v;break e}if(p===4096||v===this.i.length-1){p=v+1;break e}}p=1e3}else p=1e3;p=ua(this,M,p),v=Nn(this.J),qe(v,"RID",l),qe(v,"CVER",22),this.G&&qe(v,"X-HTTP-Session-Id",this.G),vr(this,v),U&&(this.R?p="headers="+bt(Il(U))+"&"+p:this.u&&Gi(v,this.u,U)),qi(this.h,M),this.Ra&&qe(v,"TYPE","init"),this.S?(qe(v,"$req",p),qe(v,"SID","null"),M.U=!0,Gn(M,v,null)):Gn(M,v,p),this.I=2}}else this.I==3&&(l?ui(this,l):this.i.length==0||Jo(this.h)||ui(this))};function ui(l,p){var v;p?v=p.l:v=l.V++;const T=Nn(l.J);qe(T,"SID",l.M),qe(T,"RID",v),qe(T,"AID",l.K),vr(l,T),l.u&&l.o&&Gi(T,l.u,l.o),v=new bn(l,l.j,v,l.D+1),l.u===null&&(v.J=l.o),p&&(l.i=p.G.concat(l.i)),p=ua(l,v,1e3),v.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),qi(l.h,v),Gn(v,T,p)}function vr(l,p){l.H&&ce(l.H,function(v,T){qe(p,T,v)}),l.l&&ce({},function(v,T){qe(p,T,v)})}function ua(l,p,v){v=Math.min(l.i.length,v);const T=l.l?y(l.l.Ka,l.l,l):null;e:{var M=l.i;let Ce=-1;for(;;){const ft=["count="+v];Ce==-1?v>0?(Ce=M[0].g,ft.push("ofs="+Ce)):Ce=0:ft.push("ofs="+Ce);let Ge=!0;for(let _t=0;_t<v;_t++){var U=M[_t].g;const xn=M[_t].map;if(U-=Ce,U<0)Ce=Math.max(0,M[_t].g-100),Ge=!1;else try{U="req"+U+"_"||"";try{var ee=xn instanceof Map?xn:Object.entries(xn);for(const[Hr,wr]of ee){let Er=wr;m(wr)&&(Er=$n(wr)),ft.push(U+Hr+"="+encodeURIComponent(Er))}}catch(Hr){throw ft.push(U+"type="+encodeURIComponent("_badmap")),Hr}}catch{T&&T(xn)}}if(Ge){ee=ft.join("&");break e}}ee=void 0}return l=l.i.splice(0,v),p.G=l,ee}function $t(l){if(!l.g&&!l.v){l.Y=1;var p=l.Da;je||I(),Se||(je(),Se=!0),b.add(p,l),l.A=0}}function _r(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=we(y(l.Da,l),eo(l,l.A)),l.A++,!0)}s.Da=function(){if(this.v=null,vs(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=we(y(this.Wa,this),l)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Je(10),wn(this),vs(this))};function ci(l){l.B!=null&&(d.clearTimeout(l.B),l.B=null)}function vs(l){l.g=new bn(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var p=Nn(l.na);qe(p,"RID","rpc"),qe(p,"SID",l.M),qe(p,"AID",l.K),qe(p,"CI",l.F?"0":"1"),!l.F&&l.ia&&qe(p,"TO",l.ia),qe(p,"TYPE","xmlhttp"),vr(l,p),l.u&&l.o&&Gi(p,l.u,l.o),l.O&&(l.g.H=l.O);var v=l.g;l=l.ba,v.M=1,v.A=jr(Nn(p)),v.u=null,v.R=!0,Yo(v,l)}s.Va=function(){this.C!=null&&(this.C=null,wn(this),_r(this),Je(19))};function Ji(l){l.C!=null&&(d.clearTimeout(l.C),l.C=null)}function Zi(l,p){var v=null;if(l.g==p){Ji(l),ci(l),l.g=null;var T=2}else if(Zo(l.h,p))v=p.G,ri(l.h,p),T=1;else return;if(l.I!=0){if(p.o)if(T==1){v=p.u?p.u.length:0,p=Date.now()-p.F;var M=l.D;T=An(),ot(T,new fs(T,v)),$r(l)}else $t(l);else if(M=p.m,M==3||M==0&&p.X>0||!(T==1&&Cl(l,p)||T==2&&_r(l)))switch(v&&v.length>0&&(p=l.h,p.i=p.i.concat(v)),M){case 1:En(l,5);break;case 4:En(l,10);break;case 3:En(l,6);break;default:En(l,2)}}}function eo(l,p){let v=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(v*=2),v*p}function En(l,p){if(l.j.info("Error code "+p),p==2){var v=y(l.bb,l),T=l.Ua;const M=!T;T=new cr(T||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||si(T,"https"),jr(T),M?pr(T.toString(),v):mr(T.toString(),v)}else Je(2);l.I=0,l.l&&l.l.pa(p),di(l),Xi(l)}s.bb=function(l){l?(this.j.info("Successfully pinged google.com"),Je(2)):(this.j.info("Failed to ping google.com"),Je(1))};function di(l){if(l.I=0,l.ja=[],l.l){const p=yn(l.h);(p.length!=0||l.i.length!=0)&&(K(l.ja,p),K(l.ja,l.i),l.h.i.length=0,z(l.i),l.i.length=0),l.l.oa()}}function ca(l,p,v){var T=v instanceof cr?Nn(v):new cr(v);if(T.g!="")p&&(T.g=p+"."+T.g),dr(T,T.u);else{var M=d.location;T=M.protocol,p=p?p+"."+M.hostname:M.hostname,M=+M.port;const U=new cr(null);T&&si(U,T),p&&(U.g=p),M&&dr(U,M),v&&(U.h=v),T=U}return v=l.G,p=l.wa,v&&p&&qe(T,v,p),qe(T,"VER",l.ka),vr(l,T),T}function Al(l,p,v){if(p&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=l.Aa&&!l.ma?new Ye(new Ur({ab:v})):new Ye(l.ma),p.Fa(l.L),p}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Rl(){}s=Rl.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function to(){}to.prototype.g=function(l,p){return new Ft(l,p)};function Ft(l,p){We.call(this),this.g=new Qi(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(l?l["X-WebChannel-Client-Profile"]=p.sa:l={"X-WebChannel-Client-Profile":p.sa}),this.g.U=l,(l=p&&p.Qb)&&!k(l)&&(this.g.u=l),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!k(p)&&(this.g.G=p,l=this.h,l!==null&&p in l&&(l=this.h,p in l&&delete l[p])),this.j=new _s(this)}_(Ft,We),Ft.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ft.prototype.close=function(){Yi(this.g)},Ft.prototype.o=function(l){var p=this.g;if(typeof l=="string"){var v={};v.__data__=l,l=v}else this.v&&(v={},v.__data__=$n(l),l=v);p.i.push(new Cc(p.Ya++,l)),p.I==3&&$r(p)},Ft.prototype.N=function(){this.g.l=null,delete this.j,Yi(this.g),delete this.g,Ft.Z.N.call(this)};function bl(l){cs.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(const v in p){l=v;break e}l=void 0}(this.i=l)&&(l=this.i,p=p!==null&&l in p?p[l]:void 0),this.data=p}else this.data=l}_(bl,cs);function Nl(){ds.call(this),this.status=1}_(Nl,ds);function _s(l){this.g=l}_(_s,Rl),_s.prototype.ra=function(){ot(this.g,"a")},_s.prototype.qa=function(l){ot(this.g,new bl(l))},_s.prototype.pa=function(l){ot(this.g,new Nl)},_s.prototype.oa=function(){ot(this.g,"b")},to.prototype.createWebChannel=to.prototype.g,Ft.prototype.send=Ft.prototype.o,Ft.prototype.open=Ft.prototype.m,Ft.prototype.close=Ft.prototype.close,Av=function(){return new to},Cv=function(){return An()},kv=sn,xh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},gn.NO_ERROR=0,gn.TIMEOUT=8,gn.HTTP_ERROR=6,Mu=gn,vt.COMPLETE="complete",Sv=vt,qn.EventType=ur,ur.OPEN="a",ur.CLOSE="b",ur.ERROR="c",ur.MESSAGE="d",We.prototype.listen=We.prototype.J,ja=qn,Ye.prototype.listenOnce=Ye.prototype.K,Ye.prototype.getLastError=Ye.prototype.Ha,Ye.prototype.getLastErrorCode=Ye.prototype.ya,Ye.prototype.getStatus=Ye.prototype.ca,Ye.prototype.getResponseJson=Ye.prototype.La,Ye.prototype.getResponseText=Ye.prototype.la,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Fa,Iv=Ye}).apply(typeof Cu<"u"?Cu:typeof self<"u"?self:typeof window<"u"?window:{});const Sg="@firebase/firestore",kg="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qt.UNAUTHENTICATED=new Qt(null),Qt.GOOGLE_CREDENTIALS=new Qt("google-credentials-uid"),Qt.FIRST_PARTY=new Qt("first-party-uid"),Qt.MOCK_USER=new Qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi=new zh("@firebase/firestore");function Io(){return Vi.logLevel}function oe(s,...e){if(Vi.logLevel<=Ve.DEBUG){const t=e.map(Jh);Vi.debug(`Firestore (${qo}): ${s}`,...t)}}function ss(s,...e){if(Vi.logLevel<=Ve.ERROR){const t=e.map(Jh);Vi.error(`Firestore (${qo}): ${s}`,...t)}}function Oo(s,...e){if(Vi.logLevel<=Ve.WARN){const t=e.map(Jh);Vi.warn(`Firestore (${qo}): ${s}`,...t)}}function Jh(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(s,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Rv(s,i,t)}function Rv(s,e,t){let i=`FIRESTORE (${qo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw ss(i),new Error(i)}function Ke(s,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,s||Rv(e,o,i)}function Ae(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends os{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class UT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Qt.UNAUTHENTICATED)))}shutdown(){}}class zT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class BT{constructor(e){this.t=e,this.currentUser=Qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ke(this.o===void 0,42304);let i=this.i;const o=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let u=new Ci;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Ci,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Ci)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ke(typeof i.accessToken=="string",31837,{l:i}),new bv(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new Qt(e)}}class $T{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Qt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class HT{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new $T(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Qt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Cg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qT{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ln(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ke(this.o===void 0,3512);const i=u=>{u.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,oe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>i(u)))};const o=u=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Cg(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ke(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Cg(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<s;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=WT(40);for(let u=0;u<o.length;++u)i.length<20&&o[u]<t&&(i+=e.charAt(o[u]%62))}return i}}function Fe(s,e){return s<e?-1:s>e?1:0}function Th(s,e){const t=Math.min(s.length,e.length);for(let i=0;i<t;i++){const o=s.charAt(i),u=e.charAt(i);if(o!==u)return lh(o)===lh(u)?Fe(o,u):lh(o)?1:-1}return Fe(s.length,e.length)}const KT=55296,GT=57343;function lh(s){const e=s.charCodeAt(0);return e>=KT&&e<=GT}function Fo(s,e,t){return s.length===e.length&&s.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag="__name__";class Cr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Te(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Te(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Cr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Cr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const u=Cr.compareSegments(e.get(o),t.get(o));if(u!==0)return u}return Fe(e.length,t.length)}static compareSegments(e,t){const i=Cr.isNumericId(e),o=Cr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Cr.extractNumericId(e).compare(Cr.extractNumericId(t)):Th(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return $s.fromString(e.substring(4,e.length-2))}}class nt extends Cr{construct(e,t,i){return new nt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new me(W.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new nt(t)}static emptyPath(){return new nt([])}}const QT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ut extends Cr{construct(e,t,i){return new Ut(e,t,i)}static isValidIdentifier(e){return QT.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ut.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ag}static keyField(){return new Ut([Ag])}static fromServerFormat(e){const t=[];let i="",o=0;const u=()=>{if(i.length===0)throw new me(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let d=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new me(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new me(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(i+=m,o++):(u(),o++)}if(u(),d)throw new me(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ut(t)}static emptyPath(){return new Ut([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(nt.fromString(e))}static fromName(e){return new ye(nt.fromString(e).popFirst(5))}static empty(){return new ye(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return nt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new nt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(s,e,t){if(!t)throw new me(W.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function YT(s,e,t,i){if(e===!0&&i===!0)throw new me(W.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function Rg(s){if(!ye.isDocumentKey(s))throw new me(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function bg(s){if(ye.isDocumentKey(s))throw new me(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Pv(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function ef(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Te(12329,{type:typeof s})}function Ai(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new me(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ef(s);throw new me(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(s,e){const t={typeString:s};return e&&(t.value=e),t}function hl(s,e){if(!Pv(s))throw new me(W.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,u="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){t=`JSON missing required field: '${i}'`;break}const d=s[i];if(o&&typeof d!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(u!==void 0&&d!==u.value){t=`Expected '${i}' field to equal '${u.value}'`;break}}if(t)throw new me(W.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng=-62135596800,Pg=1e6;class rt{static now(){return rt.fromMillis(Date.now())}static fromDate(e){return rt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Pg);return new rt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new me(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new me(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ng)throw new me(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Pg}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:rt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(hl(e,rt._jsonSchema))return new rt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ng;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}rt._jsonSchemaVersion="firestore/timestamp/1.0",rt._jsonSchema={type:xt("string",rt._jsonSchemaVersion),seconds:xt("number"),nanoseconds:xt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{static fromTimestamp(e){return new ke(e)}static min(){return new ke(new rt(0,0))}static max(){return new ke(new rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ja=-1;function XT(s,e){const t=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,o=ke.fromTimestamp(i===1e9?new rt(t+1,0):new rt(t,i));return new qs(o,ye.empty(),e)}function JT(s){return new qs(s.readTime,s.key,Ja)}class qs{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new qs(ke.min(),ye.empty(),Ja)}static max(){return new qs(ke.max(),ye.empty(),Ja)}}function ZT(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(s.documentKey,e.documentKey),t!==0?t:Fe(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wo(s){if(s.code!==W.FAILED_PRECONDITION||s.message!==eI)throw s;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new $(((i,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(i,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof $?t:$.resolve(t)}catch(t){return $.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):$.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):$.reject(t)}static resolve(e){return new $(((t,i)=>{t(e)}))}static reject(e){return new $(((t,i)=>{i(e)}))}static waitFor(e){return new $(((t,i)=>{let o=0,u=0,d=!1;e.forEach((m=>{++o,m.next((()=>{++u,d&&u===o&&t()}),(g=>i(g)))})),d=!0,u===o&&t()}))}static or(e){let t=$.resolve(!1);for(const i of e)t=t.next((o=>o?$.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,u)=>{i.push(t.call(this,o,u))})),this.waitFor(i)}static mapArray(e,t){return new $(((i,o)=>{const u=e.length,d=new Array(u);let m=0;for(let g=0;g<u;g++){const y=g;t(e[y]).next((x=>{d[y]=x,++m,m===u&&i(d)}),(x=>o(x)))}}))}static doWhile(e,t){return new $(((i,o)=>{const u=()=>{e()===!0?t().next((()=>{u()}),o):i()};u()}))}}function nI(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ko(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}fc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf=-1;function pc(s){return s==null}function Xu(s){return s===0&&1/s==-1/0}function rI(s){return typeof s=="number"&&Number.isInteger(s)&&!Xu(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv="";function sI(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=Dg(e)),e=iI(s.get(t),e);return Dg(e)}function iI(s,e){let t=e;const i=s.length;for(let o=0;o<i;o++){const u=s.charAt(o);switch(u){case"\0":t+="";break;case Dv:t+="";break;default:t+=u}}return t}function Dg(s){return s+Dv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function Mi(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function Vv(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,t){this.comparator=e,this.root=t||jt.EMPTY}insert(e,t){return new ut(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jt.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Au(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Au(this.root,e,this.comparator,!1)}getReverseIterator(){return new Au(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Au(this.root,e,this.comparator,!0)}}class Au{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?i(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jt{constructor(e,t,i,o,u){this.key=e,this.value=t,this.color=i??jt.RED,this.left=o??jt.EMPTY,this.right=u??jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,u){return new jt(e??this.key,t??this.value,i??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const u=i(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,i),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return jt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}jt.EMPTY=null,jt.RED=!0,jt.BLACK=!1;jt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,t,i,o,u){return this}insert(e,t,i){return new jt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Og(this.data.getIterator())}getIteratorFrom(e){return new Og(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof At)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=i.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new At(this.comparator);return t.data=e,t}}class Og{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e){this.fields=e,e.sort(Ut.comparator)}static empty(){return new rr([])}unionWith(e){let t=new At(Ut.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new rr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Fo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Ov("Invalid base64 string: "+u):u}})(e);return new zt(t)}static fromUint8Array(e){const t=(function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u})(e);return new zt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zt.EMPTY_BYTE_STRING=new zt("");const oI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ws(s){if(Ke(!!s,39018),typeof s=="string"){let e=0;const t=oI.exec(s);if(Ke(!!t,46558,{timestamp:s}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:mt(s.seconds),nanos:mt(s.nanos)}}function mt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Ks(s){return typeof s=="string"?zt.fromBase64String(s):zt.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="server_timestamp",Mv="__type__",Lv="__previous_value__",jv="__local_write_time__";function nf(s){return(s?.mapValue?.fields||{})[Mv]?.stringValue===Fv}function mc(s){const e=s.mapValue.fields[Lv];return nf(e)?mc(e):e}function Za(s){const e=Ws(s.mapValue.fields[jv].timestampValue);return new rt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e,t,i,o,u,d,m,g,y,x){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=x}}const Ju="(default)";class el{constructor(e,t){this.projectId=e,this.database=t||Ju}static empty(){return new el("","")}get isDefaultDatabase(){return this.database===Ju}isEqual(e){return e instanceof el&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv="__type__",lI="__max__",Ru={mapValue:{}},zv="__vector__",Zu="value";function Gs(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?nf(s)?4:cI(s)?9007199254740991:uI(s)?10:11:Te(28295,{value:s})}function Or(s,e){if(s===e)return!0;const t=Gs(s);if(t!==Gs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Za(s).isEqual(Za(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=Ws(o.timestampValue),m=Ws(u.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return Ks(o.bytesValue).isEqual(Ks(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return mt(o.geoPointValue.latitude)===mt(u.geoPointValue.latitude)&&mt(o.geoPointValue.longitude)===mt(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return mt(o.integerValue)===mt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=mt(o.doubleValue),m=mt(u.doubleValue);return d===m?Xu(d)===Xu(m):isNaN(d)&&isNaN(m)}return!1})(s,e);case 9:return Fo(s.arrayValue.values||[],e.arrayValue.values||[],Or);case 10:case 11:return(function(o,u){const d=o.mapValue.fields||{},m=u.mapValue.fields||{};if(Vg(d)!==Vg(m))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(m[g]===void 0||!Or(d[g],m[g])))return!1;return!0})(s,e);default:return Te(52216,{left:s})}}function tl(s,e){return(s.values||[]).find((t=>Or(t,e)))!==void 0}function Mo(s,e){if(s===e)return 0;const t=Gs(s),i=Gs(e);if(t!==i)return Fe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Fe(s.booleanValue,e.booleanValue);case 2:return(function(u,d){const m=mt(u.integerValue||u.doubleValue),g=mt(d.integerValue||d.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(s,e);case 3:return Fg(s.timestampValue,e.timestampValue);case 4:return Fg(Za(s),Za(e));case 5:return Th(s.stringValue,e.stringValue);case 6:return(function(u,d){const m=Ks(u),g=Ks(d);return m.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,d){const m=u.split("/"),g=d.split("/");for(let y=0;y<m.length&&y<g.length;y++){const x=Fe(m[y],g[y]);if(x!==0)return x}return Fe(m.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,d){const m=Fe(mt(u.latitude),mt(d.latitude));return m!==0?m:Fe(mt(u.longitude),mt(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return Mg(s.arrayValue,e.arrayValue);case 10:return(function(u,d){const m=u.fields||{},g=d.fields||{},y=m[Zu]?.arrayValue,x=g[Zu]?.arrayValue,_=Fe(y?.values?.length||0,x?.values?.length||0);return _!==0?_:Mg(y,x)})(s.mapValue,e.mapValue);case 11:return(function(u,d){if(u===Ru.mapValue&&d===Ru.mapValue)return 0;if(u===Ru.mapValue)return 1;if(d===Ru.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),y=d.fields||{},x=Object.keys(y);g.sort(),x.sort();for(let _=0;_<g.length&&_<x.length;++_){const R=Th(g[_],x[_]);if(R!==0)return R;const z=Mo(m[g[_]],y[x[_]]);if(z!==0)return z}return Fe(g.length,x.length)})(s.mapValue,e.mapValue);default:throw Te(23264,{he:t})}}function Fg(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Fe(s,e);const t=Ws(s),i=Ws(e),o=Fe(t.seconds,i.seconds);return o!==0?o:Fe(t.nanos,i.nanos)}function Mg(s,e){const t=s.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const u=Mo(t[o],i[o]);if(u)return u}return Fe(t.length,i.length)}function Lo(s){return Ih(s)}function Ih(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const i=Ws(t);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return Ks(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return ye.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let i="[",o=!0;for(const u of t.values||[])o?o=!1:i+=",",i+=Ih(u);return i+"]"})(s.arrayValue):"mapValue"in s?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const d of i)u?u=!1:o+=",",o+=`${d}:${Ih(t.fields[d])}`;return o+"}"})(s.mapValue):Te(61005,{value:s})}function Lu(s){switch(Gs(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=mc(s);return e?16+Lu(e):16;case 5:return 2*s.stringValue.length;case 6:return Ks(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,u)=>o+Lu(u)),0)})(s.arrayValue);case 10:case 11:return(function(i){let o=0;return Mi(i.fields,((u,d)=>{o+=u.length+Lu(d)})),o})(s.mapValue);default:throw Te(13486,{value:s})}}function Sh(s){return!!s&&"integerValue"in s}function rf(s){return!!s&&"arrayValue"in s}function Lg(s){return!!s&&"nullValue"in s}function jg(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function ju(s){return!!s&&"mapValue"in s}function uI(s){return(s?.mapValue?.fields||{})[Uv]?.stringValue===zv}function qa(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Mi(s.mapValue.fields,((t,i)=>e.mapValue.fields[t]=qa(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=qa(s.arrayValue.values[t]);return e}return{...s}}function cI(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===lI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.value=e}static empty(){return new jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!ju(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qa(t)}setAll(e){let t=Ut.emptyPath(),i={},o=[];e.forEach(((d,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,i,o),i={},o=[],t=m.popLast()}d?i[m.lastSegment()]=qa(d):o.push(m.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,i,o)}delete(e){const t=this.field(e.popLast());ju(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Or(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];ju(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Mi(t,((o,u)=>e[o]=u));for(const o of i)delete e[o]}clone(){return new jn(qa(this.value))}}function Bv(s){const e=[];return Mi(s.fields,((t,i)=>{const o=new Ut([t]);if(ju(i)){const u=Bv(i.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)})),new rr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e,t,i,o,u,d,m){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=u,this.data=d,this.documentState=m}static newInvalidDocument(e){return new Yt(e,0,ke.min(),ke.min(),ke.min(),jn.empty(),0)}static newFoundDocument(e,t,i,o){return new Yt(e,1,t,ke.min(),i,o,0)}static newNoDocument(e,t){return new Yt(e,2,t,ke.min(),ke.min(),jn.empty(),0)}static newUnknownDocument(e,t){return new Yt(e,3,t,ke.min(),ke.min(),jn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,t){this.position=e,this.inclusive=t}}function Ug(s,e,t){let i=0;for(let o=0;o<s.position.length;o++){const u=e[o],d=s.position[o];if(u.field.isKeyField()?i=ye.comparator(ye.fromName(d.referenceValue),t.key):i=Mo(d,t.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function zg(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Or(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,t="asc"){this.field=e,this.dir=t}}function dI(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{}class kt extends $v{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new fI(e,t,i):t==="array-contains"?new gI(e,i):t==="in"?new yI(e,i):t==="not-in"?new vI(e,i):t==="array-contains-any"?new _I(e,i):new kt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new pI(e,i):new mI(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Mo(t,this.value)):t!==null&&Gs(this.value)===Gs(t)&&this.matchesComparison(Mo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fr extends $v{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Fr(e,t)}matches(e){return Hv(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Hv(s){return s.op==="and"}function qv(s){return hI(s)&&Hv(s)}function hI(s){for(const e of s.filters)if(e instanceof Fr)return!1;return!0}function kh(s){if(s instanceof kt)return s.field.canonicalString()+s.op.toString()+Lo(s.value);if(qv(s))return s.filters.map((e=>kh(e))).join(",");{const e=s.filters.map((t=>kh(t))).join(",");return`${s.op}(${e})`}}function Wv(s,e){return s instanceof kt?(function(i,o){return o instanceof kt&&i.op===o.op&&i.field.isEqual(o.field)&&Or(i.value,o.value)})(s,e):s instanceof Fr?(function(i,o){return o instanceof Fr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((u,d,m)=>u&&Wv(d,o.filters[m])),!0):!1})(s,e):void Te(19439)}function Kv(s){return s instanceof kt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Lo(t.value)}`})(s):s instanceof Fr?(function(t){return t.op.toString()+" {"+t.getFilters().map(Kv).join(" ,")+"}"})(s):"Filter"}class fI extends kt{constructor(e,t,i){super(e,t,i),this.key=ye.fromName(i.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class pI extends kt{constructor(e,t){super(e,"in",t),this.keys=Gv("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class mI extends kt{constructor(e,t){super(e,"not-in",t),this.keys=Gv("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Gv(s,e){return(e.arrayValue?.values||[]).map((t=>ye.fromName(t.referenceValue)))}class gI extends kt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return rf(t)&&tl(t.arrayValue,this.value)}}class yI extends kt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&tl(this.value.arrayValue,t)}}class vI extends kt{constructor(e,t){super(e,"not-in",t)}matches(e){if(tl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!tl(this.value.arrayValue,t)}}class _I extends kt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!rf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>tl(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,t=null,i=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.Te=null}}function Bg(s,e=null,t=[],i=[],o=null,u=null,d=null){return new wI(s,e,t,i,o,u,d)}function sf(s){const e=Ae(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>kh(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(u){return u.field.canonicalString()+u.dir})(i))).join(","),pc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Lo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Lo(i))).join(",")),e.Te=t}return e.Te}function of(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!dI(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!Wv(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!zg(s.startAt,e.startAt)&&zg(s.endAt,e.endAt)}function Ch(s){return ye.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,t=null,i=[],o=[],u=null,d="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function EI(s,e,t,i,o,u,d,m){return new gc(s,e,t,i,o,u,d,m)}function af(s){return new gc(s)}function $g(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function xI(s){return s.collectionGroup!==null}function Wa(s){const e=Ae(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),t.add(u.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new At(Ut.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(m=m.add(y.field))}))})),m})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new tc(u,i))})),t.has(Ut.keyField().canonicalString())||e.Ie.push(new tc(Ut.keyField(),i))}return e.Ie}function br(s){const e=Ae(s);return e.Ee||(e.Ee=TI(e,Wa(s))),e.Ee}function TI(s,e){if(s.limitType==="F")return Bg(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new tc(o.field,u)}));const t=s.endAt?new ec(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new ec(s.startAt.position,s.startAt.inclusive):null;return Bg(s.path,s.collectionGroup,e,s.filters,s.limit,t,i)}}function Ah(s,e,t){return new gc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function yc(s,e){return of(br(s),br(e))&&s.limitType===e.limitType}function Qv(s){return`${sf(br(s))}|lt:${s.limitType}`}function So(s){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>Kv(o))).join(", ")}]`),pc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Lo(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Lo(o))).join(",")),`Target(${i})`})(br(s))}; limitType=${s.limitType})`}function vc(s,e){return e.isFoundDocument()&&(function(i,o){const u=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):ye.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)})(s,e)&&(function(i,o){for(const u of Wa(i))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(i,o){for(const u of i.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(i,o){return!(i.startAt&&!(function(d,m,g){const y=Ug(d,m,g);return d.inclusive?y<=0:y<0})(i.startAt,Wa(i),o)||i.endAt&&!(function(d,m,g){const y=Ug(d,m,g);return d.inclusive?y>=0:y>0})(i.endAt,Wa(i),o))})(s,e)}function II(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Yv(s){return(e,t)=>{let i=!1;for(const o of Wa(s)){const u=SI(o,e,t);if(u!==0)return u;i=i||o.field.isKeyField()}return 0}}function SI(s,e,t){const i=s.field.isKeyField()?ye.comparator(e.key,t.key):(function(u,d,m){const g=d.data.field(u),y=m.data.field(u);return g!==null&&y!==null?Mo(g,y):Te(42886)})(s.field,e,t);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return Te(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,u]of i)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Mi(this.inner,((t,i)=>{for(const[o,u]of i)e(o,u)}))}isEmpty(){return Vv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI=new ut(ye.comparator);function is(){return kI}const Xv=new ut(ye.comparator);function Ua(...s){let e=Xv;for(const t of s)e=e.insert(t.key,t);return e}function Jv(s){let e=Xv;return s.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Si(){return Ka()}function Zv(){return Ka()}function Ka(){return new Li((s=>s.toString()),((s,e)=>s.isEqual(e)))}const CI=new ut(ye.comparator),AI=new At(ye.comparator);function Me(...s){let e=AI;for(const t of s)e=e.add(t);return e}const RI=new At(Fe);function bI(){return RI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xu(e)?"-0":e}}function e_(s){return{integerValue:""+s}}function t_(s,e){return rI(e)?e_(e):lf(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(){this._=void 0}}function NI(s,e,t){return s instanceof nc?(function(o,u){const d={fields:{[Mv]:{stringValue:Fv},[jv]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&nf(u)&&(u=mc(u)),u&&(d.fields[Lv]=u),{mapValue:d}})(t,e):s instanceof nl?r_(s,e):s instanceof rl?s_(s,e):(function(o,u){const d=n_(o,u),m=Hg(d)+Hg(o.Ae);return Sh(d)&&Sh(o.Ae)?e_(m):lf(o.serializer,m)})(s,e)}function PI(s,e,t){return s instanceof nl?r_(s,e):s instanceof rl?s_(s,e):t}function n_(s,e){return s instanceof sl?(function(i){return Sh(i)||(function(u){return!!u&&"doubleValue"in u})(i)})(e)?e:{integerValue:0}:null}class nc extends _c{}class nl extends _c{constructor(e){super(),this.elements=e}}function r_(s,e){const t=i_(e);for(const i of s.elements)t.some((o=>Or(o,i)))||t.push(i);return{arrayValue:{values:t}}}class rl extends _c{constructor(e){super(),this.elements=e}}function s_(s,e){let t=i_(e);for(const i of s.elements)t=t.filter((o=>!Or(o,i)));return{arrayValue:{values:t}}}class sl extends _c{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Hg(s){return mt(s.integerValue||s.doubleValue)}function i_(s){return rf(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e,t){this.field=e,this.transform=t}}function VI(s,e){return s.field.isEqual(e.field)&&(function(i,o){return i instanceof nl&&o instanceof nl||i instanceof rl&&o instanceof rl?Fo(i.elements,o.elements,Or):i instanceof sl&&o instanceof sl?Or(i.Ae,o.Ae):i instanceof nc&&o instanceof nc})(s.transform,e.transform)}class OI{constructor(e,t){this.version=e,this.transformResults=t}}class Nr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Nr}static exists(e){return new Nr(void 0,e)}static updateTime(e){return new Nr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Uu(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class wc{}function o_(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new l_(s.key,Nr.none()):new fl(s.key,s.data,Nr.none());{const t=s.data,i=jn.empty();let o=new At(Ut.comparator);for(let u of e.fields)if(!o.has(u)){let d=t.field(u);d===null&&u.length>1&&(u=u.popLast(),d=t.field(u)),d===null?i.delete(u):i.set(u,d),o=o.add(u)}return new ji(s.key,i,new rr(o.toArray()),Nr.none())}}function FI(s,e,t){s instanceof fl?(function(o,u,d){const m=o.value.clone(),g=Wg(o.fieldTransforms,u,d.transformResults);m.setAll(g),u.convertToFoundDocument(d.version,m).setHasCommittedMutations()})(s,e,t):s instanceof ji?(function(o,u,d){if(!Uu(o.precondition,u))return void u.convertToUnknownDocument(d.version);const m=Wg(o.fieldTransforms,u,d.transformResults),g=u.data;g.setAll(a_(o)),g.setAll(m),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(s,e,t):(function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function Ga(s,e,t,i){return s instanceof fl?(function(u,d,m,g){if(!Uu(u.precondition,d))return m;const y=u.value.clone(),x=Kg(u.fieldTransforms,g,d);return y.setAll(x),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(s,e,t,i):s instanceof ji?(function(u,d,m,g){if(!Uu(u.precondition,d))return m;const y=Kg(u.fieldTransforms,g,d),x=d.data;return x.setAll(a_(u)),x.setAll(y),d.convertToFoundDocument(d.version,x).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((_=>_.field)))})(s,e,t,i):(function(u,d,m){return Uu(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m})(s,e,t)}function MI(s,e){let t=null;for(const i of s.fieldTransforms){const o=e.data.field(i.field),u=n_(i.transform,o||null);u!=null&&(t===null&&(t=jn.empty()),t.set(i.field,u))}return t||null}function qg(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Fo(i,o,((u,d)=>VI(u,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class fl extends wc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ji extends wc{constructor(e,t,i,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function a_(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=s.data.field(t);e.set(t,i)}})),e}function Wg(s,e,t){const i=new Map;Ke(s.length===t.length,32656,{Re:t.length,Ve:s.length});for(let o=0;o<t.length;o++){const u=s[o],d=u.transform,m=e.data.field(u.field);i.set(u.field,PI(d,m,t[o]))}return i}function Kg(s,e,t){const i=new Map;for(const o of s){const u=o.transform,d=t.data.field(o.field);i.set(o.field,NI(u,d,e))}return i}class l_ extends wc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LI extends wc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&FI(u,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Ga(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Ga(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Zv();return this.mutations.forEach((o=>{const u=e.get(o.key),d=u.overlayedDocument;let m=this.applyToLocalView(d,u.mutatedFields);m=t.has(o.key)?null:m;const g=o_(d,m);g!==null&&i.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(ke.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Me())}isEqual(e){return this.batchId===e.batchId&&Fo(this.mutations,e.mutations,((t,i)=>qg(t,i)))&&Fo(this.baseMutations,e.baseMutations,((t,i)=>qg(t,i)))}}class uf{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Ke(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return CI})();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,i[d].version);return new uf(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Et,ze;function BI(s){switch(s){case W.OK:return Te(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return Te(15467,{code:s})}}function u_(s){if(s===void 0)return ss("GRPC error has no .code"),W.UNKNOWN;switch(s){case Et.OK:return W.OK;case Et.CANCELLED:return W.CANCELLED;case Et.UNKNOWN:return W.UNKNOWN;case Et.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case Et.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case Et.INTERNAL:return W.INTERNAL;case Et.UNAVAILABLE:return W.UNAVAILABLE;case Et.UNAUTHENTICATED:return W.UNAUTHENTICATED;case Et.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case Et.NOT_FOUND:return W.NOT_FOUND;case Et.ALREADY_EXISTS:return W.ALREADY_EXISTS;case Et.PERMISSION_DENIED:return W.PERMISSION_DENIED;case Et.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case Et.ABORTED:return W.ABORTED;case Et.OUT_OF_RANGE:return W.OUT_OF_RANGE;case Et.UNIMPLEMENTED:return W.UNIMPLEMENTED;case Et.DATA_LOSS:return W.DATA_LOSS;default:return Te(39323,{code:s})}}(ze=Et||(Et={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI=new $s([4294967295,4294967295],0);function Gg(s){const e=$I().encode(s),t=new Tv;return t.update(e),new Uint8Array(t.digest())}function Qg(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new $s([t,i],0),new $s([o,u],0)]}class cf{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new za(`Invalid padding: ${t}`);if(i<0)throw new za(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new za(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new za(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=$s.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply($s.fromNumber(i)));return o.compare(HI)===1&&(o=new $s([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Gg(e),[i,o]=Qg(t);for(let u=0;u<this.hashCount;u++){const d=this.ye(i,o,u);if(!this.we(d))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new cf(u,o,t);return i.forEach((m=>d.insert(m))),d}insert(e){if(this.ge===0)return;const t=Gg(e),[i,o]=Qg(t);for(let u=0;u<this.hashCount;u++){const d=this.ye(i,o,u);this.Se(d)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class za extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,t,i,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,pl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Ec(ke.min(),o,new ut(Fe),is(),Me())}}class pl{constructor(e,t,i,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new pl(i,t,Me(),Me(),Me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class c_{constructor(e,t){this.targetId=e,this.Ce=t}}class d_{constructor(e,t,i=zt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Yg{constructor(){this.ve=0,this.Fe=Xg(),this.Me=zt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Me(),t=Me(),i=Me();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Te(38017,{changeType:u})}})),new pl(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=Xg()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class qI{constructor(e){this.Ge=e,this.ze=new Map,this.je=is(),this.Je=bu(),this.He=bu(),this.Ye=new ut(Fe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Te(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const u=o.target;if(Ch(u))if(i===0){const d=new ye(u.path);this.et(t,d,Yt.newNoDocument(d,ke.min()))}else Ke(i===1,20013,{expectedCount:i});else{const d=this._t(t);if(d!==i){const m=this.ut(e),g=m?this.ct(m,e,d):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:u=0}=t;let d,m;try{d=Ks(i).toUint8Array()}catch(g){if(g instanceof Ov)return Oo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new cf(d,o,u)}catch(g){return Oo(g instanceof za?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((u=>{const d=this.Ge.ht(),m=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(t,u,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((u,d)=>{const m=this.ot(d);if(m){if(u.current&&Ch(m.target)){const g=new ye(m.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,Yt.newNoDocument(g,e))}u.Be&&(t.set(d,u.ke()),u.qe())}}));let i=Me();this.He.forEach(((u,d)=>{let m=!0;d.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(i=i.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const o=new Ec(e,t,this.Ye,this.je,i);return this.je=is(),this.Je=bu(),this.He=bu(),this.Ye=new ut(Fe),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Yg,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new At(Fe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new At(Fe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||oe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Yg),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function bu(){return new ut(ye.comparator)}function Xg(){return new ut(ye.comparator)}const WI={asc:"ASCENDING",desc:"DESCENDING"},KI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},GI={and:"AND",or:"OR"};class QI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Rh(s,e){return s.useProto3Json||pc(e)?e:{value:e}}function rc(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function h_(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function YI(s,e){return rc(s,e.toTimestamp())}function Pr(s){return Ke(!!s,49232),ke.fromTimestamp((function(t){const i=Ws(t);return new rt(i.seconds,i.nanos)})(s))}function df(s,e){return bh(s,e).canonicalString()}function bh(s,e){const t=(function(o){return new nt(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?t:t.child(e)}function f_(s){const e=nt.fromString(s);return Ke(v_(e),10190,{key:e.toString()}),e}function Nh(s,e){return df(s.databaseId,e.path)}function uh(s,e){const t=f_(e);if(t.get(1)!==s.databaseId.projectId)throw new me(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new me(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new ye(m_(t))}function p_(s,e){return df(s.databaseId,e)}function XI(s){const e=f_(s);return e.length===4?nt.emptyPath():m_(e)}function Ph(s){return new nt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function m_(s){return Ke(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function Jg(s,e,t){return{name:Nh(s,e),fields:t.value.mapValue.fields}}function JI(s,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Te(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(y,x){return y.useProto3Json?(Ke(x===void 0||typeof x=="string",58123),zt.fromBase64String(x||"")):(Ke(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),zt.fromUint8Array(x||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&(function(y){const x=y.code===void 0?W.UNKNOWN:u_(y.code);return new me(x,y.message||"")})(d);t=new d_(i,o,u,m||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=uh(s,i.document.name),u=Pr(i.document.updateTime),d=i.document.createTime?Pr(i.document.createTime):ke.min(),m=new jn({mapValue:{fields:i.document.fields}}),g=Yt.newFoundDocument(o,u,d,m),y=i.targetIds||[],x=i.removedTargetIds||[];t=new zu(y,x,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=uh(s,i.document),u=i.readTime?Pr(i.readTime):ke.min(),d=Yt.newNoDocument(o,u),m=i.removedTargetIds||[];t=new zu([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=uh(s,i.document),u=i.removedTargetIds||[];t=new zu([],u,o,null)}else{if(!("filter"in e))return Te(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:u}=i,d=new zI(o,u),m=i.targetId;t=new c_(m,d)}}return t}function ZI(s,e){let t;if(e instanceof fl)t={update:Jg(s,e.key,e.value)};else if(e instanceof l_)t={delete:Nh(s,e.key)};else if(e instanceof ji)t={update:Jg(s,e.key,e.data),updateMask:lS(e.fieldMask)};else{if(!(e instanceof LI))return Te(16599,{Vt:e.type});t={verify:Nh(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(u,d){const m=d.transform;if(m instanceof nc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof nl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof rl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof sl)return{fieldPath:d.field.canonicalString(),increment:m.Ae};throw Te(20930,{transform:d.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:YI(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Te(27497)})(s,e.precondition)),t}function eS(s,e){return s&&s.length>0?(Ke(e!==void 0,14353),s.map((t=>(function(o,u){let d=o.updateTime?Pr(o.updateTime):Pr(u);return d.isEqual(ke.min())&&(d=Pr(u)),new OI(d,o.transformResults||[])})(t,e)))):[]}function tS(s,e){return{documents:[p_(s,e.path)]}}function nS(s,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=p_(s,o);const u=(function(y){if(y.length!==0)return y_(Fr.create(y,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const d=(function(y){if(y.length!==0)return y.map((x=>(function(R){return{field:ko(R.field),direction:iS(R.dir)}})(x)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const m=Rh(s,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function rS(s){let e=XI(s.parent);const t=s.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Ke(i===1,65062);const x=t.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let u=[];t.where&&(u=(function(_){const R=g_(_);return R instanceof Fr&&qv(R)?R.getFilters():[R]})(t.where));let d=[];t.orderBy&&(d=(function(_){return _.map((R=>(function(K){return new tc(Co(K.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(K.direction))})(R)))})(t.orderBy));let m=null;t.limit&&(m=(function(_){let R;return R=typeof _=="object"?_.value:_,pc(R)?null:R})(t.limit));let g=null;t.startAt&&(g=(function(_){const R=!!_.before,z=_.values||[];return new ec(z,R)})(t.startAt));let y=null;return t.endAt&&(y=(function(_){const R=!_.before,z=_.values||[];return new ec(z,R)})(t.endAt)),EI(e,o,d,u,m,"F",g,y)}function sS(s,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function g_(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Co(t.unaryFilter.field);return kt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Co(t.unaryFilter.field);return kt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Co(t.unaryFilter.field);return kt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Co(t.unaryFilter.field);return kt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(s):s.fieldFilter!==void 0?(function(t){return kt.create(Co(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return Fr.create(t.compositeFilter.filters.map((i=>g_(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(t.compositeFilter.op))})(s):Te(30097,{filter:s})}function iS(s){return WI[s]}function oS(s){return KI[s]}function aS(s){return GI[s]}function ko(s){return{fieldPath:s.canonicalString()}}function Co(s){return Ut.fromServerFormat(s.fieldPath)}function y_(s){return s instanceof kt?(function(t){if(t.op==="=="){if(jg(t.value))return{unaryFilter:{field:ko(t.field),op:"IS_NAN"}};if(Lg(t.value))return{unaryFilter:{field:ko(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(jg(t.value))return{unaryFilter:{field:ko(t.field),op:"IS_NOT_NAN"}};if(Lg(t.value))return{unaryFilter:{field:ko(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ko(t.field),op:oS(t.op),value:t.value}}})(s):s instanceof Fr?(function(t){const i=t.getFilters().map((o=>y_(o)));return i.length===1?i[0]:{compositeFilter:{op:aS(t.op),filters:i}}})(s):Te(54877,{filter:s})}function lS(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function v_(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,t,i,o,u=ke.min(),d=ke.min(),m=zt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new js(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new js(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e){this.yt=e}}function cS(s){const e=rS({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Ah(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(){this.Cn=new hS}addToCollectionParentIndex(e,t){return this.Cn.add(t),$.resolve()}getCollectionParents(e,t){return $.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return $.resolve()}deleteFieldIndex(e,t){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,t){return $.resolve()}getDocumentsMatchingTarget(e,t){return $.resolve(null)}getIndexType(e,t){return $.resolve(0)}getFieldIndexes(e,t){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,t){return $.resolve(qs.min())}getMinOffsetFromCollectionGroup(e,t){return $.resolve(qs.min())}updateCollectionGroup(e,t,i){return $.resolve()}updateIndexEntries(e,t){return $.resolve()}}class hS{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new At(nt.comparator),u=!o.has(i);return this.index[t]=o.add(i),u}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new At(nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},__=41943040;class fn{static withCacheSize(e){return new fn(e,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fn.DEFAULT_COLLECTION_PERCENTILE=10,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fn.DEFAULT=new fn(__,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fn.DISABLED=new fn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new jo(0)}static cr(){return new jo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey="LruGarbageCollector",fS=1048576;function ty([s,e],[t,i]){const o=Fe(s,t);return o===0?Fe(e,i):o}class pS{constructor(e){this.Ir=e,this.buffer=new At(ty),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();ty(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class mS{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){oe(ey,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ko(t)?oe(ey,"Ignoring IndexedDB error during garbage collection: ",t):await Wo(t)}await this.Vr(3e5)}))}}class gS{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return $.resolve(fc.ce);const i=new pS(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(Zg)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zg):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,u,d,m,g,y;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),o=this.params.maximumSequenceNumbersToCollect):o=_,d=Date.now(),this.nthSequenceNumber(e,o)))).next((_=>(i=_,m=Date.now(),this.removeTargets(e,i,t)))).next((_=>(u=_,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((_=>(y=Date.now(),Io()<=Ve.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-x}ms
	Determined least recently used ${o} in `+(m-d)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${_} documents in `+(y-g)+`ms
Total Duration: ${y-x}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:_}))))}}function yS(s,e){return new gS(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(){this.changes=new Li((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Yt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?$.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&Ga(i.mutation,o,rr.empty(),rt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Me()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Me()){const o=Si();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((u=>{let d=Ua();return u.forEach(((m,g)=>{d=d.insert(m,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const i=Si();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Me())))}populateOverlays(e,t,i){const o=[];return i.forEach((u=>{t.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((d,m)=>{t.set(d,m)}))}))}computeViews(e,t,i,o){let u=is();const d=Ka(),m=(function(){return Ka()})();return t.forEach(((g,y)=>{const x=i.get(y.key);o.has(y.key)&&(x===void 0||x.mutation instanceof ji)?u=u.insert(y.key,y):x!==void 0?(d.set(y.key,x.mutation.getFieldMask()),Ga(x.mutation,y,x.mutation.getFieldMask(),rt.now())):d.set(y.key,rr.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((y,x)=>d.set(y,x))),t.forEach(((y,x)=>m.set(y,new _S(x,d.get(y)??null)))),m)))}recalculateAndSaveOverlays(e,t){const i=Ka();let o=new ut(((d,m)=>d-m)),u=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const m of d)m.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let x=i.get(g)||rr.empty();x=m.applyToLocalView(y,x),i.set(g,x);const _=(o.get(m.batchId)||Me()).add(g);o=o.insert(m.batchId,_)}))})).next((()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),y=g.key,x=g.value,_=Zv();x.forEach((R=>{if(!u.has(R)){const z=o_(t.get(R),i.get(R));z!==null&&_.set(R,z),u=u.add(R)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,_))}return $.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(d){return ye.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):xI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-u.size):$.resolve(Si());let m=Ja,g=u;return d.next((y=>$.forEach(y,((x,_)=>(m<_.largestBatchId&&(m=_.largestBatchId),u.get(x)?$.resolve():this.remoteDocumentCache.getEntry(e,x).next((R=>{g=g.insert(x,R)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,g,y,Me()))).next((x=>({batchId:m,changes:Jv(x)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next((i=>{let o=Ua();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const u=t.collectionGroup;let d=Ua();return this.indexManager.getCollectionParents(e,u).next((m=>$.forEach(m,(g=>{const y=(function(_,R){return new gc(R,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((x=>{x.forEach(((_,R)=>{d=d.insert(_,R)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,u,o)))).next((d=>{u.forEach(((g,y)=>{const x=y.getKey();d.get(x)===null&&(d=d.insert(x,Yt.newInvalidDocument(x)))}));let m=Ua();return d.forEach(((g,y)=>{const x=u.get(g);x!==void 0&&Ga(x.mutation,y,rr.empty(),rt.now()),vc(t,y)&&(m=m.insert(g,y))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return $.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Pr(o.createTime)}})(t)),$.resolve()}getNamedQuery(e,t){return $.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:cS(o.bundledQuery),readTime:Pr(o.readTime)}})(t)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(){this.overlays=new ut(ye.comparator),this.qr=new Map}getOverlay(e,t){return $.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Si();return $.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&i.set(o,u)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,u)=>{this.St(e,t,u)})),$.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(i)),$.resolve()}getOverlaysForCollection(e,t,i){const o=Si(),u=t.length+1,d=new ye(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const g=m.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>i&&o.set(g.getKey(),g)}return $.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let u=new ut(((y,x)=>y-x));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let x=u.get(y.largestBatchId);x===null&&(x=Si(),u=u.insert(y.largestBatchId,x)),x.set(y.getKey(),y)}}const m=Si(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,x)=>m.set(y,x))),!(m.size()>=o)););return $.resolve(m)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new UI(t,i));let u=this.qr.get(t);u===void 0&&(u=Me(),this.qr.set(t,u)),this.qr.set(t,u.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(){this.sessionToken=zt.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(){this.Qr=new At(Vt.$r),this.Ur=new At(Vt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Vt(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Vt(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new ye(new nt([])),i=new Vt(t,e),o=new Vt(t,e+1),u=[];return this.Ur.forEachInRange([i,o],(d=>{this.Gr(d),u.push(d.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ye(new nt([])),i=new Vt(t,e),o=new Vt(t,e+1);let u=Me();return this.Ur.forEachInRange([i,o],(d=>{u=u.add(d.key)})),u}containsKey(e){const t=new Vt(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Vt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ye.comparator(e.key,t.key)||Fe(e.Yr,t.Yr)}static Kr(e,t){return Fe(e.Yr,t.Yr)||ye.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new At(Vt.$r)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new jI(u,t,i,o);this.mutationQueue.push(d);for(const m of o)this.Zr=this.Zr.add(new Vt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return $.resolve(d)}lookupMutationBatch(e,t){return $.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),u=o<0?0:o;return $.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?tf:this.tr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Vt(t,0),o=new Vt(t,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([i,o],(d=>{const m=this.Xr(d.Yr);u.push(m)})),$.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new At(Fe);return t.forEach((o=>{const u=new Vt(o,0),d=new Vt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,d],(m=>{i=i.add(m.Yr)}))})),$.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let u=i;ye.isDocumentKey(u)||(u=u.child(""));const d=new Vt(new ye(u),0);let m=new At(Fe);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(m=m.add(g.Yr)),!0)}),d),$.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Ke(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return $.forEach(t.mutations,(o=>{const u=new Vt(o.key,t.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Vt(t,0),o=this.Zr.firstAfterOrEqual(i);return $.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e){this.ri=e,this.docs=(function(){return new ut(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),u=o?o.size:0,d=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return $.resolve(i?i.document.mutableCopy():Yt.newInvalidDocument(t))}getEntries(e,t){let i=is();return t.forEach((o=>{const u=this.docs.get(o);i=i.insert(o,u?u.document.mutableCopy():Yt.newInvalidDocument(o))})),$.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let u=is();const d=t.path,m=new ye(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:y,value:{document:x}}=g.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||ZT(JT(x),i)<=0||(o.has(x.key)||vc(t,x))&&(u=u.insert(x.key,x.mutableCopy()))}return $.resolve(u)}getAllFromCollectionGroup(e,t,i,o){Te(9500)}ii(e,t){return $.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new kS(this)}getSize(e){return $.resolve(this.size)}}class kS extends vS{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),$.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e){this.persistence=e,this.si=new Li((t=>sf(t)),of),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.oi=0,this._i=new hf,this.targetCount=0,this.ai=jo.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),$.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new jo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,$.resolve()}updateTargetData(e,t){return this.Pr(t),$.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,t,i){let o=0;const u=[];return this.si.forEach(((d,m)=>{m.sequenceNumber<=t&&i.get(m.targetId)===null&&(this.si.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),$.waitFor(u).next((()=>o))}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return $.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),$.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach((d=>{u.push(o.markPotentiallyOrphaned(e,d))})),$.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),$.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return $.resolve(i)}containsKey(e,t){return $.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e,t){this.ui={},this.overlays={},this.ci=new fc(0),this.li=!1,this.li=!0,this.hi=new TS,this.referenceDelegate=e(this),this.Pi=new CS(this),this.indexManager=new dS,this.remoteDocumentCache=(function(o){return new SS(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new uS(t),this.Ii=new ES(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new xS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new IS(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){oe("MemoryPersistence","Starting transaction:",e);const o=new AS(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,t){return $.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class AS extends tI{constructor(e){super(),this.currentSequenceNumber=e}}class ff{constructor(e){this.persistence=e,this.Ri=new hf,this.Vi=null}static mi(e){return new ff(e)}get fi(){if(this.Vi)return this.Vi;throw Te(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),$.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),$.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),$.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,(i=>{const o=ye.fromPath(i);return this.gi(e,o).next((u=>{u||t.removeEntry(o,ke.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return $.or([()=>$.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class sc{constructor(e,t){this.persistence=e,this.pi=new Li((i=>sI(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=yS(this,t)}static mi(e,t){return new sc(e,t)}Ei(){}di(e){return $.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return $.forEach(this.pi,((i,o)=>this.br(e,i,o).next((u=>u?$.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,t).next((m=>{m||(i++,u.removeEntry(d,ke.min()))})))).next((()=>u.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),$.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),$.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),$.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Lu(e.data.value)),t}br(e,t,i){return $.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return $.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=Me(),o=Me();for(const u of t.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new pf(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return lE()?8:nI(Xt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const u={result:null};return this.ys(e,t).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ws(e,t,o,i).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new RS;return this.Ss(e,t,d).next((m=>{if(u.result=m,this.Vs)return this.bs(e,t,d,m.size)}))})).next((()=>u.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(Io()<=Ve.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",So(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):(Io()<=Ve.DEBUG&&oe("QueryEngine","Query:",So(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(Io()<=Ve.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",So(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,br(t))):$.resolve())}ys(e,t){if($g(t))return $.resolve(null);let i=br(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Ah(t,null,"F"),i=br(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((u=>{const d=Me(...u);return this.ps.getDocuments(e,d).next((m=>this.indexManager.getMinOffset(e,i).next((g=>{const y=this.Ds(t,m);return this.Cs(t,y,d,g.readTime)?this.ys(e,Ah(t,null,"F")):this.vs(e,y,t,g)}))))})))))}ws(e,t,i,o){return $g(t)||o.isEqual(ke.min())?$.resolve(null):this.ps.getDocuments(e,i).next((u=>{const d=this.Ds(t,u);return this.Cs(t,d,i,o)?$.resolve(null):(Io()<=Ve.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),So(t)),this.vs(e,d,t,XT(o,Ja)).next((m=>m)))}))}Ds(e,t){let i=new At(Yv(e));return t.forEach(((o,u)=>{vc(e,u)&&(i=i.add(u))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,t,i){return Io()<=Ve.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",So(t)),this.ps.getDocumentsMatchingQuery(e,t,qs.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((u=>(t.forEach((d=>{u=u.insert(d.key,d)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf="LocalStore",NS=3e8;class PS{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new ut(Fe),this.xs=new Li((u=>sf(u)),of),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function DS(s,e,t,i){return new PS(s,e,t,i)}async function E_(s,e){const t=Ae(s);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((u=>(o=u,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((u=>{const d=[],m=[];let g=Me();for(const y of o){d.push(y.batchId);for(const x of y.mutations)g=g.add(x.key)}for(const y of u){m.push(y.batchId);for(const x of y.mutations)g=g.add(x.key)}return t.localDocuments.getDocuments(i,g).next((y=>({Ls:y,removedBatchIds:d,addedBatchIds:m})))}))}))}function VS(s,e){const t=Ae(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),u=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,y,x){const _=y.batch,R=_.keys();let z=$.resolve();return R.forEach((K=>{z=z.next((()=>x.getEntry(g,K))).next((J=>{const B=y.docVersions.get(K);Ke(B!==null,48541),J.version.compareTo(B)<0&&(_.applyToRemoteDocument(J,y),J.isValidDocument()&&(J.setReadTime(y.commitVersion),x.addEntry(J)))}))})),z.next((()=>m.mutationQueue.removeMutationBatch(g,_)))})(t,i,e,u).next((()=>u.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(m){let g=Me();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(g=g.add(m.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function x_(s){const e=Ae(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function OS(s,e){const t=Ae(s),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const m=[];e.targetChanges.forEach(((x,_)=>{const R=o.get(_);if(!R)return;m.push(t.Pi.removeMatchingKeys(u,x.removedDocuments,_).next((()=>t.Pi.addMatchingKeys(u,x.addedDocuments,_))));let z=R.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(_)!==null?z=z.withResumeToken(zt.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):x.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(x.resumeToken,i)),o=o.insert(_,z),(function(J,B,ne){return J.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-J.snapshotVersion.toMicroseconds()>=NS?!0:ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0})(R,z,x)&&m.push(t.Pi.updateTargetData(u,z))}));let g=is(),y=Me();if(e.documentUpdates.forEach((x=>{e.resolvedLimboDocuments.has(x)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,x))})),m.push(FS(u,d,e.documentUpdates).next((x=>{g=x.ks,y=x.qs}))),!i.isEqual(ke.min())){const x=t.Pi.getLastRemoteSnapshotVersion(u).next((_=>t.Pi.setTargetsMetadata(u,u.currentSequenceNumber,i)));m.push(x)}return $.waitFor(m).next((()=>d.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,g,y))).next((()=>g))})).then((u=>(t.Ms=o,u)))}function FS(s,e,t){let i=Me(),o=Me();return t.forEach((u=>i=i.add(u))),e.getEntries(s,i).next((u=>{let d=is();return t.forEach(((m,g)=>{const y=u.get(m);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(ke.min())?(e.removeEntry(m,g.readTime),d=d.insert(m,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),d=d.insert(m,g)):oe(mf,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",g.version)})),{ks:d,qs:o}}))}function MS(s,e){const t=Ae(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=tf),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function LS(s,e){const t=Ae(s);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((u=>u?(o=u,$.resolve(o)):t.Pi.allocateTargetId(i).next((d=>(o=new js(e,d,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function Dh(s,e,t){const i=Ae(s),o=i.Ms.get(e),u=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",u,(d=>i.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Ko(d))throw d;oe(mf,`Failed to update sequence numbers for target ${e}: ${d}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function ny(s,e,t){const i=Ae(s);let o=ke.min(),u=Me();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,y,x){const _=Ae(g),R=_.xs.get(x);return R!==void 0?$.resolve(_.Ms.get(R)):_.Pi.getTargetData(y,x)})(i,d,br(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(d,m.targetId).next((g=>{u=g}))})).next((()=>i.Fs.getDocumentsMatchingQuery(d,e,t?o:ke.min(),t?u:Me()))).next((m=>(jS(i,II(e),m),{documents:m,Qs:u})))))}function jS(s,e,t){let i=s.Os.get(e)||ke.min();t.forEach(((o,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)})),s.Os.set(e,i)}class ry{constructor(){this.activeTargetIds=bI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class US{constructor(){this.Mo=new ry,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ry,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy="ConnectivityMonitor";class iy{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){oe(sy,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){oe(sy,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nu=null;function Vh(){return Nu===null?Nu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Nu++,"0x"+Nu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch="RestConnection",BS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $S{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Ju?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,u){const d=Vh(),m=this.zo(e,t.toUriEncodedString());oe(ch,`Sending RPC '${e}' ${d}:`,m,i);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,u);const{host:y}=new URL(m),x=Bo(y);return this.Jo(e,m,g,i,x).then((_=>(oe(ch,`Received RPC '${e}' ${d}: `,_),_)),(_=>{throw Oo(ch,`RPC '${e}' ${d} failed with error: `,_,"url: ",m,"request:",i),_}))}Ho(e,t,i,o,u,d){return this.Go(e,t,i,o,u)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+qo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,u)=>e[u]=o)),i&&i.headers.forEach(((o,u)=>e[u]=o))}zo(e,t){const i=BS[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gt="WebChannelConnection";class qS extends $S{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,u){const d=Vh();return new Promise(((m,g)=>{const y=new Iv;y.setWithCredentials(!0),y.listenOnce(Sv.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Mu.NO_ERROR:const _=y.getResponseJson();oe(Gt,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(_)),m(_);break;case Mu.TIMEOUT:oe(Gt,`RPC '${e}' ${d} timed out`),g(new me(W.DEADLINE_EXCEEDED,"Request time out"));break;case Mu.HTTP_ERROR:const R=y.getStatus();if(oe(Gt,`RPC '${e}' ${d} failed with status:`,R,"response text:",y.getResponseText()),R>0){let z=y.getResponseJson();Array.isArray(z)&&(z=z[0]);const K=z?.error;if(K&&K.status&&K.message){const J=(function(ne){const ge=ne.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(ge)>=0?ge:W.UNKNOWN})(K.status);g(new me(J,K.message))}else g(new me(W.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new me(W.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{oe(Gt,`RPC '${e}' ${d} completed.`)}}));const x=JSON.stringify(o);oe(Gt,`RPC '${e}' ${d} sending request:`,o),y.send(t,"POST",x,i,15)}))}T_(e,t,i){const o=Vh(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=Av(),m=Cv(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const x=u.join("");oe(Gt,`Creating RPC '${e}' stream ${o}: ${x}`,g);const _=d.createWebChannel(x,g);this.I_(_);let R=!1,z=!1;const K=new HS({Yo:B=>{z?oe(Gt,`Not sending because RPC '${e}' stream ${o} is closed:`,B):(R||(oe(Gt,`Opening RPC '${e}' stream ${o} transport.`),_.open(),R=!0),oe(Gt,`RPC '${e}' stream ${o} sending:`,B),_.send(B))},Zo:()=>_.close()}),J=(B,ne,ge)=>{B.listen(ne,(G=>{try{ge(G)}catch(Ne){setTimeout((()=>{throw Ne}),0)}}))};return J(_,ja.EventType.OPEN,(()=>{z||(oe(Gt,`RPC '${e}' stream ${o} transport opened.`),K.o_())})),J(_,ja.EventType.CLOSE,(()=>{z||(z=!0,oe(Gt,`RPC '${e}' stream ${o} transport closed`),K.a_(),this.E_(_))})),J(_,ja.EventType.ERROR,(B=>{z||(z=!0,Oo(Gt,`RPC '${e}' stream ${o} transport errored. Name:`,B.name,"Message:",B.message),K.a_(new me(W.UNAVAILABLE,"The operation could not be completed")))})),J(_,ja.EventType.MESSAGE,(B=>{if(!z){const ne=B.data[0];Ke(!!ne,16349);const ge=ne,G=ge?.error||ge[0]?.error;if(G){oe(Gt,`RPC '${e}' stream ${o} received error:`,G);const Ne=G.status;let je=(function(I){const C=Et[I];if(C!==void 0)return u_(C)})(Ne),Se=G.message;je===void 0&&(je=W.INTERNAL,Se="Unknown error status: "+Ne+" with message "+G.message),z=!0,K.a_(new me(je,Se)),_.close()}else oe(Gt,`RPC '${e}' stream ${o} received:`,ne),K.u_(ne)}})),J(m,kv.STAT_EVENT,(B=>{B.stat===xh.PROXY?oe(Gt,`RPC '${e}' stream ${o} detected buffering proxy`):B.stat===xh.NOPROXY&&oe(Gt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{K.__()}),0),K}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function dh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(s){return new QI(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e,t,i=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&oe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy="PersistentStream";class I_{constructor(e,t,i,o,u,d,m,g){this.Mi=e,this.S_=i,this.b_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new T_(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(ss(t.toString()),ss("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new me(W.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return oe(oy,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(oe(oy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class WS extends I_{constructor(e,t,i,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,d),this.serializer=u}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=JI(this.serializer,e),i=(function(u){if(!("targetChange"in u))return ke.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?ke.min():d.readTime?Pr(d.readTime):ke.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Ph(this.serializer),t.addTarget=(function(u,d){let m;const g=d.target;if(m=Ch(g)?{documents:tS(u,g)}:{query:nS(u,g).ft},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=h_(u,d.resumeToken);const y=Rh(u,d.expectedCount);y!==null&&(m.expectedCount=y)}else if(d.snapshotVersion.compareTo(ke.min())>0){m.readTime=rc(u,d.snapshotVersion.toTimestamp());const y=Rh(u,d.expectedCount);y!==null&&(m.expectedCount=y)}return m})(this.serializer,e);const i=sS(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Ph(this.serializer),t.removeTarget=e,this.q_(t)}}class KS extends I_{constructor(e,t,i,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,d),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=eS(e.writeResults,e.commitTime),i=Pr(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Ph(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>ZI(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{}class QS extends GS{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new me(W.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Go(e,bh(t,i),o,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new me(W.UNKNOWN,u.toString())}))}Ho(e,t,i,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,m])=>this.connection.Ho(e,bh(t,i),o,d,m,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new me(W.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class YS{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ss(t),this.aa=!1):oe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi="RemoteStore";class XS{constructor(e,t,i,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((d=>{i.enqueueAndForget((async()=>{Ui(this)&&(oe(Oi,"Restarting streams for network reachability change."),await(async function(g){const y=Ae(g);y.Ea.add(4),await ml(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Tc(y)})(this))}))})),this.Ra=new YS(i,o)}}async function Tc(s){if(Ui(s))for(const e of s.da)await e(!0)}async function ml(s){for(const e of s.da)await e(!1)}function S_(s,e){const t=Ae(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),_f(t)?vf(t):Go(t).O_()&&yf(t,e))}function gf(s,e){const t=Ae(s),i=Go(t);t.Ia.delete(e),i.O_()&&k_(t,e),t.Ia.size===0&&(i.O_()?i.L_():Ui(t)&&t.Ra.set("Unknown"))}function yf(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Go(s).Y_(e)}function k_(s,e){s.Va.Ue(e),Go(s).Z_(e)}function vf(s){s.Va=new qI({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Go(s).start(),s.Ra.ua()}function _f(s){return Ui(s)&&!Go(s).x_()&&s.Ia.size>0}function Ui(s){return Ae(s).Ea.size===0}function C_(s){s.Va=void 0}async function JS(s){s.Ra.set("Online")}async function ZS(s){s.Ia.forEach(((e,t)=>{yf(s,e)}))}async function ek(s,e){C_(s),_f(s)?(s.Ra.ha(e),vf(s)):s.Ra.set("Unknown")}async function tk(s,e,t){if(s.Ra.set("Online"),e instanceof d_&&e.state===2&&e.cause)try{await(async function(o,u){const d=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,d),o.Ia.delete(m),o.Va.removeTarget(m))})(s,e)}catch(i){oe(Oi,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await ic(s,i)}else if(e instanceof zu?s.Va.Ze(e):e instanceof c_?s.Va.st(e):s.Va.tt(e),!t.isEqual(ke.min()))try{const i=await x_(s.localStore);t.compareTo(i)>=0&&await(function(u,d){const m=u.Va.Tt(d);return m.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const x=u.Ia.get(y);x&&u.Ia.set(y,x.withResumeToken(g.resumeToken,d))}})),m.targetMismatches.forEach(((g,y)=>{const x=u.Ia.get(g);if(!x)return;u.Ia.set(g,x.withResumeToken(zt.EMPTY_BYTE_STRING,x.snapshotVersion)),k_(u,g);const _=new js(x.target,g,y,x.sequenceNumber);yf(u,_)})),u.remoteSyncer.applyRemoteEvent(m)})(s,t)}catch(i){oe(Oi,"Failed to raise snapshot:",i),await ic(s,i)}}async function ic(s,e,t){if(!Ko(e))throw e;s.Ea.add(1),await ml(s),s.Ra.set("Offline"),t||(t=()=>x_(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{oe(Oi,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await Tc(s)}))}function A_(s,e){return e().catch((t=>ic(s,t,e)))}async function Ic(s){const e=Ae(s),t=Qs(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:tf;for(;nk(e);)try{const o=await MS(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,rk(e,o)}catch(o){await ic(e,o)}R_(e)&&b_(e)}function nk(s){return Ui(s)&&s.Ta.length<10}function rk(s,e){s.Ta.push(e);const t=Qs(s);t.O_()&&t.X_&&t.ea(e.mutations)}function R_(s){return Ui(s)&&!Qs(s).x_()&&s.Ta.length>0}function b_(s){Qs(s).start()}async function sk(s){Qs(s).ra()}async function ik(s){const e=Qs(s);for(const t of s.Ta)e.ea(t.mutations)}async function ok(s,e,t){const i=s.Ta.shift(),o=uf.from(i,e,t);await A_(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await Ic(s)}async function ak(s,e){e&&Qs(s).X_&&await(async function(i,o){if((function(d){return BI(d)&&d!==W.ABORTED})(o.code)){const u=i.Ta.shift();Qs(i).B_(),await A_(i,(()=>i.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Ic(i)}})(s,e),R_(s)&&b_(s)}async function ay(s,e){const t=Ae(s);t.asyncQueue.verifyOperationInProgress(),oe(Oi,"RemoteStore received new credentials");const i=Ui(t);t.Ea.add(3),await ml(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Tc(t)}async function lk(s,e){const t=Ae(s);e?(t.Ea.delete(2),await Tc(t)):e||(t.Ea.add(2),await ml(t),t.Ra.set("Unknown"))}function Go(s){return s.ma||(s.ma=(function(t,i,o){const u=Ae(t);return u.sa(),new WS(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:JS.bind(null,s),t_:ZS.bind(null,s),r_:ek.bind(null,s),H_:tk.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),_f(s)?vf(s):s.Ra.set("Unknown")):(await s.ma.stop(),C_(s))}))),s.ma}function Qs(s){return s.fa||(s.fa=(function(t,i,o){const u=Ae(t);return u.sa(),new KS(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:sk.bind(null,s),r_:ak.bind(null,s),ta:ik.bind(null,s),na:ok.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await Ic(s)):(await s.fa.stop(),s.Ta.length>0&&(oe(Oi,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,t,i,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=u,this.deferred=new Ci,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,u){const d=Date.now()+i,m=new wf(e,t,d,o,u);return m.start(i),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ef(s,e){if(ss("AsyncQueue",`${e}: ${s}`),Ko(s))return new me(W.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{static emptySet(e){return new Po(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ye.comparator(t.key,i.key):(t,i)=>ye.comparator(t.key,i.key),this.keyedMap=Ua(),this.sortedSet=new ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Po)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=i.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Po;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(){this.ga=new ut(ye.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Te(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Uo{constructor(e,t,i,o,u,d,m,g,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,u){const d=[];return t.forEach((m=>{d.push({type:0,doc:m})})),new Uo(e,t,Po.emptySet(t),d,i,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class ck{constructor(){this.queries=uy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Ae(t),u=o.queries;o.queries=uy(),u.forEach(((d,m)=>{for(const g of m.Sa)g.onError(i)}))})(this,new me(W.ABORTED,"Firestore shutting down"))}}function uy(){return new Li((s=>Qv(s)),yc)}async function dk(s,e){const t=Ae(s);let i=3;const o=e.query;let u=t.queries.get(o);u?!u.ba()&&e.Da()&&(i=2):(u=new uk,i=e.Da()?0:1);try{switch(i){case 0:u.wa=await t.onListen(o,!0);break;case 1:u.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const m=Ef(d,`Initialization of query '${So(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,u),u.Sa.push(e),e.va(t.onlineState),u.wa&&e.Fa(u.wa)&&xf(t)}async function hk(s,e){const t=Ae(s),i=e.query;let o=3;const u=t.queries.get(i);if(u){const d=u.Sa.indexOf(e);d>=0&&(u.Sa.splice(d,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function fk(s,e){const t=Ae(s);let i=!1;for(const o of e){const u=o.query,d=t.queries.get(u);if(d){for(const m of d.Sa)m.Fa(o)&&(i=!0);d.wa=o}}i&&xf(t)}function pk(s,e,t){const i=Ae(s),o=i.queries.get(e);if(o)for(const u of o.Sa)u.onError(t);i.queries.delete(e)}function xf(s){s.Ca.forEach((e=>{e.next()}))}var Oh,cy;(cy=Oh||(Oh={})).Ma="default",cy.Cache="cache";class mk{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Uo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Uo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Oh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(e){this.key=e}}class P_{constructor(e){this.key=e}}class gk{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Me(),this.mutatedKeys=Me(),this.eu=Yv(e),this.tu=new Po(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new ly,o=t?t.tu:this.tu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((x,_)=>{const R=o.get(x),z=vc(this.query,_)?_:null,K=!!R&&this.mutatedKeys.has(R.key),J=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let B=!1;R&&z?R.data.isEqual(z.data)?K!==J&&(i.track({type:3,doc:z}),B=!0):this.su(R,z)||(i.track({type:2,doc:z}),B=!0,(g&&this.eu(z,g)>0||y&&this.eu(z,y)<0)&&(m=!0)):!R&&z?(i.track({type:0,doc:z}),B=!0):R&&!z&&(i.track({type:1,doc:R}),B=!0,(g||y)&&(m=!0)),B&&(z?(d=d.add(z),u=J?u.add(x):u.delete(x)):(d=d.delete(x),u=u.delete(x)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const x=this.query.limitType==="F"?d.last():d.first();d=d.delete(x.key),u=u.delete(x.key),i.track({type:1,doc:x})}return{tu:d,iu:i,Cs:m,mutatedKeys:u}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((x,_)=>(function(z,K){const J=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Rt:B})}};return J(z)-J(K)})(x.type,_.type)||this.eu(x.doc,_.doc))),this.ou(i),o=o??!1;const m=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,y=g!==this.Za;return this.Za=g,d.length!==0||y?{snapshot:new Uo(this.query,e.tu,u,d,e.mutatedKeys,g===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ly,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Me(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new P_(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new N_(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Me();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Uo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Tf="SyncEngine";class yk{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class vk{constructor(e){this.key=e,this.hu=!1}}class _k{constructor(e,t,i,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Li((m=>Qv(m)),yc),this.Iu=new Map,this.Eu=new Set,this.du=new ut(ye.comparator),this.Au=new Map,this.Ru=new hf,this.Vu={},this.mu=new Map,this.fu=jo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function wk(s,e,t=!0){const i=L_(s);let o;const u=i.Tu.get(e);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await D_(i,e,t,!0),o}async function Ek(s,e){const t=L_(s);await D_(t,e,!0,!1)}async function D_(s,e,t,i){const o=await LS(s.localStore,br(e)),u=o.targetId,d=s.sharedClientState.addLocalQueryTarget(u,t);let m;return i&&(m=await xk(s,e,u,d==="current",o.resumeToken)),s.isPrimaryClient&&t&&S_(s.remoteStore,o),m}async function xk(s,e,t,i,o){s.pu=(_,R,z)=>(async function(J,B,ne,ge){let G=B.view.ru(ne);G.Cs&&(G=await ny(J.localStore,B.query,!1).then((({documents:b})=>B.view.ru(b,G))));const Ne=ge&&ge.targetChanges.get(B.targetId),je=ge&&ge.targetMismatches.get(B.targetId)!=null,Se=B.view.applyChanges(G,J.isPrimaryClient,Ne,je);return hy(J,B.targetId,Se.au),Se.snapshot})(s,_,R,z);const u=await ny(s.localStore,e,!0),d=new gk(e,u.Qs),m=d.ru(u.documents),g=pl.createSynthesizedTargetChangeForCurrentChange(t,i&&s.onlineState!=="Offline",o),y=d.applyChanges(m,s.isPrimaryClient,g);hy(s,t,y.au);const x=new yk(e,t,d);return s.Tu.set(e,x),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),y.snapshot}async function Tk(s,e,t){const i=Ae(s),o=i.Tu.get(e),u=i.Iu.get(o.targetId);if(u.length>1)return i.Iu.set(o.targetId,u.filter((d=>!yc(d,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Dh(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&gf(i.remoteStore,o.targetId),Fh(i,o.targetId)})).catch(Wo)):(Fh(i,o.targetId),await Dh(i.localStore,o.targetId,!0))}async function Ik(s,e){const t=Ae(s),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),gf(t.remoteStore,i.targetId))}async function Sk(s,e,t){const i=Pk(s);try{const o=await(function(d,m){const g=Ae(d),y=rt.now(),x=m.reduce(((z,K)=>z.add(K.key)),Me());let _,R;return g.persistence.runTransaction("Locally write mutations","readwrite",(z=>{let K=is(),J=Me();return g.Ns.getEntries(z,x).next((B=>{K=B,K.forEach(((ne,ge)=>{ge.isValidDocument()||(J=J.add(ne))}))})).next((()=>g.localDocuments.getOverlayedDocuments(z,K))).next((B=>{_=B;const ne=[];for(const ge of m){const G=MI(ge,_.get(ge.key).overlayedDocument);G!=null&&ne.push(new ji(ge.key,G,Bv(G.value.mapValue),Nr.exists(!0)))}return g.mutationQueue.addMutationBatch(z,y,ne,m)})).next((B=>{R=B;const ne=B.applyToLocalDocumentSet(_,J);return g.documentOverlayCache.saveOverlays(z,B.batchId,ne)}))})).then((()=>({batchId:R.batchId,changes:Jv(_)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(d,m,g){let y=d.Vu[d.currentUser.toKey()];y||(y=new ut(Fe)),y=y.insert(m,g),d.Vu[d.currentUser.toKey()]=y})(i,o.batchId,t),await gl(i,o.changes),await Ic(i.remoteStore)}catch(o){const u=Ef(o,"Failed to persist write");t.reject(u)}}async function V_(s,e){const t=Ae(s);try{const i=await OS(t.localStore,e);e.targetChanges.forEach(((o,u)=>{const d=t.Au.get(u);d&&(Ke(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?Ke(d.hu,14607):o.removedDocuments.size>0&&(Ke(d.hu,42227),d.hu=!1))})),await gl(t,i,e)}catch(i){await Wo(i)}}function dy(s,e,t){const i=Ae(s);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((u,d)=>{const m=d.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(d,m){const g=Ae(d);g.onlineState=m;let y=!1;g.queries.forEach(((x,_)=>{for(const R of _.Sa)R.va(m)&&(y=!0)})),y&&xf(g)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function kk(s,e,t){const i=Ae(s);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),u=o&&o.key;if(u){let d=new ut(ye.comparator);d=d.insert(u,Yt.newNoDocument(u,ke.min()));const m=Me().add(u),g=new Ec(ke.min(),new Map,new ut(Fe),d,m);await V_(i,g),i.du=i.du.remove(u),i.Au.delete(e),If(i)}else await Dh(i.localStore,e,!1).then((()=>Fh(i,e,t))).catch(Wo)}async function Ck(s,e){const t=Ae(s),i=e.batch.batchId;try{const o=await VS(t.localStore,e);F_(t,i,null),O_(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await gl(t,o)}catch(o){await Wo(o)}}async function Ak(s,e,t){const i=Ae(s);try{const o=await(function(d,m){const g=Ae(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let x;return g.mutationQueue.lookupMutationBatch(y,m).next((_=>(Ke(_!==null,37113),x=_.keys(),g.mutationQueue.removeMutationBatch(y,_)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,x,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,x))).next((()=>g.localDocuments.getDocuments(y,x)))}))})(i.localStore,e);F_(i,e,t),O_(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await gl(i,o)}catch(o){await Wo(o)}}function O_(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function F_(s,e,t){const i=Ae(s);let o=i.Vu[i.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function Fh(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),t&&s.Pu.yu(i,t);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((i=>{s.Ru.containsKey(i)||M_(s,i)}))}function M_(s,e){s.Eu.delete(e.path.canonicalString());const t=s.du.get(e);t!==null&&(gf(s.remoteStore,t),s.du=s.du.remove(e),s.Au.delete(t),If(s))}function hy(s,e,t){for(const i of t)i instanceof N_?(s.Ru.addReference(i.key,e),Rk(s,i)):i instanceof P_?(oe(Tf,"Document no longer in limbo: "+i.key),s.Ru.removeReference(i.key,e),s.Ru.containsKey(i.key)||M_(s,i.key)):Te(19791,{wu:i})}function Rk(s,e){const t=e.key,i=t.path.canonicalString();s.du.get(t)||s.Eu.has(i)||(oe(Tf,"New document in limbo: "+t),s.Eu.add(i),If(s))}function If(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new ye(nt.fromString(e)),i=s.fu.next();s.Au.set(i,new vk(t)),s.du=s.du.insert(t,i),S_(s.remoteStore,new js(br(af(t.path)),i,"TargetPurposeLimboResolution",fc.ce))}}async function gl(s,e,t){const i=Ae(s),o=[],u=[],d=[];i.Tu.isEmpty()||(i.Tu.forEach(((m,g)=>{d.push(i.pu(g,e,t).then((y=>{if((y||t)&&i.isPrimaryClient){const x=y?!y.fromCache:t?.targetChanges.get(g.targetId)?.current;i.sharedClientState.updateQueryState(g.targetId,x?"current":"not-current")}if(y){o.push(y);const x=pf.As(g.targetId,y);u.push(x)}})))})),await Promise.all(d),i.Pu.H_(o),await(async function(g,y){const x=Ae(g);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>$.forEach(y,(R=>$.forEach(R.Es,(z=>x.persistence.referenceDelegate.addReference(_,R.targetId,z))).next((()=>$.forEach(R.ds,(z=>x.persistence.referenceDelegate.removeReference(_,R.targetId,z)))))))))}catch(_){if(!Ko(_))throw _;oe(mf,"Failed to update sequence numbers: "+_)}for(const _ of y){const R=_.targetId;if(!_.fromCache){const z=x.Ms.get(R),K=z.snapshotVersion,J=z.withLastLimboFreeSnapshotVersion(K);x.Ms=x.Ms.insert(R,J)}}})(i.localStore,u))}async function bk(s,e){const t=Ae(s);if(!t.currentUser.isEqual(e)){oe(Tf,"User change. New user:",e.toKey());const i=await E_(t.localStore,e);t.currentUser=e,(function(u,d){u.mu.forEach((m=>{m.forEach((g=>{g.reject(new me(W.CANCELLED,d))}))})),u.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await gl(t,i.Ls)}}function Nk(s,e){const t=Ae(s),i=t.Au.get(e);if(i&&i.hu)return Me().add(i.key);{let o=Me();const u=t.Iu.get(e);if(!u)return o;for(const d of u){const m=t.Tu.get(d);o=o.unionWith(m.view.nu)}return o}}function L_(s){const e=Ae(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=V_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Nk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kk.bind(null,e),e.Pu.H_=fk.bind(null,e.eventManager),e.Pu.yu=pk.bind(null,e.eventManager),e}function Pk(s){const e=Ae(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ck.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ak.bind(null,e),e}class oc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=xc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return DS(this.persistence,new bS,e.initialUser,this.serializer)}Cu(e){return new w_(ff.mi,this.serializer)}Du(e){return new US}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}oc.provider={build:()=>new oc};class Dk extends oc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ke(this.persistence.referenceDelegate instanceof sc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new mS(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?fn.withCacheSize(this.cacheSizeBytes):fn.DEFAULT;return new w_((i=>sc.mi(i,t)),this.serializer)}}class Mh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>dy(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=bk.bind(null,this.syncEngine),await lk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new ck})()}createDatastore(e){const t=xc(e.databaseInfo.databaseId),i=(function(u){return new qS(u)})(e.databaseInfo);return(function(u,d,m,g){return new QS(u,d,m,g)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,u,d,m){return new XS(i,o,u,d,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>dy(this.syncEngine,t,0)),(function(){return iy.v()?new iy:new zS})())}createSyncEngine(e,t){return(function(o,u,d,m,g,y,x){const _=new _k(o,u,d,m,g,y);return x&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=Ae(t);oe(Oi,"RemoteStore shutting down."),i.Ea.add(5),await ml(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Mh.provider={build:()=>new Mh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ss("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys="FirestoreClient";class Ok{constructor(e,t,i,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=Qt.UNAUTHENTICATED,this.clientId=Zh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,(async d=>{oe(Ys,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(oe(Ys,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ci;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Ef(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function hh(s,e){s.asyncQueue.verifyOperationInProgress(),oe(Ys,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let i=t.initialUser;s.setCredentialChangeListener((async o=>{i.isEqual(o)||(await E_(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function fy(s,e){s.asyncQueue.verifyOperationInProgress();const t=await Fk(s);oe(Ys,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((i=>ay(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,o)=>ay(e.remoteStore,o))),s._onlineComponents=e}async function Fk(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){oe(Ys,"Using user provided OfflineComponentProvider");try{await hh(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===W.FAILED_PRECONDITION||o.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Oo("Error using user provided cache. Falling back to memory cache: "+t),await hh(s,new oc)}}else oe(Ys,"Using default OfflineComponentProvider"),await hh(s,new Dk(void 0));return s._offlineComponents}async function j_(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(oe(Ys,"Using user provided OnlineComponentProvider"),await fy(s,s._uninitializedComponentsProvider._online)):(oe(Ys,"Using default OnlineComponentProvider"),await fy(s,new Mh))),s._onlineComponents}function Mk(s){return j_(s).then((e=>e.syncEngine))}async function py(s){const e=await j_(s),t=e.eventManager;return t.onListen=wk.bind(null,e.syncEngine),t.onUnlisten=Tk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Ek.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Ik.bind(null,e.syncEngine),t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U_(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_="firestore.googleapis.com",gy=!0;class yy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new me(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=z_,this.ssl=gy}else this.host=e.host,this.ssl=e.ssl??gy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=__;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<fS)throw new me(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}YT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=U_(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new me(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new me(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new me(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new UT;switch(i.type){case"firstParty":return new HT(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new me(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=my.get(t);i&&(oe("ComponentProvider","Removing Datastore"),my.delete(t),i.terminate())})(this),Promise.resolve()}}function Lk(s,e,t,i={}){s=Ai(s,Sc);const o=Bo(e),u=s._getSettings(),d={...u,emulatorOptions:s._getEmulatorOptions()},m=`${e}:${t}`;o&&(Vy(`https://${m}`),Oy("Firestore",!0)),u.host!==z_&&u.host!==m&&Oo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:m,ssl:o,emulatorOptions:i};if(!bi(g,d)&&(s._setSettings(g),i.mockUserToken)){let y,x;if(typeof i.mockUserToken=="string")y=i.mockUserToken,x=Qt.MOCK_USER;else{y=Zw(i.mockUserToken,s._app?.options.projectId);const _=i.mockUserToken.sub||i.mockUserToken.user_id;if(!_)throw new me(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new Qt(_)}s._authCredentials=new zT(new bv(y,x))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new kc(this.firestore,e,this._query)}}class Ct{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ct(this.firestore,e,this._key)}toJSON(){return{type:Ct._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(hl(t,Ct._jsonSchema))return new Ct(e,i||null,new ye(nt.fromString(t.referencePath)))}}Ct._jsonSchemaVersion="firestore/documentReference/1.0",Ct._jsonSchema={type:xt("string",Ct._jsonSchemaVersion),referencePath:xt("string")};class Hs extends kc{constructor(e,t,i){super(e,t,af(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ct(this.firestore,null,new ye(e))}withConverter(e){return new Hs(this.firestore,e,this._path)}}function B_(s,e,...t){if(s=nn(s),Nv("collection","path",e),s instanceof Sc){const i=nt.fromString(e,...t);return bg(i),new Hs(s,null,i)}{if(!(s instanceof Ct||s instanceof Hs))throw new me(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(nt.fromString(e,...t));return bg(i),new Hs(s.firestore,null,i)}}function $_(s,e,...t){if(s=nn(s),arguments.length===1&&(e=Zh.newId()),Nv("doc","path",e),s instanceof Sc){const i=nt.fromString(e,...t);return Rg(i),new Ct(s,null,new ye(i))}{if(!(s instanceof Ct||s instanceof Hs))throw new me(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(nt.fromString(e,...t));return Rg(i),new Ct(s.firestore,s instanceof Hs?s.converter:null,new ye(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy="AsyncQueue";class _y{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new T_(this,"async_queue_retry"),this._c=()=>{const i=dh();i&&oe(vy,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=dh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=dh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ci;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ko(e))throw e;oe(vy,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,ss("INTERNAL UNHANDLED ERROR: ",wy(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=wf.createAndSchedule(this,e,t,i,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Te(47125,{Pc:wy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function wy(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(s){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const u of i)if(u in o&&typeof o[u]=="function")return!0;return!1})(s,["next","error","complete"])}class il extends Sc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new _y,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _y(e),this._firestoreClient=void 0,await e}}}function jk(s,e){const t=typeof s=="object"?s:jy(),i=typeof s=="string"?s:Ju,o=$h(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const u=Xw("firestore");u&&Lk(o,...u)}return o}function H_(s){if(s._terminated)throw new me(W.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||Uk(s),s._firestoreClient}function Uk(s){const e=s._freezeSettings(),t=(function(o,u,d,m){return new aI(o,u,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,U_(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new Ok(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Un(zt.fromBase64String(e))}catch(t){throw new me(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Un(zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Un._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(hl(e,Un._jsonSchema))return Un.fromBase64String(e.bytes)}}Un._jsonSchemaVersion="firestore/bytes/1.0",Un._jsonSchema={type:xt("string",Un._jsonSchemaVersion),bytes:xt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new me(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new me(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new me(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Dr._jsonSchemaVersion}}static fromJSON(e){if(hl(e,Dr._jsonSchema))return new Dr(e.latitude,e.longitude)}}Dr._jsonSchemaVersion="firestore/geoPoint/1.0",Dr._jsonSchema={type:xt("string",Dr._jsonSchemaVersion),latitude:xt("number"),longitude:xt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Vr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(hl(e,Vr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Vr(e.vectorValues);throw new me(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vr._jsonSchemaVersion="firestore/vectorValue/1.0",Vr._jsonSchema={type:xt("string",Vr._jsonSchemaVersion),vectorValues:xt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk=/^__.*__$/;class Bk{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new ji(e,this.data,this.fieldMask,t,this.fieldTransforms):new fl(e,this.data,t,this.fieldTransforms)}}function q_(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ac:s})}}class Cf{constructor(e,t,i,o,u,d){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Cf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ac(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(q_(this.Ac)&&zk.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class $k{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||xc(e)}Cc(e,t,i,o=!1){return new Cf({Ac:e,methodName:t,Dc:i,path:Ut.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function W_(s){const e=s._freezeSettings(),t=xc(s._databaseId);return new $k(s._databaseId,!!e.ignoreUndefinedProperties,t)}function K_(s,e,t,i,o,u={}){const d=s.Cc(u.merge||u.mergeFields?2:0,e,t,o);X_("Data must be an object, but it was:",d,i);const m=Q_(i,d);let g,y;if(u.merge)g=new rr(d.fieldMask),y=d.fieldTransforms;else if(u.mergeFields){const x=[];for(const _ of u.mergeFields){const R=Hk(e,_,t);if(!d.contains(R))throw new me(W.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);Wk(x,R)||x.push(R)}g=new rr(x),y=d.fieldTransforms.filter((_=>g.covers(_.field)))}else g=null,y=d.fieldTransforms;return new Bk(new jn(m),g,y)}class Af extends kf{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new sl(e.serializer,t_(e.serializer,this.Fc));return new DI(e.path,t)}isEqual(e){return e instanceof Af&&this.Fc===e.Fc}}function G_(s,e){if(Y_(s=nn(s)))return X_("Unsupported field value:",e,s),Q_(s,e);if(s instanceof kf)return(function(i,o){if(!q_(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const u=[];let d=0;for(const m of i){let g=G_(m,o.wc(d));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),d++}return{arrayValue:{values:u}}})(s,e)}return(function(i,o){if((i=nn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return t_(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=rt.fromDate(i);return{timestampValue:rc(o.serializer,u)}}if(i instanceof rt){const u=new rt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:rc(o.serializer,u)}}if(i instanceof Dr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Un)return{bytesValue:h_(o.serializer,i._byteString)};if(i instanceof Ct){const u=o.databaseId,d=i.firestore._databaseId;if(!d.isEqual(u))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:df(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Vr)return(function(d,m){return{mapValue:{fields:{[Uv]:{stringValue:zv},[Zu]:{arrayValue:{values:d.toArray().map((y=>{if(typeof y!="number")throw m.Sc("VectorValues must only contain numeric values.");return lf(m.serializer,y)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${ef(i)}`)})(s,e)}function Q_(s,e){const t={};return Vv(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Mi(s,((i,o)=>{const u=G_(o,e.mc(i));u!=null&&(t[i]=u)})),{mapValue:{fields:t}}}function Y_(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof rt||s instanceof Dr||s instanceof Un||s instanceof Ct||s instanceof kf||s instanceof Vr)}function X_(s,e,t){if(!Y_(t)||!Pv(t)){const i=ef(t);throw i==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+i)}}function Hk(s,e,t){if((e=nn(e))instanceof Sf)return e._internalPath;if(typeof e=="string")return J_(s,e);throw ac("Field path arguments must be of type string or ",s,!1,void 0,t)}const qk=new RegExp("[~\\*/\\[\\]]");function J_(s,e,t){if(e.search(qk)>=0)throw ac(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new Sf(...e.split("."))._internalPath}catch{throw ac(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function ac(s,e,t,i,o){const u=i&&!i.isEmpty(),d=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||d)&&(g+=" (found",u&&(g+=` in field ${i}`),d&&(g+=` in document ${o}`),g+=")"),new me(W.INVALID_ARGUMENT,m+s+g)}function Wk(s,e){return s.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e,t,i,o,u){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Kk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(e0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Kk extends Z_{data(){return super.data()}}function e0(s,e){return typeof e=="string"?J_(s,e):e instanceof Sf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new me(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Qk{convertValue(e,t="none"){switch(Gs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ks(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Mi(e,((o,u)=>{i[o]=this.convertValue(u,t)})),i}convertVectorValue(e){const t=e.fields?.[Zu].arrayValue?.values?.map((i=>mt(i.doubleValue)));return new Vr(t)}convertGeoPoint(e){return new Dr(mt(e.latitude),mt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=mc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Za(e));default:return null}}convertTimestamp(e){const t=Ws(e);return new rt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=nt.fromString(e);Ke(v_(i),9688,{name:e});const o=new el(i.get(1),i.get(3)),u=new ye(i.popFirst(5));return o.isEqual(t)||ss(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(s,e,t){let i;return i=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,i}class Ba{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ri extends Z_{constructor(e,t,i,o,u,d){super(e,t,i,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Bu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(e0("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new me(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ri._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ri._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ri._jsonSchema={type:xt("string",Ri._jsonSchemaVersion),bundleSource:xt("string","DocumentSnapshot"),bundleName:xt("string"),bundle:xt("string")};class Bu extends Ri{data(e={}){return super.data(e)}}class Do{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ba(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Bu(this._firestore,this._userDataWriter,i.key,i,new Ba(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new me(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((m=>{const g=new Bu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Ba(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new Bu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Ba(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,x=-1;return m.type!==0&&(y=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),x=d.indexOf(m.doc.key)),{type:Yk(m.type),doc:g,oldIndex:y,newIndex:x}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new me(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Do._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Zh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(t.push(u._document),i.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Yk(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:s})}}Do._jsonSchemaVersion="firestore/querySnapshot/1.0",Do._jsonSchema={type:xt("string",Do._jsonSchemaVersion),bundleSource:xt("string","QuerySnapshot"),bundleName:xt("string"),bundle:xt("string")};class n0 extends Qk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Un(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ct(this.firestore,null,t)}}function Xk(s,e,t){s=Ai(s,Ct);const i=Ai(s.firestore,il),o=t0(s.converter,e,t);return r0(i,[K_(W_(i),"setDoc",s._key,o,s.converter!==null,t).toMutation(s._key,Nr.none())])}function Jk(s,e){const t=Ai(s.firestore,il),i=$_(s),o=t0(s.converter,e);return r0(t,[K_(W_(s.firestore),"addDoc",i._key,o,s.converter!==null,{}).toMutation(i._key,Nr.exists(!1))]).then((()=>i))}function Zk(s,...e){s=nn(s);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Ey(e[i])||(t=e[i++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Ey(e[i])){const g=e[i];e[i]=g.next?.bind(g),e[i+1]=g.error?.bind(g),e[i+2]=g.complete?.bind(g)}let u,d,m;if(s instanceof Ct)d=Ai(s.firestore,il),m=af(s._key.path),u={next:g=>{e[i]&&e[i](eC(d,s,g))},error:e[i+1],complete:e[i+2]};else{const g=Ai(s,kc);d=Ai(g.firestore,il),m=g._query;const y=new n0(d);u={next:x=>{e[i]&&e[i](new Do(d,y,g,x))},error:e[i+1],complete:e[i+2]},Gk(s._query)}return(function(y,x,_,R){const z=new Vk(R),K=new mk(x,z,_);return y.asyncQueue.enqueueAndForget((async()=>dk(await py(y),K))),()=>{z.Nu(),y.asyncQueue.enqueueAndForget((async()=>hk(await py(y),K)))}})(H_(d),m,o,u)}function r0(s,e){return(function(i,o){const u=new Ci;return i.asyncQueue.enqueueAndForget((async()=>Sk(await Mk(i),o,u))),u.promise})(H_(s),e)}function eC(s,e,t){const i=t.docs.get(e._key),o=new n0(s);return new Ri(s,o,e._key,i,new Ba(t.hasPendingWrites,t.fromCache),e.converter)}function xy(s){return new Af("increment",s)}(function(e,t=!0){(function(o){qo=o})($o),Vo(new Ni("firestore",((i,{instanceIdentifier:o,options:u})=>{const d=i.getProvider("app").getImmediate(),m=new il(new BT(i.getProvider("auth-internal")),new qT(d,i.getProvider("app-check-internal")),(function(y,x){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new me(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new el(y.options.projectId,x)})(d,o),d);return u={useFetchStreams:t,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),Bs(Sg,kg,e),Bs(Sg,kg,"esm2020")})();var tC="firebase",nC="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bs(tC,nC,"app");const rC={apiKey:"AIzaSyDs1q0hGh15kQ8JvuuzZnVRJ3XZnIQBB9Q",authDomain:"stock-tracker-mvp-de099.firebaseapp.com",projectId:"stock-tracker-mvp-de099",storageBucket:"stock-tracker-mvp-de099.appspot.com",messagingSenderId:"309654323720",appId:"1:309654323720:web:3c8da6a81d61513ae8c7bd"},s0=Ly(rC),ki=LT(s0),Rf=jk(s0);function sC(){const[s,e]=Oe.useState(null),[t,i]=Oe.useState([]),[o,u]=Oe.useState(!0);return Oe.useEffect(()=>{const d=hv(ki,m=>{if(m){e(m.uid);const g=B_(Rf,"users",m.uid,"inventory"),y=Zk(g,x=>{const _=x.docs.map(R=>({id:R.id,...R.data()}));i(_),u(!1)},x=>{console.error(" Firestore listener error:",x),i([]),u(!1)});return()=>y()}else e(null),i([]),u(!1)});return()=>d()},[]),{uid:s,items:t,loading:o}}function iC({onNavigateToSignup:s,onLoginSuccess:e}){const[t,i]=Oe.useState(""),[o,u]=Oe.useState(""),[d,m]=Oe.useState(!1),[g,y]=Oe.useState(""),x=async _=>{_.preventDefault(),m(!0),y("");try{const R=await I1(ki,t,o);e(R.user)}catch(R){console.error(R),y(R.message||"Failed to login")}finally{m(!1)}};return w.jsx("div",{className:"flex flex-col justify-center items-center min-h-screen text-center px-6",style:{backgroundColor:"#E3F2FD",fontFamily:"Inter, Poppins, Roboto, sans-serif"},children:w.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8 w-full max-w-md",children:[w.jsx("h1",{className:"text-2xl font-bold mb-1 text-gray-800",children:" Stock Tracker"}),w.jsx("p",{className:"text-gray-500 mb-6",children:"Apna stock, apne phone par"}),w.jsxs("form",{onSubmit:x,className:"space-y-4",children:[w.jsx("input",{type:"email",placeholder:"Email",value:t,onChange:_=>i(_.target.value),className:"w-full border border-gray-300 rounded-xl p-3 focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0}),w.jsx("input",{type:"password",placeholder:"Password",value:o,onChange:_=>u(_.target.value),className:"w-full border border-gray-300 rounded-xl p-3 focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0}),g&&w.jsx("p",{className:"text-red-500 text-sm",children:g}),w.jsx("button",{type:"submit",disabled:d,className:"w-full bg-blue-600 text-white py-3 rounded-xl font-medium hover:bg-blue-700 transition",children:d?"Logging in...":"Login"})]}),w.jsxs("p",{className:"mt-4 text-gray-500",children:["or"," ",w.jsx("button",{onClick:s,className:"text-blue-600 hover:underline font-medium",children:"Create Account "})]})]})})}function oC({onNavigateToLogin:s,onSignUpSuccess:e}){const[t,i]=Oe.useState({email:"",password:"",organizationName:"",businessType:""}),[o,u]=Oe.useState(!1),[d,m]=Oe.useState(""),g=x=>{i({...t,[x.target.name]:x.target.value})},y=async x=>{x.preventDefault(),u(!0),m("");try{const R=(await T1(ki,t.email,t.password)).user;await Jk(B_(Rf,"users"),{uid:R.uid,organizationName:t.organizationName,businessType:t.businessType,createdAt:new Date().toISOString()}),e()}catch(_){console.error("SignUp Error:",_),m(_.message||"Failed to sign up")}finally{u(!1)}};return w.jsx("div",{className:"flex flex-col justify-center items-center min-h-screen text-center px-6",style:{backgroundColor:"#E3F2FD",fontFamily:"Inter, Poppins, Roboto, sans-serif"},children:w.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8 w-full max-w-md",children:[w.jsx("h1",{className:"text-2xl font-bold mb-1 text-gray-800",children:" Stock Tracker"}),w.jsx("p",{className:"text-gray-500 mb-6",children:"Create your account"}),w.jsxs("form",{onSubmit:y,className:"space-y-4",children:[w.jsx("input",{type:"email",name:"email",placeholder:"Email",value:t.email,onChange:g,className:"w-full border border-gray-300 rounded-xl p-3 focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0}),w.jsx("input",{type:"password",name:"password",placeholder:"Password",value:t.password,onChange:g,className:"w-full border border-gray-300 rounded-xl p-3 focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0}),w.jsx("input",{type:"text",name:"organizationName",placeholder:"Organization Name",value:t.organizationName,onChange:g,className:"w-full border border-gray-300 rounded-xl p-3 focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0}),w.jsxs("select",{name:"businessType",value:t.businessType,onChange:g,className:"w-full border border-gray-300 rounded-xl p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white text-gray-700",required:!0,children:[w.jsx("option",{value:"",children:"Select Nature of Business"}),w.jsx("option",{value:"Retail",children:"Retail"}),w.jsx("option",{value:"Wholesale",children:"Wholesale"}),w.jsx("option",{value:"Manufacturing",children:"Manufacturing"}),w.jsx("option",{value:"Service",children:"Service"}),w.jsx("option",{value:"Distribution",children:"Distribution"}),w.jsx("option",{value:"Other",children:"Other"})]}),d&&w.jsx("p",{className:"text-red-500 text-sm",children:d}),w.jsx("button",{type:"submit",disabled:o,className:"w-full bg-blue-600 text-white py-3 rounded-xl font-medium hover:bg-blue-700 transition",children:o?"Creating...":"Create Account"})]}),w.jsxs("p",{className:"mt-4 text-gray-500",children:["Already have an account?"," ",w.jsx("button",{onClick:s,className:"text-blue-600 hover:underline font-medium",children:"Login "})]})]})})}function aC({inventory:s,searchTerm:e,onSearchChange:t,onAdminClick:i,onItemClick:o,onLogout:u}){const[d,m]=Oe.useState("All"),g=["All",...Array.from(new Set(s.map(_=>_.category)))],y=s.filter(_=>{const R=_.model.toLowerCase().includes(e.toLowerCase())||_.category.toLowerCase().includes(e.toLowerCase()),z=d==="All"||_.category===d;return R&&z}),x=_=>Math.max(0,_.booked-_.dispatched)>0&&_.booked>0;return w.jsxs("div",{className:"flex flex-col min-h-screen",children:[w.jsxs("div",{className:"bg-white shadow-sm flex items-center justify-between relative px-4 py-6 sm:px-8",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("button",{onClick:i,className:"p-2 hover:bg-gray-100 rounded-xl transition-all active:scale-95","aria-label":"Settings",style:{minWidth:"44px",minHeight:"44px",transition:"all 300ms ease-out"},children:w.jsx(Fw,{className:"text-black",size:24})}),w.jsx("button",{onClick:u,className:"text-sm sm:text-base hover:underline transition-all",style:{color:"#1976D2",fontFamily:"Inter, Poppins, Roboto, sans-serif",minHeight:"44px",transition:"all 300ms ease-out"},children:"Logout"})]}),w.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:w.jsx("h1",{className:"text-black font-bold text-xl sm:text-2xl text-center whitespace-nowrap",style:{fontFamily:"Inter, sans-serif",color:"#1976D2"},children:"Stock Tracker"})}),w.jsx("div",{className:"w-20"})]}),w.jsxs("div",{className:"flex-1 overflow-auto px-4 py-4 pb-24 sm:px-8",style:{padding:"16px",paddingBottom:"80px"},children:[w.jsxs("div",{className:"bg-white rounded-2xl shadow-md mb-4 flex items-center px-4 h-16 sm:h-20",style:{borderColor:"#E0E0E0",borderWidth:"1px"},children:[w.jsx(lc,{className:"text-gray-400 mr-3",size:20}),w.jsx("input",{type:"text",placeholder:"Search model or category",value:e,onChange:_=>t(_.target.value),className:"flex-1 outline-none text-black bg-transparent text-sm sm:text-base",style:{fontFamily:"Inter, sans-serif"}})]}),w.jsx("div",{className:"mb-6 overflow-x-auto -mx-4 px-4 pb-2",children:w.jsx("div",{className:"flex gap-2",style:{minWidth:"min-content"},children:g.map(_=>w.jsx("button",{onClick:()=>m(_),className:"px-4 py-2 rounded-full whitespace-nowrap transition-all text-sm",style:{backgroundColor:d===_?"#1976D2":"#FFFFFF",color:d===_?"#FFFFFF":"#000000",fontFamily:"Inter, sans-serif",border:"1px solid #E0E0E0",boxShadow:d===_?"0 2px 6px rgba(25, 118, 210, 0.3)":"none"},children:_},_))})}),w.jsx("div",{className:"space-y-4",children:y.map(_=>{const R=_.opening+_.delivered-_.dispatched,z=Math.max(0,_.booked-_.dispatched),K=x(_);return w.jsxs("div",{onClick:()=>o(_),className:"bg-white rounded-2xl shadow-md p-4 cursor-pointer hover:shadow-lg transition-all relative",style:{fontFamily:"Inter, sans-serif",transition:"all 250ms ease"},children:[K&&w.jsx("div",{className:"absolute top-4 right-4 w-2 h-2 rounded-full",style:{backgroundColor:"#FF9800"},title:"Due soon"}),w.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[w.jsxs("div",{children:[w.jsx("div",{className:"text-gray-500 text-xs mb-1",children:"Model Name"}),w.jsx("div",{className:"text-black text-sm font-medium",children:_.model})]}),w.jsxs("div",{children:[w.jsx("div",{className:"text-gray-500 text-xs mb-1",children:"Category"}),w.jsx("div",{className:"text-black text-sm font-medium",children:_.category})]}),w.jsxs("div",{children:[w.jsx("div",{className:"text-gray-500 text-xs mb-1",children:"Available"}),w.jsx("div",{className:"text-sm font-medium",style:{color:"#4CAF50"},children:R})]}),w.jsxs("div",{children:[w.jsx("div",{className:"text-gray-500 text-xs mb-1",children:"Reserved"}),z>0?w.jsx("span",{className:"inline-block px-2 py-1 rounded-full text-xs",style:{backgroundColor:"#1976D2",color:"#FFFFFF"},children:z}):w.jsx("div",{className:"text-sm font-medium text-gray-400",children:"0"})]})]})]},_.id)})}),y.length===0&&w.jsx("div",{className:"text-center text-gray-500 py-12",children:"No items found"})]})]})}function lC({onSelect:s,onClose:e}){const[t,i]=Oe.useState(null);return w.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 px-4",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},children:w.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl relative w-full max-w-lg",style:{maxHeight:"90vh",padding:"40px 30px",fontFamily:"Inter, sans-serif"},children:[w.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition-colors",children:w.jsx(Uh,{size:24})}),w.jsx("h2",{className:"text-black mb-6 text-center font-bold text-xl sm:text-2xl",children:"What would you like to add?"}),w.jsxs("div",{className:"space-y-4 mb-8",children:[w.jsx("button",{onClick:()=>i("order"),className:"w-full bg-white border-4 rounded-2xl flex items-center p-4 transition-all hover:shadow-lg",style:{borderColor:t==="order"?"#4CAF50":"#E0E0E0",minHeight:"70px",transition:"all 250ms ease"},children:w.jsxs("div",{className:"flex items-center",children:[w.jsx("div",{className:"rounded-full border-4 mr-3",style:{width:"24px",height:"24px",borderColor:t==="order"?"#4CAF50":"#E0E0E0",backgroundColor:t==="order"?"#4CAF50":"transparent"}}),w.jsx("span",{className:"text-black text-sm sm:text-base",children:"Order Stock"})]})}),w.jsx("button",{onClick:()=>i("receive"),className:"w-full bg-white border-4 rounded-2xl flex items-center p-4 transition-all hover:shadow-lg",style:{borderColor:t==="receive"?"#4CAF50":"#E0E0E0",minHeight:"70px",transition:"all 250ms ease"},children:w.jsxs("div",{className:"flex items-center",children:[w.jsx("div",{className:"rounded-full border-4 mr-3",style:{width:"24px",height:"24px",borderColor:t==="receive"?"#4CAF50":"#E0E0E0",backgroundColor:t==="receive"?"#4CAF50":"transparent"}}),w.jsx("span",{className:"text-black text-sm sm:text-base",children:"Receive Delivery"})]})})]}),w.jsx("button",{disabled:!t,onClick:()=>t&&s(t),className:"w-full text-white rounded-2xl shadow-lg transition-opacity disabled:opacity-40",style:{backgroundColor:"#4CAF50",height:"60px",fontFamily:"Inter, sans-serif"},children:"Continue"}),w.jsx("button",{onClick:e,className:"w-full mt-4 text-gray-500 text-center hover:text-black transition-colors text-sm",children:"Back to Dashboard"})]})})}function uC({onSelect:s,onClose:e}){const[t,i]=Oe.useState(null);return w.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 px-4",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},children:w.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl relative w-full max-w-lg",style:{maxHeight:"90vh",padding:"40px 30px",fontFamily:"Inter, sans-serif"},children:[w.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition-colors",children:w.jsx(Uh,{size:24})}),w.jsx("h2",{className:"text-black mb-6 text-center font-bold text-xl sm:text-2xl",children:"What would you like to record?"}),w.jsxs("div",{className:"space-y-4 mb-8",children:[w.jsx("button",{onClick:()=>i("book"),className:"w-full bg-white border-4 rounded-2xl flex items-center p-4 transition-all hover:shadow-lg",style:{borderColor:t==="book"?"#E53935":"#E0E0E0",minHeight:"70px",transition:"all 250ms ease"},children:w.jsxs("div",{className:"flex items-center",children:[w.jsx("div",{className:"rounded-full border-4 mr-3",style:{width:"24px",height:"24px",borderColor:t==="book"?"#E53935":"#E0E0E0",backgroundColor:t==="book"?"#E53935":"transparent"}}),w.jsx("span",{className:"text-black text-sm sm:text-base",children:"Book Sale"})]})}),w.jsx("button",{onClick:()=>i("dispatch"),className:"w-full bg-white border-4 rounded-2xl flex items-center p-4 transition-all hover:shadow-lg",style:{borderColor:t==="dispatch"?"#E53935":"#E0E0E0",minHeight:"70px",transition:"all 250ms ease"},children:w.jsxs("div",{className:"flex items-center",children:[w.jsx("div",{className:"rounded-full border-4 mr-3",style:{width:"24px",height:"24px",borderColor:t==="dispatch"?"#E53935":"#E0E0E0",backgroundColor:t==="dispatch"?"#E53935":"transparent"}}),w.jsx("span",{className:"text-black text-sm sm:text-base",children:"Direct Dispatch"})]})})]}),w.jsx("button",{disabled:!t,onClick:()=>t&&s(t),className:"w-full text-white rounded-2xl shadow-lg transition-opacity disabled:opacity-40",style:{backgroundColor:"#E53935",height:"60px",fontFamily:"Inter, sans-serif"},children:"Continue"}),w.jsx("button",{onClick:e,className:"w-full mt-4 text-gray-500 text-center hover:text-black transition-colors text-sm",children:"Back to Dashboard"})]})})}function cC({onSubmit:s,onBack:e}){const[t,i]=Oe.useState({model:"",quantity:0,supplierName:"",billNo:"",orderedBy:"",date:new Date().toISOString().split("T")[0],remarks:""}),o=m=>{if(!m)return"";const g=new Date(m),y=String(g.getDate()).padStart(2,"0"),x=String(g.getMonth()+1).padStart(2,"0"),_=g.getFullYear();return`${y}/${x}/${_}`},u=m=>{m.preventDefault(),s(t)},d=(m,g)=>{i(y=>({...y,[m]:g}))};return w.jsxs("div",{className:"flex flex-col min-h-screen",children:[w.jsxs("div",{className:"bg-white shadow-sm flex items-center px-4 py-6 sm:px-8",children:[w.jsx("button",{onClick:e,className:"mr-3",children:w.jsx(zo,{className:"text-black",size:24})}),w.jsx("h1",{className:"text-black font-bold text-xl sm:text-2xl",style:{fontFamily:"Inter, sans-serif"},children:"Order Stock"})]}),w.jsx("div",{className:"flex-1 overflow-auto px-4 py-4 pb-24 sm:px-8",children:w.jsxs("form",{onSubmit:u,className:"space-y-4",children:[w.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-4",children:[w.jsx("label",{className:"block text-gray-600 mb-2 text-sm",style:{fontFamily:"Inter, sans-serif"},children:"Model Search"}),w.jsxs("div",{className:"flex items-center bg-gray-50 px-3 py-2 rounded-xl",style:{border:"1px solid #E0E0E0"},children:[w.jsx(lc,{className:"text-gray-400 mr-2",size:18}),w.jsx("input",{type:"text",value:t.model,onChange:m=>d("model",m.target.value),className:"flex-1 outline-none text-black bg-transparent text-sm",style:{fontFamily:"Inter, sans-serif"},placeholder:"Type to search model...",required:!0})]})]}),w.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-4",children:[w.jsx("label",{className:"block text-gray-600 mb-2 text-sm",style:{fontFamily:"Inter, sans-serif"},children:"Quantity"}),w.jsx("input",{type:"number",value:t.quantity,onChange:m=>d("quantity",parseInt(m.target.value)||0),className:"w-full outline-none text-black bg-gray-50 px-3 py-2 rounded-xl text-sm",style:{fontFamily:"Inter, sans-serif"},required:!0})]}),w.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-4",children:[w.jsx("label",{className:"block text-gray-600 mb-2 text-sm",style:{fontFamily:"Inter, sans-serif"},children:"Supplier Name"}),w.jsx("input",{type:"text",value:t.supplierName,onChange:m=>d("supplierName",m.target.value),className:"w-full outline-none text-black bg-gray-50 px-3 py-2 rounded-xl text-sm",style:{fontFamily:"Inter, sans-serif"},required:!0})]}),w.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-4",children:[w.jsx("label",{className:"block text-gray-600 mb-2 text-sm",style:{fontFamily:"Inter, sans-serif"},children:"Bill No"}),w.jsx("input",{type:"text",value:t.billNo,onChange:m=>d("billNo",m.target.value),className:"w-full outline-none text-black bg-gray-50 px-3 py-2 rounded-xl text-sm",style:{fontFamily:"Inter, sans-serif"},required:!0})]}),w.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-4",children:[w.jsx("label",{className:"block text-gray-600 mb-2 text-sm",style:{fontFamily:"Inter, sans-serif"},children:"Ordered By"}),w.jsx("input",{type:"text",value:t.orderedBy,onChange:m=>d("orderedBy",m.target.value),className:"w-full outline-none text-black bg-gray-50 px-3 py-2 rounded-xl text-sm",style:{fontFamily:"Inter, sans-serif"},required:!0})]}),w.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-4",children:[w.jsx("label",{className:"block text-gray-600 mb-2 text-sm",style:{fontFamily:"Inter, sans-serif"},children:"Select Date"}),w.jsx("input",{type:"date",value:t.date,onChange:m=>d("date",m.target.value),className:"w-full outline-none text-black bg-gray-50 px-3 py-2 rounded-xl text-sm",style:{fontFamily:"Inter, sans-serif",border:"1px solid #E0E0E0"},required:!0}),w.jsxs("p",{className:"text-xs text-gray-500 mt-1",style:{fontFamily:"Inter, sans-serif"},children:["Format: ",t.date?o(t.date):"DD/MM/YYYY"]})]}),w.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-4",children:[w.jsx("label",{className:"block text-gray-600 mb-2 text-sm",style:{fontFamily:"Inter, sans-serif"},children:"Remarks"}),w.jsx("textarea",{value:t.remarks,onChange:m=>d("remarks",m.target.value),rows:3,className:"w-full outline-none text-black bg-gray-50 px-3 py-2 rounded-xl resize-none text-sm",style:{fontFamily:"Inter, sans-serif"},placeholder:"Add any additional notes..."})]}),w.jsx("button",{type:"submit",className:"w-full text-white rounded-2xl shadow-lg",style:{backgroundColor:"#4CAF50",height:"60px",fontFamily:"Inter, sans-serif"},children:"Submit Order"}),w.jsx("button",{type:"button",onClick:e,className:"w-full text-gray-500 text-center hover:text-black transition-colors text-sm",children:"Back to Dashboard"})]})}),w.jsx("div",{className:"bg-white shadow-sm flex items-center justify-center py-4"})]})}function dC({onSubmit:s,onBack:e,pendingOrders:t}){const[i,o]=Oe.useState({model:"",orderedQty:0,receivedQty:0,date:new Date().toISOString().split("T")[0],receivedBy:"",remarks:""}),u=y=>{if(!y)return"";const x=new Date(y),_=String(x.getDate()).padStart(2,"0"),R=String(x.getMonth()+1).padStart(2,"0"),z=x.getFullYear();return`${_}/${R}/${z}`},d=y=>{const x=t.find(_=>_.model===y);x&&o(_=>({..._,model:x.model,orderedQty:x.orderedQty,receivedQty:x.orderedQty}))},m=y=>{y.preventDefault(),s(i)},g=(y,x)=>{o(_=>({..._,[y]:x}))};return w.jsxs("div",{className:"flex flex-col min-h-screen",children:[w.jsxs("div",{className:"bg-white shadow-sm flex items-center px-4 py-6 sm:px-8",children:[w.jsx("button",{onClick:e,className:"mr-3",children:w.jsx(zo,{className:"text-black",size:24})}),w.jsx("h1",{className:"text-black font-bold text-xl sm:text-2xl",style:{fontFamily:"Inter, sans-serif"},children:"Receive Delivery"})]}),w.jsx("div",{className:"flex-1 overflow-auto px-4 py-4 pb-24 sm:px-8",children:w.jsxs("form",{onSubmit:m,className:"space-y-4",children:[w.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-6",children:[w.jsx("label",{className:"block text-gray-600 mb-2 text-sm",style:{fontFamily:"Inter, sans-serif"},children:"Select from Pending Orders"}),w.jsxs("select",{value:i.model,onChange:y=>d(y.target.value),className:"w-full outline-none text-black bg-gray-50 px-4 py-3 rounded-xl",style:{fontFamily:"Inter, sans-serif"},required:!0,children:[w.jsx("option",{value:"",children:"-- Select an order --"}),t.map((y,x)=>w.jsxs("option",{value:y.model,children:[y.model," (Ordered: ",y.orderedQty,")"]},x))]})]}),w.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-6",children:[w.jsx("label",{className:"block text-gray-600 mb-2 text-sm",style:{fontFamily:"Inter, sans-serif"},children:"Model"}),w.jsx("input",{type:"text",value:i.model,className:"w-full outline-none text-black bg-gray-100 px-4 py-3 rounded-xl",style:{fontFamily:"Inter, sans-serif"},disabled:!0})]}),w.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-6",children:[w.jsx("label",{className:"block text-gray-600 mb-2 text-sm",style:{fontFamily:"Inter, sans-serif"},children:"Ordered Quantity"}),w.jsx("input",{type:"number",value:i.orderedQty,className:"w-full outline-none text-black bg-gray-100 px-4 py-3 rounded-xl",style:{fontFamily:"Inter, sans-serif"},disabled:!0})]}),w.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-6",children:[w.jsx("label",{className:"block text-gray-600 mb-2 text-sm",style:{fontFamily:"Inter, sans-serif"},children:"Received Quantity"}),w.jsx("input",{type:"number",value:i.receivedQty,onChange:y=>g("receivedQty",parseInt(y.target.value)||0),className:"w-full outline-none text-black bg-gray-50 px-4 py-3 rounded-xl",style:{fontFamily:"Inter, sans-serif"},required:!0})]}),w.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-4",children:[w.jsx("label",{className:"block text-gray-600 mb-2 text-sm",style:{fontFamily:"Inter, sans-serif"},children:"Select Date"}),w.jsx("input",{type:"date",value:i.date,onChange:y=>g("date",y.target.value),className:"w-full outline-none text-black bg-gray-50 px-3 py-2 rounded-xl text-sm",style:{fontFamily:"Inter, sans-serif",border:"1px solid #E0E0E0"},required:!0}),w.jsxs("p",{className:"text-xs text-gray-500 mt-1",style:{fontFamily:"Inter, sans-serif"},children:["Format: ",i.date?u(i.date):"DD/MM/YYYY"]})]}),w.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-6",children:[w.jsx("label",{className:"block text-gray-600 mb-2 text-sm",style:{fontFamily:"Inter, sans-serif"},children:"Received By"}),w.jsx("input",{type:"text",value:i.receivedBy,onChange:y=>g("receivedBy",y.target.value),className:"w-full outline-none text-black bg-gray-50 px-4 py-3 rounded-xl",style:{fontFamily:"Inter, sans-serif"},required:!0})]}),w.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-6",children:[w.jsx("label",{className:"block text-gray-600 mb-2 text-sm",style:{fontFamily:"Inter, sans-serif"},children:"Remarks"}),w.jsx("textarea",{value:i.remarks,onChange:y=>g("remarks",y.target.value),rows:4,className:"w-full outline-none text-black bg-gray-50 px-4 py-3 rounded-xl resize-none",style:{fontFamily:"Inter, sans-serif"},placeholder:"Add any additional notes..."})]}),w.jsx("button",{type:"submit",className:"w-full text-white rounded-2xl shadow-lg",style:{backgroundColor:"#4CAF50",height:"60px",fontFamily:"Inter, sans-serif"},children:"Confirm Delivery"}),w.jsx("button",{type:"button",onClick:e,className:"w-full text-gray-500 text-center hover:text-black transition-colors text-sm",children:"Back to Dashboard"})]})})]})}function hC({onSubmit:s,onBack:e}){const[t,i]=Oe.useState({model:"",quantity:0,customerName:"",bookingId:`BK-${Date.now().toString().slice(-6)}`,date:new Date().toISOString().split("T")[0],enteredBy:"",remarks:"",status:"hold"}),o=m=>{if(!m)return"";const g=new Date(m),y=String(g.getDate()).padStart(2,"0"),x=String(g.getMonth()+1).padStart(2,"0"),_=g.getFullYear();return`${y}/${x}/${_}`},u=m=>{m.preventDefault(),s(t)},d=(m,g)=>{i(y=>({...y,[m]:g}))};return w.jsxs("div",{className:"flex flex-col min-h-screen",children:[w.jsxs("div",{className:"bg-white shadow-sm flex items-center px-4 py-6 sm:px-8",children:[w.jsx("button",{onClick:e,className:"mr-3",children:w.jsx(zo,{className:"text-black",size:24})}),w.jsx("h1",{className:"text-black font-bold text-xl sm:text-2xl",style:{fontFamily:"Inter, sans-serif"},children:"Book Sale"})]}),w.jsx("div",{className:"flex-1 overflow-auto px-4 py-4 pb-24 sm:px-8",children:w.jsxs("form",{onSubmit:u,className:"space-y-4",children:[w.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-4",children:[w.jsx("label",{className:"block text-gray-600 mb-3 text-sm",style:{fontFamily:"Inter, sans-serif"},children:"Status"}),w.jsxs("div",{className:"flex gap-3",children:[w.jsx("button",{type:"button",onClick:()=>d("status","hold"),className:"flex-1 py-3 rounded-xl transition-all text-sm",style:{backgroundColor:t.status==="hold"?"#FF9800":"#F5F5F5",color:t.status==="hold"?"#FFFFFF":"#000000",fontFamily:"Inter, sans-serif",transition:"all 250ms ease"},children:"Hold"}),w.jsx("button",{type:"button",onClick:()=>d("status","sold"),className:"flex-1 py-3 rounded-xl transition-all text-sm",style:{backgroundColor:t.status==="sold"?"#4CAF50":"#F5F5F5",color:t.status==="sold"?"#FFFFFF":"#000000",fontFamily:"Inter, sans-serif",transition:"all 250ms ease"},children:"Sold"})]}),w.jsx("p",{className:"text-xs text-gray-500 mt-2",style:{fontFamily:"Inter, sans-serif"},children:t.status==="hold"?"Item reserved for future dispatch":"Item sold and dispatched immediately"})]}),w.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-4",children:[w.jsx("label",{className:"block text-gray-600 mb-2 text-sm",style:{fontFamily:"Inter, sans-serif"},children:"Model Search"}),w.jsxs("div",{className:"flex items-center bg-gray-50 px-3 py-2 rounded-xl",style:{border:"1px solid #E0E0E0"},children:[w.jsx(lc,{className:"text-gray-400 mr-2",size:18}),w.jsx("input",{type:"text",value:t.model,onChange:m=>d("model",m.target.value),className:"flex-1 outline-none text-black bg-transparent text-sm",style:{fontFamily:"Inter, sans-serif"},placeholder:"Type to search model...",required:!0})]})]}),w.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-4",children:[w.jsx("label",{className:"block text-gray-600 mb-2 text-sm",style:{fontFamily:"Inter, sans-serif"},children:"Quantity"}),w.jsx("input",{type:"number",value:t.quantity,onChange:m=>d("quantity",parseInt(m.target.value)||0),className:"w-full outline-none text-black bg-gray-50 px-3 py-2 rounded-xl text-sm",style:{fontFamily:"Inter, sans-serif",border:"1px solid #E0E0E0"},required:!0})]}),w.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-4",children:[w.jsx("label",{className:"block text-gray-600 mb-2 text-sm",style:{fontFamily:"Inter, sans-serif"},children:"Customer Name"}),w.jsx("input",{type:"text",value:t.customerName,onChange:m=>d("customerName",m.target.value),className:"w-full outline-none text-black bg-gray-50 px-3 py-2 rounded-xl text-sm",style:{fontFamily:"Inter, sans-serif",border:"1px solid #E0E0E0"},required:!0})]}),w.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-4",children:[w.jsx("label",{className:"block text-gray-600 mb-2 text-sm",style:{fontFamily:"Inter, sans-serif"},children:"Booking ID"}),w.jsx("input",{type:"text",value:t.bookingId,className:"w-full outline-none text-black bg-gray-100 px-3 py-2 rounded-xl text-sm",style:{fontFamily:"Inter, sans-serif"},disabled:!0})]}),w.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-4",children:[w.jsx("label",{className:"block text-gray-600 mb-2 text-sm",style:{fontFamily:"Inter, sans-serif"},children:"Select Date"}),w.jsx("input",{type:"date",value:t.date,onChange:m=>d("date",m.target.value),className:"w-full outline-none text-black bg-gray-50 px-3 py-2 rounded-xl text-sm",style:{fontFamily:"Inter, sans-serif",border:"1px solid #E0E0E0"},required:!0}),w.jsxs("p",{className:"text-xs text-gray-500 mt-1",style:{fontFamily:"Inter, sans-serif"},children:["Format: ",t.date?o(t.date):"DD/MM/YYYY"]})]}),w.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-4",children:[w.jsx("label",{className:"block text-gray-600 mb-2 text-sm",style:{fontFamily:"Inter, sans-serif"},children:"Entered By"}),w.jsx("input",{type:"text",value:t.enteredBy,onChange:m=>d("enteredBy",m.target.value),className:"w-full outline-none text-black bg-gray-50 px-3 py-2 rounded-xl text-sm",style:{fontFamily:"Inter, sans-serif",border:"1px solid #E0E0E0"},required:!0})]}),w.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-4",children:[w.jsx("label",{className:"block text-gray-600 mb-2 text-sm",style:{fontFamily:"Inter, sans-serif"},children:"Remarks"}),w.jsx("textarea",{value:t.remarks,onChange:m=>d("remarks",m.target.value),rows:3,className:"w-full outline-none text-black bg-gray-50 px-3 py-2 rounded-xl resize-none text-sm",style:{fontFamily:"Inter, sans-serif",border:"1px solid #E0E0E0"},placeholder:"Add any additional notes..."})]}),w.jsx("button",{type:"submit",className:"w-full text-white rounded-2xl shadow-lg",style:{backgroundColor:"#E53935",height:"60px",fontFamily:"Inter, sans-serif"},children:"Confirm Booking"}),w.jsx("button",{type:"button",onClick:e,className:"w-full text-gray-500 text-center hover:text-black transition-colors text-sm",children:"Back to Dashboard"})]})})]})}function fC({onSubmit:s,onBack:e,bookedOrders:t}){const[i,o]=Oe.useState({model:"",quantity:0,customerName:"",dispatchId:`DS-${Date.now().toString().slice(-6)}`,dispatchedBy:"",date:new Date().toISOString().split("T")[0],remarks:"",source:"hold"}),u=y=>{const x=t.find(_=>_.model===y);x&&o(_=>({..._,model:x.model,quantity:x.quantity,customerName:x.customerName}))},d=y=>{y.preventDefault(),s(i)},m=(y,x)=>{o(_=>({..._,[y]:x}))},g=y=>{if(!y)return"";const x=new Date(y),_=String(x.getDate()).padStart(2,"0"),R=String(x.getMonth()+1).padStart(2,"0"),z=x.getFullYear();return`${_}/${R}/${z}`};return w.jsxs("div",{className:"flex flex-col min-h-screen",children:[w.jsxs("div",{className:"bg-white shadow-sm flex items-center px-4 py-6 sm:px-8",children:[w.jsx("button",{onClick:e,className:"mr-3",children:w.jsx(zo,{className:"text-black",size:24})}),w.jsx("h1",{className:"text-black font-bold text-xl sm:text-2xl",style:{fontFamily:"Inter, sans-serif"},children:"Dispatch to Customer"})]}),w.jsx("div",{className:"flex-1 overflow-auto px-4 py-4 pb-24 sm:px-8",children:w.jsxs("form",{onSubmit:d,className:"space-y-4",children:[w.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-4",children:[w.jsx("label",{className:"block text-gray-600 mb-2 text-sm",style:{fontFamily:"Inter, sans-serif"},children:"Select from Booked Orders"}),w.jsxs("select",{value:i.model,onChange:y=>u(y.target.value),className:"w-full outline-none text-black bg-gray-50 px-3 py-2 rounded-xl text-sm",style:{fontFamily:"Inter, sans-serif",border:"1px solid #E0E0E0"},required:!0,children:[w.jsx("option",{value:"",children:"-- Select a booking --"}),t.map((y,x)=>w.jsxs("option",{value:y.model,children:[y.model," - ",y.customerName," (Qty: ",y.quantity,")"]},x))]})]}),w.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-6",children:[w.jsx("label",{className:"block text-gray-600 mb-2 text-sm",style:{fontFamily:"Inter, sans-serif"},children:"Model"}),w.jsx("input",{type:"text",value:i.model,className:"w-full outline-none text-black bg-gray-100 px-4 py-3 rounded-xl",style:{fontFamily:"Inter, sans-serif"},disabled:!0})]}),w.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-6",children:[w.jsx("label",{className:"block text-gray-600 mb-2 text-sm",style:{fontFamily:"Inter, sans-serif"},children:"Quantity"}),w.jsx("input",{type:"number",value:i.quantity,className:"w-full outline-none text-black bg-gray-100 px-4 py-3 rounded-xl",style:{fontFamily:"Inter, sans-serif"},disabled:!0})]}),w.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-6",children:[w.jsx("label",{className:"block text-gray-600 mb-2 text-sm",style:{fontFamily:"Inter, sans-serif"},children:"Customer Name"}),w.jsx("input",{type:"text",value:i.customerName,className:"w-full outline-none text-black bg-gray-100 px-4 py-3 rounded-xl",style:{fontFamily:"Inter, sans-serif"},disabled:!0})]}),w.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-6",children:[w.jsx("label",{className:"block text-gray-600 mb-2 text-sm",style:{fontFamily:"Inter, sans-serif"},children:"Dispatch ID"}),w.jsx("input",{type:"text",value:i.dispatchId,className:"w-full outline-none text-black bg-gray-100 px-4 py-3 rounded-xl",style:{fontFamily:"Inter, sans-serif"},disabled:!0})]}),w.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-6",children:[w.jsx("label",{className:"block text-gray-600 mb-2 text-sm",style:{fontFamily:"Inter, sans-serif"},children:"Dispatched By"}),w.jsx("input",{type:"text",value:i.dispatchedBy,onChange:y=>m("dispatchedBy",y.target.value),className:"w-full outline-none text-black bg-gray-50 px-4 py-3 rounded-xl",style:{fontFamily:"Inter, sans-serif"},required:!0})]}),w.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-4",children:[w.jsx("label",{className:"block text-gray-600 mb-2 text-sm",style:{fontFamily:"Inter, sans-serif"},children:"Select Date"}),w.jsx("input",{type:"date",value:i.date,onChange:y=>m("date",y.target.value),className:"w-full outline-none text-black bg-gray-50 px-3 py-2 rounded-xl text-sm",style:{fontFamily:"Inter, sans-serif",border:"1px solid #E0E0E0"},required:!0}),w.jsxs("p",{className:"text-xs text-gray-500 mt-1",style:{fontFamily:"Inter, sans-serif"},children:["Format: ",i.date?g(i.date):"DD/MM/YYYY"]})]}),w.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-6",children:[w.jsx("label",{className:"block text-gray-600 mb-2 text-sm",style:{fontFamily:"Inter, sans-serif"},children:"Remarks"}),w.jsx("textarea",{value:i.remarks,onChange:y=>m("remarks",y.target.value),rows:4,className:"w-full outline-none text-black bg-gray-50 px-4 py-3 rounded-xl resize-none",style:{fontFamily:"Inter, sans-serif"},placeholder:"Add any additional notes..."})]}),w.jsx("button",{type:"submit",className:"w-full text-white rounded-2xl shadow-lg",style:{backgroundColor:"#E53935",height:"60px",fontFamily:"Inter, sans-serif"},children:"Confirm Dispatch"}),w.jsx("button",{type:"button",onClick:e,className:"w-full text-gray-500 text-center hover:text-black transition-colors text-sm",children:"Back to Dashboard"})]})})]})}function pC({onBack:s,onSelectType:e}){const t=[{id:"orders",label:"Orders",icon:Cw,color:"#2196F3"},{id:"received",label:"Received",icon:Nw,color:"#4CAF50"},{id:"booked",label:"Booked",icon:Lw,color:"#FF9800"},{id:"dispatched",label:"Dispatched",icon:zw,color:"#E53935"}];return w.jsxs("div",{className:"flex flex-col min-h-screen",children:[w.jsxs("div",{className:"bg-white shadow-sm flex items-center px-4 py-6 sm:px-8",children:[w.jsx("button",{onClick:s,className:"mr-3",children:w.jsx(zo,{className:"text-black",size:24})}),w.jsx("h1",{className:"text-black font-bold text-xl sm:text-2xl",style:{fontFamily:"Inter, sans-serif"},children:"Select Record Type"})]}),w.jsx("div",{className:"flex-1 overflow-auto px-4 py-8 pb-24 sm:px-8",children:w.jsx("div",{className:"w-full max-w-2xl mx-auto",children:w.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.map(i=>{const o=i.icon;return w.jsxs("button",{onClick:()=>e(i.id),className:"bg-white rounded-2xl shadow-md p-6 flex flex-col items-center justify-center transition-all hover:shadow-lg active:scale-95",style:{fontFamily:"Inter, sans-serif",minHeight:"160px"},children:[w.jsx("div",{className:"rounded-full p-4 mb-3",style:{backgroundColor:`${i.color}15`},children:w.jsx(o,{size:32,style:{color:i.color}})}),w.jsx("span",{className:"text-black font-medium text-base sm:text-lg",style:{color:i.color},children:i.label})]},i.id)})})})}),w.jsx("div",{className:"bg-white shadow-sm flex items-center justify-center py-3"})]})}function mC({onBack:s,onDelete:e,initialTab:t="booked",orders:i=[],received:o=[],booked:u,dispatched:d}){const[m,g]=Oe.useState(t),[y,x]=Oe.useState(""),[_,R]=Oe.useState("all"),z=()=>{alert(" Report download feature will be implemented with backend integration")},K=G=>G.filter(Ne=>Object.values(Ne).some(je=>String(je).toLowerCase().includes(y.toLowerCase()))),J=K(i),B=K(o);let ne=K(u);_==="held"&&(ne=ne.filter(G=>G.status==="hold"));const ge=K(d);return w.jsxs("div",{className:"flex flex-col min-h-screen",children:[w.jsxs("div",{className:"bg-white shadow-sm flex items-center justify-between px-4 py-4",children:[w.jsxs("div",{className:"flex items-center flex-1",children:[w.jsx("button",{onClick:s,className:"mr-3",children:w.jsx(zo,{className:"text-black",size:24})}),w.jsx("h1",{className:"text-black font-bold text-lg sm:text-xl truncate",style:{fontFamily:"Inter, sans-serif",fontSize:"32px"},children:"Admin Control Panel"})]}),w.jsxs("button",{onClick:z,className:"flex items-center gap-2 bg-blue-500 text-white px-3 py-2 rounded-xl shadow-md hover:bg-blue-600 transition-colors ml-2 flex-shrink-0",style:{fontFamily:"Inter, sans-serif"},children:[w.jsx(Sw,{size:16}),w.jsx("span",{className:"hidden sm:inline text-sm",children:"Download"})]})]}),w.jsxs("div",{className:"flex-1 overflow-auto px-4 py-4 pb-24",children:[w.jsxs("div",{className:"bg-white rounded-2xl shadow-md mb-4 flex items-center px-4 h-14 w-full max-w-md mx-auto",children:[w.jsx(lc,{className:"text-gray-400 mr-3",size:20}),w.jsx("input",{type:"text",placeholder:"Search by Model, ID, or Customer",value:y,onChange:G=>x(G.target.value),className:"flex-1 outline-none text-black bg-transparent text-sm",style:{fontFamily:"Inter, sans-serif"}})]}),m==="booked"&&w.jsxs("div",{className:"flex gap-3 mb-4 w-full max-w-md mx-auto",children:[w.jsx("button",{onClick:()=>R("all"),className:"px-4 py-2 rounded-full text-sm transition-all",style:{backgroundColor:_==="all"?"#FF9800":"#FFFFFF",color:_==="all"?"#FFFFFF":"#000000",fontFamily:"Inter, sans-serif",border:"1px solid #E0E0E0",transition:"all 250ms ease"},children:"All"}),w.jsx("button",{onClick:()=>R("held"),className:"px-4 py-2 rounded-full text-sm transition-all",style:{backgroundColor:_==="held"?"#FF9800":"#FFFFFF",color:_==="held"?"#FFFFFF":"#000000",fontFamily:"Inter, sans-serif",border:"1px solid #E0E0E0",transition:"all 250ms ease"},children:"Held Only"})]}),w.jsxs("div",{className:"flex gap-3 mb-4 w-full max-w-md mx-auto",children:[w.jsx("button",{onClick:()=>g("orders"),className:"flex-1 py-3 rounded-2xl transition-all shadow-md text-sm sm:text-base",style:{backgroundColor:m==="orders"?"#2196F3":"#FFFFFF",color:m==="orders"?"#FFFFFF":"#000000",fontFamily:"Inter, sans-serif"},children:"Orders"}),w.jsx("button",{onClick:()=>g("received"),className:"flex-1 py-3 rounded-2xl transition-all shadow-md text-sm sm:text-base",style:{backgroundColor:m==="received"?"#4CAF50":"#FFFFFF",color:m==="received"?"#FFFFFF":"#000000",fontFamily:"Inter, sans-serif"},children:"Received"})]}),w.jsxs("div",{className:"flex gap-3 mb-4 w-full max-w-md mx-auto",children:[w.jsx("button",{onClick:()=>g("booked"),className:"flex-1 py-3 rounded-2xl transition-all shadow-md text-sm sm:text-base",style:{backgroundColor:m==="booked"?"#FF9800":"#FFFFFF",color:m==="booked"?"#FFFFFF":"#000000",fontFamily:"Inter, sans-serif"},children:"Booked"}),w.jsx("button",{onClick:()=>g("dispatched"),className:"flex-1 py-3 rounded-2xl transition-all shadow-md text-sm sm:text-base",style:{backgroundColor:m==="dispatched"?"#E53935":"#FFFFFF",color:m==="dispatched"?"#FFFFFF":"#000000",fontFamily:"Inter, sans-serif"},children:"Dispatched"})]}),w.jsxs("div",{className:"w-full max-w-md mx-auto",children:[m==="orders"&&w.jsxs("div",{className:"space-y-3",children:[J.map(G=>w.jsxs("div",{className:"bg-white rounded-2xl shadow-md overflow-hidden relative",style:{fontFamily:"Inter, Poppins, Roboto, sans-serif",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",transition:"all 300ms ease-out"},children:[w.jsx("div",{className:"absolute left-0 top-0 bottom-0",style:{width:"6px",backgroundColor:"#2196F3"}}),w.jsxs("div",{className:"p-4 pl-5",children:[w.jsx("div",{className:"mb-3",children:w.jsx("div",{className:"text-black",style:{fontSize:"18px",fontWeight:"700"},children:G.model})}),w.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[w.jsxs("div",{children:[w.jsx("div",{className:"text-gray-500",style:{fontSize:"12px"},children:"Order ID"}),w.jsx("div",{className:"text-black",style:{fontSize:"14px",fontWeight:"500"},children:G.id})]}),w.jsxs("div",{children:[w.jsx("div",{className:"text-gray-500",style:{fontSize:"12px"},children:"Qty"}),w.jsx("div",{className:"text-black",style:{fontSize:"14px",fontWeight:"600",color:"#2196F3"},children:G.quantity})]}),w.jsxs("div",{children:[w.jsx("div",{className:"text-gray-500",style:{fontSize:"12px"},children:"Supplier"}),w.jsx("div",{className:"text-black truncate",style:{fontSize:"14px"},children:G.supplier})]}),w.jsxs("div",{children:[w.jsx("div",{className:"text-gray-500",style:{fontSize:"12px"},children:"Date"}),w.jsx("div",{className:"text-black",style:{fontSize:"14px"},children:new Date(G.date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})})]})]}),G.remarks&&w.jsxs("div",{className:"mb-3",children:[w.jsx("div",{className:"text-gray-500",style:{fontSize:"12px"},children:"Remarks"}),w.jsx("div",{className:"text-gray-700",style:{fontSize:"13px"},children:G.remarks})]}),w.jsx("div",{className:"flex justify-end",children:w.jsx("button",{onClick:()=>e("orders",G.id),className:"p-2 hover:bg-red-50 rounded-lg transition-all active:scale-95",style:{minWidth:"44px",minHeight:"44px",transition:"all 300ms ease-out"},children:w.jsx(Su,{size:18,className:"text-red-500"})})})]})]},G.id)),J.length===0&&w.jsx("div",{className:"text-center text-gray-500 py-12",style:{fontSize:"26px"},children:"No order records found"})]}),m==="received"&&w.jsxs("div",{className:"space-y-3",children:[B.map(G=>w.jsxs("div",{className:"bg-white rounded-2xl shadow-md overflow-hidden relative",style:{fontFamily:"Inter, Poppins, Roboto, sans-serif",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",transition:"all 300ms ease-out"},children:[w.jsx("div",{className:"absolute left-0 top-0 bottom-0",style:{width:"6px",backgroundColor:"#4CAF50"}}),w.jsxs("div",{className:"p-4 pl-5",children:[w.jsx("div",{className:"mb-3",children:w.jsx("div",{className:"text-black",style:{fontSize:"18px",fontWeight:"700"},children:G.model})}),w.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[w.jsxs("div",{children:[w.jsx("div",{className:"text-gray-500",style:{fontSize:"12px"},children:"Receive ID"}),w.jsx("div",{className:"text-black",style:{fontSize:"14px",fontWeight:"500"},children:G.id})]}),w.jsxs("div",{children:[w.jsx("div",{className:"text-gray-500",style:{fontSize:"12px"},children:"Qty Received"}),w.jsx("div",{className:"text-black",style:{fontSize:"14px",fontWeight:"600",color:"#4CAF50"},children:G.receivedQty})]}),w.jsxs("div",{children:[w.jsx("div",{className:"text-gray-500",style:{fontSize:"12px"},children:"Received By"}),w.jsx("div",{className:"text-black truncate",style:{fontSize:"14px"},children:G.receivedBy})]}),w.jsxs("div",{children:[w.jsx("div",{className:"text-gray-500",style:{fontSize:"12px"},children:"Date"}),w.jsx("div",{className:"text-black",style:{fontSize:"14px"},children:new Date(G.date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})})]})]}),G.remarks&&w.jsxs("div",{className:"mb-3",children:[w.jsx("div",{className:"text-gray-500",style:{fontSize:"12px"},children:"Remarks"}),w.jsx("div",{className:"text-gray-700",style:{fontSize:"13px"},children:G.remarks})]}),w.jsx("div",{className:"flex justify-end",children:w.jsx("button",{onClick:()=>e("received",G.id),className:"p-2 hover:bg-red-50 rounded-lg transition-all active:scale-95",style:{minWidth:"44px",minHeight:"44px",transition:"all 300ms ease-out"},children:w.jsx(Su,{size:18,className:"text-red-500"})})})]})]},G.id)),B.length===0&&w.jsx("div",{className:"text-center text-gray-500 py-12",style:{fontSize:"26px"},children:"No received records found"})]}),m==="booked"&&w.jsxs("div",{className:"space-y-3",children:[ne.map(G=>w.jsxs("div",{className:"bg-white rounded-2xl shadow-md overflow-hidden relative",style:{fontFamily:"Inter, Poppins, Roboto, sans-serif",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",transition:"all 300ms ease-out"},children:[w.jsx("div",{className:"absolute left-0 top-0 bottom-0",style:{width:"6px",backgroundColor:"#FF9800"}}),w.jsxs("div",{className:"p-4 pl-5",children:[w.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[w.jsx("div",{className:"text-black",style:{fontSize:"18px",fontWeight:"700"},children:G.model}),w.jsx("span",{className:"px-3 py-1 rounded-full text-white",style:{fontSize:"11px",fontWeight:"600",backgroundColor:G.status==="hold"?"#FF9800":"#4CAF50"},children:G.status==="hold"?"HOLD":"SOLD"})]}),w.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[w.jsxs("div",{children:[w.jsx("div",{className:"text-gray-500",style:{fontSize:"12px"},children:"Booking ID"}),w.jsx("div",{className:"text-black",style:{fontSize:"14px",fontWeight:"500"},children:G.bookingId})]}),w.jsxs("div",{children:[w.jsx("div",{className:"text-gray-500",style:{fontSize:"12px"},children:"Qty"}),w.jsx("div",{className:"text-black",style:{fontSize:"14px",fontWeight:"600",color:"#FF9800"},children:G.quantity})]}),w.jsxs("div",{children:[w.jsx("div",{className:"text-gray-500",style:{fontSize:"12px"},children:"Customer"}),w.jsx("div",{className:"text-black truncate",style:{fontSize:"14px"},children:G.customerName})]}),w.jsxs("div",{children:[w.jsx("div",{className:"text-gray-500",style:{fontSize:"12px"},children:"Date"}),w.jsx("div",{className:"text-black",style:{fontSize:"14px"},children:new Date(G.date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})})]})]}),G.remarks&&w.jsxs("div",{className:"mb-3",children:[w.jsx("div",{className:"text-gray-500",style:{fontSize:"12px"},children:"Remarks"}),w.jsx("div",{className:"text-gray-700",style:{fontSize:"13px"},children:G.remarks})]}),w.jsx("div",{className:"flex justify-end",children:w.jsx("button",{onClick:()=>e("booked",G.id),className:"p-2 hover:bg-red-50 rounded-lg transition-all active:scale-95",style:{minWidth:"44px",minHeight:"44px",transition:"all 300ms ease-out"},children:w.jsx(Su,{size:18,className:"text-red-500"})})})]})]},G.id)),ne.length===0&&w.jsx("div",{className:"text-center text-gray-500 py-12",style:{fontSize:"26px"},children:"No booked records found"})]}),m==="dispatched"&&w.jsxs("div",{className:"space-y-3",children:[ge.map(G=>w.jsxs("div",{className:"bg-white rounded-2xl shadow-md overflow-hidden relative",style:{fontFamily:"Inter, Poppins, Roboto, sans-serif",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",transition:"all 300ms ease-out"},children:[w.jsx("div",{className:"absolute left-0 top-0 bottom-0",style:{width:"6px",backgroundColor:"#E53935"}}),w.jsxs("div",{className:"p-4 pl-5",children:[w.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[w.jsx("div",{className:"text-black",style:{fontSize:"18px",fontWeight:"700"},children:G.model}),w.jsx("span",{className:"px-3 py-1 rounded-full text-white",style:{fontSize:"11px",fontWeight:"600",backgroundColor:G.source==="hold"?"#FF9800":"#4CAF50"},children:G.source==="hold"?"FROM HOLD":"DIRECT"})]}),w.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[w.jsxs("div",{children:[w.jsx("div",{className:"text-gray-500",style:{fontSize:"12px"},children:"Dispatch ID"}),w.jsx("div",{className:"text-black",style:{fontSize:"14px",fontWeight:"500"},children:G.dispatchId})]}),w.jsxs("div",{children:[w.jsx("div",{className:"text-gray-500",style:{fontSize:"12px"},children:"Qty"}),w.jsx("div",{className:"text-black",style:{fontSize:"14px",fontWeight:"600",color:"#E53935"},children:G.quantity})]}),w.jsxs("div",{children:[w.jsx("div",{className:"text-gray-500",style:{fontSize:"12px"},children:"Customer"}),w.jsx("div",{className:"text-black truncate",style:{fontSize:"14px"},children:G.customerName})]}),w.jsxs("div",{children:[w.jsx("div",{className:"text-gray-500",style:{fontSize:"12px"},children:"Date"}),w.jsx("div",{className:"text-black",style:{fontSize:"14px"},children:new Date(G.date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})})]})]}),G.remarks&&w.jsxs("div",{className:"mb-3",children:[w.jsx("div",{className:"text-gray-500",style:{fontSize:"12px"},children:"Remarks"}),w.jsx("div",{className:"text-gray-700",style:{fontSize:"13px"},children:G.remarks})]}),w.jsx("div",{className:"flex justify-end",children:w.jsx("button",{onClick:()=>e("dispatched",G.id),className:"p-2 hover:bg-red-50 rounded-lg transition-all active:scale-95",style:{minWidth:"44px",minHeight:"44px",transition:"all 300ms ease-out"},children:w.jsx(Su,{size:18,className:"text-red-500"})})})]})]},G.id)),ge.length===0&&w.jsx("div",{className:"text-center text-gray-500 py-12",style:{fontSize:"26px"},children:"No dispatched records found"})]})]})]}),w.jsx("div",{className:"bg-white shadow-sm flex items-center justify-center py-3"})]})}function gC({item:s,onClose:e}){const t=[{label:"Model",value:s.model,color:"#000000"},{label:"Ordered",value:s.ordered,color:"#2196F3"},{label:"Delivered",value:s.delivered,color:"#4CAF50"},{label:"Booked",value:s.booked,color:"#FF9800"},{label:"Dispatched",value:s.dispatched,color:"#E53935"},{label:"Available",value:s.available,color:"#9E9E9E"}];return w.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 px-4",style:{backgroundColor:"rgba(0, 0, 0, 0.6)"},onClick:e,children:w.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl relative w-full max-w-lg",style:{padding:"24px",fontFamily:"Inter, Poppins, Roboto, sans-serif",maxHeight:"90vh",overflowY:"auto",transition:"all 300ms ease-out"},onClick:i=>i.stopPropagation(),children:[w.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition-all active:scale-95",style:{width:"32px",height:"32px",minWidth:"44px",minHeight:"44px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 300ms ease-out"},children:w.jsx(Uh,{size:24})}),w.jsx("h2",{className:"text-black mb-6",style:{fontSize:"24px",fontWeight:"700",textAlign:"center"},children:"Item Details"}),w.jsx("div",{className:"space-y-3",children:t.map((i,o)=>w.jsxs("div",{className:"bg-gray-50 rounded-2xl p-4 flex justify-between items-center",style:{transition:"all 300ms ease-out"},children:[w.jsx("div",{className:"text-gray-600",style:{fontSize:"14px",fontWeight:"500"},children:i.label}),w.jsx("div",{style:{color:i.color,fontSize:"20px",fontWeight:"700"},children:i.value})]},o))}),w.jsx("button",{onClick:e,className:"w-full mt-6 text-white rounded-2xl shadow-lg active:scale-98 transition-all",style:{backgroundColor:"#4CAF50",height:"48px",fontSize:"16px",fontWeight:"600",fontFamily:"Inter, Poppins, Roboto, sans-serif",minHeight:"44px",transition:"all 300ms ease-out"},children:"Close"})]})})}var yC=ky();const vC=Sy(yC);function _C(s){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=s:t.appendChild(document.createTextNode(s))}const wC=s=>{switch(s){case"success":return TC;case"info":return SC;case"warning":return IC;case"error":return kC;default:return null}},EC=Array(12).fill(0),xC=({visible:s,className:e})=>te.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":s},te.createElement("div",{className:"sonner-spinner"},EC.map((t,i)=>te.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${i}`})))),TC=te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},te.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),IC=te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},te.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),SC=te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},te.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),kC=te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},te.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),CC=te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},te.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),te.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),AC=()=>{const[s,e]=te.useState(document.hidden);return te.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),s};let Lh=1;class RC{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:i,...o}=e,u=typeof e?.id=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Lh++,d=this.toasts.find(g=>g.id===u),m=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(u)&&this.dismissedToasts.delete(u),d?this.toasts=this.toasts.map(g=>g.id===u?(this.publish({...g,...e,id:u,title:i}),{...g,...e,id:u,dismissible:m,title:i}):g):this.addToast({title:i,...o,dismissible:m,id:u}),u},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(i=>i({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let i;t.loading!==void 0&&(i=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const o=Promise.resolve(e instanceof Function?e():e);let u=i!==void 0,d;const m=o.then(async y=>{if(d=["resolve",y],te.isValidElement(y))u=!1,this.create({id:i,type:"default",message:y});else if(NC(y)&&!y.ok){u=!1;const _=typeof t.error=="function"?await t.error(`HTTP error! status: ${y.status}`):t.error,R=typeof t.description=="function"?await t.description(`HTTP error! status: ${y.status}`):t.description,K=typeof _=="object"&&!te.isValidElement(_)?_:{message:_};this.create({id:i,type:"error",description:R,...K})}else if(y instanceof Error){u=!1;const _=typeof t.error=="function"?await t.error(y):t.error,R=typeof t.description=="function"?await t.description(y):t.description,K=typeof _=="object"&&!te.isValidElement(_)?_:{message:_};this.create({id:i,type:"error",description:R,...K})}else if(t.success!==void 0){u=!1;const _=typeof t.success=="function"?await t.success(y):t.success,R=typeof t.description=="function"?await t.description(y):t.description,K=typeof _=="object"&&!te.isValidElement(_)?_:{message:_};this.create({id:i,type:"success",description:R,...K})}}).catch(async y=>{if(d=["reject",y],t.error!==void 0){u=!1;const x=typeof t.error=="function"?await t.error(y):t.error,_=typeof t.description=="function"?await t.description(y):t.description,z=typeof x=="object"&&!te.isValidElement(x)?x:{message:x};this.create({id:i,type:"error",description:_,...z})}}).finally(()=>{u&&(this.dismiss(i),i=void 0),t.finally==null||t.finally.call(t)}),g=()=>new Promise((y,x)=>m.then(()=>d[0]==="reject"?x(d[1]):y(d[1])).catch(x));return typeof i!="string"&&typeof i!="number"?{unwrap:g}:Object.assign(i,{unwrap:g})},this.custom=(e,t)=>{const i=t?.id||Lh++;return this.create({jsx:e(i),id:i,...t}),i},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const hn=new RC,bC=(s,e)=>{const t=e?.id||Lh++;return hn.addToast({title:s,...e,id:t}),t},NC=s=>s&&typeof s=="object"&&"ok"in s&&typeof s.ok=="boolean"&&"status"in s&&typeof s.status=="number",PC=bC,DC=()=>hn.toasts,VC=()=>hn.getActiveToasts();Object.assign(PC,{success:hn.success,info:hn.info,warning:hn.warning,error:hn.error,custom:hn.custom,message:hn.message,promise:hn.promise,dismiss:hn.dismiss,loading:hn.loading},{getHistory:DC,getToasts:VC});_C("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Pu(s){return s.label!==void 0}const OC=3,FC="24px",MC="16px",Ty=4e3,LC=356,jC=14,UC=45,zC=200;function kr(...s){return s.filter(Boolean).join(" ")}function BC(s){const[e,t]=s.split("-"),i=[];return e&&i.push(e),t&&i.push(t),i}const $C=s=>{var e,t,i,o,u,d,m,g,y;const{invert:x,toast:_,unstyled:R,interacting:z,setHeights:K,visibleToasts:J,heights:B,index:ne,toasts:ge,expanded:G,removeToast:Ne,defaultRichColors:je,closeButton:Se,style:b,cancelButtonStyle:I,actionButtonStyle:C,className:P="",descriptionClassName:N="",duration:O,position:k,gap:He,expandByDefault:st,classNames:Re,icons:be,closeButtonAriaLabel:Z="Close toast"}=s,[ce,re]=te.useState(null),[V,H]=te.useState(null),[se,le]=te.useState(!1),[fe,Ee]=te.useState(!1),[De,pe]=te.useState(!1),[Ue,gt]=te.useState(!1),[Bn,kn]=te.useState(!1),[ir,or]=te.useState(0),[zi,Mr]=te.useState(0),pn=te.useRef(_.duration||O||Ty),as=te.useRef(null),We=te.useRef(null),ot=ne===0,mn=ne+1<=J,Tt=_.type,Cn=_.dismissible!==!1,Bi=_.className||"",ar=_.descriptionClassName||"",lr=te.useMemo(()=>B.findIndex(we=>we.toastId===_.id)||0,[B,_.id]),ls=te.useMemo(()=>{var we;return(we=_.closeButton)!=null?we:Se},[_.closeButton,Se]),$n=te.useMemo(()=>_.duration||O||Ty,[_.duration,O]),us=te.useRef(0),rn=te.useRef(0),Hn=te.useRef(0),qn=te.useRef(null),[ur,cs]=k.split("-"),ds=te.useMemo(()=>B.reduce((we,Qe,ht)=>ht>=lr?we:we+Qe.height,0),[B,lr]),sn=AC(),hs=_.invert||x,An=Tt==="loading";rn.current=te.useMemo(()=>lr*He+ds,[lr,ds]),te.useEffect(()=>{pn.current=$n},[$n]),te.useEffect(()=>{le(!0)},[]),te.useEffect(()=>{const we=We.current;if(we){const Qe=we.getBoundingClientRect().height;return Mr(Qe),K(ht=>[{toastId:_.id,height:Qe,position:_.position},...ht]),()=>K(ht=>ht.filter(Rt=>Rt.toastId!==_.id))}},[K,_.id]),te.useLayoutEffect(()=>{if(!se)return;const we=We.current,Qe=we.style.height;we.style.height="auto";const ht=we.getBoundingClientRect().height;we.style.height=Qe,Mr(ht),K(Rt=>Rt.find(ct=>ct.toastId===_.id)?Rt.map(ct=>ct.toastId===_.id?{...ct,height:ht}:ct):[{toastId:_.id,height:ht,position:_.position},...Rt])},[se,_.title,_.description,K,_.id,_.jsx,_.action,_.cancel]);const Jt=te.useCallback(()=>{Ee(!0),or(rn.current),K(we=>we.filter(Qe=>Qe.toastId!==_.id)),setTimeout(()=>{Ne(_)},zC)},[_,Ne,K,rn]);te.useEffect(()=>{if(_.promise&&Tt==="loading"||_.duration===1/0||_.type==="loading")return;let we;return G||z||sn?(()=>{if(Hn.current<us.current){const Rt=new Date().getTime()-us.current;pn.current=pn.current-Rt}Hn.current=new Date().getTime()})():(()=>{pn.current!==1/0&&(us.current=new Date().getTime(),we=setTimeout(()=>{_.onAutoClose==null||_.onAutoClose.call(_,_),Jt()},pn.current))})(),()=>clearTimeout(we)},[G,z,_,Tt,sn,Jt]),te.useEffect(()=>{_.delete&&(Jt(),_.onDismiss==null||_.onDismiss.call(_,_))},[Jt,_.delete]);function Wn(){var we;if(be?.loading){var Qe;return te.createElement("div",{className:kr(Re?.loader,_==null||(Qe=_.classNames)==null?void 0:Qe.loader,"sonner-loader"),"data-visible":Tt==="loading"},be.loading)}return te.createElement(xC,{className:kr(Re?.loader,_==null||(we=_.classNames)==null?void 0:we.loader),visible:Tt==="loading"})}const Kn=_.icon||be?.[Tt]||wC(Tt);var Je,fs;return te.createElement("li",{tabIndex:0,ref:We,className:kr(P,Bi,Re?.toast,_==null||(e=_.classNames)==null?void 0:e.toast,Re?.default,Re?.[Tt],_==null||(t=_.classNames)==null?void 0:t[Tt]),"data-sonner-toast":"","data-rich-colors":(Je=_.richColors)!=null?Je:je,"data-styled":!(_.jsx||_.unstyled||R),"data-mounted":se,"data-promise":!!_.promise,"data-swiped":Bn,"data-removed":fe,"data-visible":mn,"data-y-position":ur,"data-x-position":cs,"data-index":ne,"data-front":ot,"data-swiping":De,"data-dismissible":Cn,"data-type":Tt,"data-invert":hs,"data-swipe-out":Ue,"data-swipe-direction":V,"data-expanded":!!(G||st&&se),"data-testid":_.testId,style:{"--index":ne,"--toasts-before":ne,"--z-index":ge.length-ne,"--offset":`${fe?ir:rn.current}px`,"--initial-height":st?"auto":`${zi}px`,...b,..._.style},onDragEnd:()=>{pe(!1),re(null),qn.current=null},onPointerDown:we=>{we.button!==2&&(An||!Cn||(as.current=new Date,or(rn.current),we.target.setPointerCapture(we.pointerId),we.target.tagName!=="BUTTON"&&(pe(!0),qn.current={x:we.clientX,y:we.clientY})))},onPointerUp:()=>{var we,Qe,ht;if(Ue||!Cn)return;qn.current=null;const Rt=Number(((we=We.current)==null?void 0:we.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Zt=Number(((Qe=We.current)==null?void 0:Qe.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ct=new Date().getTime()-((ht=as.current)==null?void 0:ht.getTime()),yt=ce==="x"?Rt:Zt,gn=Math.abs(yt)/ct;if(Math.abs(yt)>=UC||gn>.11){or(rn.current),_.onDismiss==null||_.onDismiss.call(_,_),H(ce==="x"?Rt>0?"right":"left":Zt>0?"down":"up"),Jt(),gt(!0);return}else{var vt,Bt;(vt=We.current)==null||vt.style.setProperty("--swipe-amount-x","0px"),(Bt=We.current)==null||Bt.style.setProperty("--swipe-amount-y","0px")}kn(!1),pe(!1),re(null)},onPointerMove:we=>{var Qe,ht,Rt;if(!qn.current||!Cn||((Qe=window.getSelection())==null?void 0:Qe.toString().length)>0)return;const ct=we.clientY-qn.current.y,yt=we.clientX-qn.current.x;var gn;const vt=(gn=s.swipeDirections)!=null?gn:BC(k);!ce&&(Math.abs(yt)>1||Math.abs(ct)>1)&&re(Math.abs(yt)>Math.abs(ct)?"x":"y");let Bt={x:0,y:0};const Rn=bt=>1/(1.5+Math.abs(bt)/20);if(ce==="y"){if(vt.includes("top")||vt.includes("bottom"))if(vt.includes("top")&&ct<0||vt.includes("bottom")&&ct>0)Bt.y=ct;else{const bt=ct*Rn(ct);Bt.y=Math.abs(bt)<Math.abs(ct)?bt:ct}}else if(ce==="x"&&(vt.includes("left")||vt.includes("right")))if(vt.includes("left")&&yt<0||vt.includes("right")&&yt>0)Bt.x=yt;else{const bt=yt*Rn(yt);Bt.x=Math.abs(bt)<Math.abs(yt)?bt:yt}(Math.abs(Bt.x)>0||Math.abs(Bt.y)>0)&&kn(!0),(ht=We.current)==null||ht.style.setProperty("--swipe-amount-x",`${Bt.x}px`),(Rt=We.current)==null||Rt.style.setProperty("--swipe-amount-y",`${Bt.y}px`)}},ls&&!_.jsx&&Tt!=="loading"?te.createElement("button",{"aria-label":Z,"data-disabled":An,"data-close-button":!0,onClick:An||!Cn?()=>{}:()=>{Jt(),_.onDismiss==null||_.onDismiss.call(_,_)},className:kr(Re?.closeButton,_==null||(i=_.classNames)==null?void 0:i.closeButton)},(fs=be?.close)!=null?fs:CC):null,(Tt||_.icon||_.promise)&&_.icon!==null&&(be?.[Tt]!==null||_.icon)?te.createElement("div",{"data-icon":"",className:kr(Re?.icon,_==null||(o=_.classNames)==null?void 0:o.icon)},_.promise||_.type==="loading"&&!_.icon?_.icon||Wn():null,_.type!=="loading"?Kn:null):null,te.createElement("div",{"data-content":"",className:kr(Re?.content,_==null||(u=_.classNames)==null?void 0:u.content)},te.createElement("div",{"data-title":"",className:kr(Re?.title,_==null||(d=_.classNames)==null?void 0:d.title)},_.jsx?_.jsx:typeof _.title=="function"?_.title():_.title),_.description?te.createElement("div",{"data-description":"",className:kr(N,ar,Re?.description,_==null||(m=_.classNames)==null?void 0:m.description)},typeof _.description=="function"?_.description():_.description):null),te.isValidElement(_.cancel)?_.cancel:_.cancel&&Pu(_.cancel)?te.createElement("button",{"data-button":!0,"data-cancel":!0,style:_.cancelButtonStyle||I,onClick:we=>{Pu(_.cancel)&&Cn&&(_.cancel.onClick==null||_.cancel.onClick.call(_.cancel,we),Jt())},className:kr(Re?.cancelButton,_==null||(g=_.classNames)==null?void 0:g.cancelButton)},_.cancel.label):null,te.isValidElement(_.action)?_.action:_.action&&Pu(_.action)?te.createElement("button",{"data-button":!0,"data-action":!0,style:_.actionButtonStyle||C,onClick:we=>{Pu(_.action)&&(_.action.onClick==null||_.action.onClick.call(_.action,we),!we.defaultPrevented&&Jt())},className:kr(Re?.actionButton,_==null||(y=_.classNames)==null?void 0:y.actionButton)},_.action.label):null)};function Iy(){if(typeof window>"u"||typeof document>"u")return"ltr";const s=document.documentElement.getAttribute("dir");return s==="auto"||!s?window.getComputedStyle(document.documentElement).direction:s}function HC(s,e){const t={};return[s,e].forEach((i,o)=>{const u=o===1,d=u?"--mobile-offset":"--offset",m=u?MC:FC;function g(y){["top","right","bottom","left"].forEach(x=>{t[`${d}-${x}`]=typeof y=="number"?`${y}px`:y})}typeof i=="number"||typeof i=="string"?g(i):typeof i=="object"?["top","right","bottom","left"].forEach(y=>{i[y]===void 0?t[`${d}-${y}`]=m:t[`${d}-${y}`]=typeof i[y]=="number"?`${i[y]}px`:i[y]}):g(m)}),t}const qC=te.forwardRef(function(e,t){const{id:i,invert:o,position:u="bottom-right",hotkey:d=["altKey","KeyT"],expand:m,closeButton:g,className:y,offset:x,mobileOffset:_,theme:R="light",richColors:z,duration:K,style:J,visibleToasts:B=OC,toastOptions:ne,dir:ge=Iy(),gap:G=jC,icons:Ne,containerAriaLabel:je="Notifications"}=e,[Se,b]=te.useState([]),I=te.useMemo(()=>i?Se.filter(se=>se.toasterId===i):Se.filter(se=>!se.toasterId),[Se,i]),C=te.useMemo(()=>Array.from(new Set([u].concat(I.filter(se=>se.position).map(se=>se.position)))),[I,u]),[P,N]=te.useState([]),[O,k]=te.useState(!1),[He,st]=te.useState(!1),[Re,be]=te.useState(R!=="system"?R:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Z=te.useRef(null),ce=d.join("+").replace(/Key/g,"").replace(/Digit/g,""),re=te.useRef(null),V=te.useRef(!1),H=te.useCallback(se=>{b(le=>{var fe;return(fe=le.find(Ee=>Ee.id===se.id))!=null&&fe.delete||hn.dismiss(se.id),le.filter(({id:Ee})=>Ee!==se.id)})},[]);return te.useEffect(()=>hn.subscribe(se=>{if(se.dismiss){requestAnimationFrame(()=>{b(le=>le.map(fe=>fe.id===se.id?{...fe,delete:!0}:fe))});return}setTimeout(()=>{vC.flushSync(()=>{b(le=>{const fe=le.findIndex(Ee=>Ee.id===se.id);return fe!==-1?[...le.slice(0,fe),{...le[fe],...se},...le.slice(fe+1)]:[se,...le]})})})}),[Se]),te.useEffect(()=>{if(R!=="system"){be(R);return}if(R==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?be("dark"):be("light")),typeof window>"u")return;const se=window.matchMedia("(prefers-color-scheme: dark)");try{se.addEventListener("change",({matches:le})=>{be(le?"dark":"light")})}catch{se.addListener(({matches:fe})=>{try{be(fe?"dark":"light")}catch(Ee){console.error(Ee)}})}},[R]),te.useEffect(()=>{Se.length<=1&&k(!1)},[Se]),te.useEffect(()=>{const se=le=>{var fe;if(d.every(pe=>le[pe]||le.code===pe)){var De;k(!0),(De=Z.current)==null||De.focus()}le.code==="Escape"&&(document.activeElement===Z.current||(fe=Z.current)!=null&&fe.contains(document.activeElement))&&k(!1)};return document.addEventListener("keydown",se),()=>document.removeEventListener("keydown",se)},[d]),te.useEffect(()=>{if(Z.current)return()=>{re.current&&(re.current.focus({preventScroll:!0}),re.current=null,V.current=!1)}},[Z.current]),te.createElement("section",{ref:t,"aria-label":`${je} ${ce}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},C.map((se,le)=>{var fe;const[Ee,De]=se.split("-");return I.length?te.createElement("ol",{key:se,dir:ge==="auto"?Iy():ge,tabIndex:-1,ref:Z,className:y,"data-sonner-toaster":!0,"data-sonner-theme":Re,"data-y-position":Ee,"data-x-position":De,style:{"--front-toast-height":`${((fe=P[0])==null?void 0:fe.height)||0}px`,"--width":`${LC}px`,"--gap":`${G}px`,...J,...HC(x,_)},onBlur:pe=>{V.current&&!pe.currentTarget.contains(pe.relatedTarget)&&(V.current=!1,re.current&&(re.current.focus({preventScroll:!0}),re.current=null))},onFocus:pe=>{pe.target instanceof HTMLElement&&pe.target.dataset.dismissible==="false"||V.current||(V.current=!0,re.current=pe.relatedTarget)},onMouseEnter:()=>k(!0),onMouseMove:()=>k(!0),onMouseLeave:()=>{He||k(!1)},onDragEnd:()=>k(!1),onPointerDown:pe=>{pe.target instanceof HTMLElement&&pe.target.dataset.dismissible==="false"||st(!0)},onPointerUp:()=>st(!1)},I.filter(pe=>!pe.position&&le===0||pe.position===se).map((pe,Ue)=>{var gt,Bn;return te.createElement($C,{key:pe.id,icons:Ne,index:Ue,toast:pe,defaultRichColors:z,duration:(gt=ne?.duration)!=null?gt:K,className:ne?.className,descriptionClassName:ne?.descriptionClassName,invert:o,visibleToasts:B,closeButton:(Bn=ne?.closeButton)!=null?Bn:g,interacting:He,position:se,style:ne?.style,unstyled:ne?.unstyled,classNames:ne?.classNames,cancelButtonStyle:ne?.cancelButtonStyle,actionButtonStyle:ne?.actionButtonStyle,closeButtonAriaLabel:ne?.closeButtonAriaLabel,removeToast:H,toasts:I.filter(kn=>kn.position==pe.position),heights:P.filter(kn=>kn.position==pe.position),setHeights:N,expandByDefault:m,gap:G,expanded:O,swipeDirections:e.swipeDirections})})):null}))});function WC(){const{uid:s,items:e}=sC(),[t,i]=Oe.useState("login"),[o,u]=Oe.useState(!1),[d,m]=Oe.useState(!0),[g,y]=Oe.useState(""),[x,_]=Oe.useState(null),[R,z]=Oe.useState("orders");Oe.useEffect(()=>{const I=setTimeout(()=>{m(!1),u(!!ki.currentUser),i(ki.currentUser?"dashboard":"login")},5e3),C=hv(ki,P=>{clearTimeout(I),u(!!P),i(P?"dashboard":"login"),m(!1)},P=>{console.error("Auth listener error:",P),clearTimeout(I),u(!1),i("login"),m(!1)});return()=>{clearTimeout(I),C()}},[]);const K=Oe.useMemo(()=>!e||e.length===0?[]:e.map(I=>({id:I.model,model:I.model,category:I.category??"General",opening:Number(I.opening??0),ordered:Number(I.ordered??0),delivered:Number(I.delivered??0),booked:Number(I.booked??0),dispatched:Number(I.dispatched??0),available:typeof I.available=="number"?Number(I.available):Number(I.opening??0)+Number(I.delivered??0)-Number(I.dispatched??0)})),[e]),J=Oe.useMemo(()=>K.filter(I=>I.model.toLowerCase().includes(g.trim().toLowerCase())),[K,g]);async function B(I,C,P){if(!s){toast.error("User not ready. Please re-login.");return}if(!I){toast.error("Model is required.");return}const N=C==="delivered"?P:C==="dispatched"?-P:0,O=$_(Rf,"users",s,"inventory",I);await Xk(O,{model:I,category:"General",[C]:xy(P),...N!==0?{available:xy(N)}:{}},{merge:!0})}async function ne(I){await B(I.model,"ordered",I.quantity),toast.success(` Order recorded for ${I.model}`),i("dashboard")}async function ge(I){await B(I.model,"delivered",I.receivedQty),toast.success(` Stock received for ${I.model}`),i("dashboard")}async function G(I){await B(I.model,"booked",I.quantity),toast.success(` Booking recorded for ${I.model}`),i("dashboard")}async function Ne(I){await B(I.model,"dispatched",I.quantity),toast.success(` Dispatch recorded for ${I.model}`),i("dashboard")}const je=I=>i(I==="order"?"order-form":"receive-form"),Se=I=>i(I==="book"?"book-form":"dispatch-form"),b=o&&!["add-modal","sell-modal","login","signup"].includes(t);return d?w.jsx("div",{className:"flex items-center justify-center h-screen",style:{backgroundColor:"#E3F2FD",fontFamily:"Inter, Poppins, Roboto, sans-serif"},children:w.jsx("p",{className:"text-gray-600",children:"Loading user"})}):w.jsxs("div",{className:"relative min-h-screen w-full",style:{backgroundColor:"#E3F2FD",fontFamily:"Inter, Poppins, Roboto, sans-serif"},children:[t==="login"&&w.jsx(iC,{onNavigateToSignup:()=>i("signup"),onLoginSuccess:I=>{u(!0),i("dashboard"),console.log("Logged in:",I?.email),toast.success(" Welcome to Stock Tracker!")}}),t==="signup"&&w.jsx(oC,{onNavigateToLogin:()=>i("login"),onSignUpSuccess:()=>{u(!0),i("dashboard"),toast.success(" Account created")}}),t==="dashboard"&&o&&w.jsx(aC,{inventory:J,searchTerm:g,onSearchChange:y,onAdminClick:()=>i("admin-selector"),onItemClick:I=>_(I),onLogout:async()=>{await C1(ki),u(!1),i("login"),toast.success(" Logged out")}}),t==="add-modal"&&w.jsx(lC,{onSelect:je,onClose:()=>i("dashboard")}),t==="sell-modal"&&w.jsx(uC,{onSelect:Se,onClose:()=>i("dashboard")}),t==="order-form"&&w.jsx(cC,{onSubmit:ne,onBack:()=>i("dashboard")}),t==="receive-form"&&w.jsx(dC,{onSubmit:ge,onBack:()=>i("dashboard"),pendingOrders:[]}),t==="book-form"&&w.jsx(hC,{onSubmit:G,onBack:()=>i("dashboard")}),t==="dispatch-form"&&w.jsx(fC,{onSubmit:Ne,onBack:()=>i("dashboard"),bookedOrders:[]}),t==="admin-selector"&&w.jsx(pC,{onBack:()=>i("dashboard"),onSelectType:I=>{z(I),i("admin-panel")}}),t==="admin-panel"&&w.jsx(mC,{onBack:()=>i("admin-selector"),onDelete:()=>{},initialTab:R,orders:[],received:[],booked:[],dispatched:[]}),x&&w.jsx(gC,{item:x,onClose:()=>_(null)}),b&&w.jsxs(w.Fragment,{children:[w.jsx("button",{onClick:()=>i("add-modal"),className:"fixed rounded-full flex items-center justify-center hover:scale-110 active:scale-95",style:{width:"80px",height:"80px",backgroundColor:"#4CAF50",bottom:"16px",right:"16px",zIndex:100,boxShadow:"0 8px 24px rgba(76,175,80,0.4)"},"aria-label":"Add Stock",children:w.jsx(Dw,{className:"text-white",size:36,strokeWidth:3})}),w.jsx("button",{onClick:()=>i("sell-modal"),className:"fixed rounded-full flex items-center justify-center hover:scale-110 active:scale-95",style:{width:"80px",height:"80px",backgroundColor:"#E53935",bottom:"16px",left:"16px",zIndex:100,boxShadow:"0 8px 24px rgba(229,57,53,0.4)"},"aria-label":"Sell/Book Stock",children:w.jsx(Rw,{className:"text-white",size:36,strokeWidth:3})})]}),w.jsx(qC,{position:"bottom-center",toastOptions:{style:{background:"#FFFFFF",color:"#000000",borderRadius:"16px",padding:"16px",fontSize:"14px",fontFamily:"Inter, Poppins, Roboto, sans-serif"}}})]})}vw.createRoot(document.getElementById("root")).render(w.jsx(WC,{}));
